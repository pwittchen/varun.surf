import"./styles.D1DfEveZ.js";const t=localStorage.getItem("theme")||"dark";async function e(t){const e=document.querySelector(`[data-endpoint="${t}"]`),n=e.querySelector(".status-endpoint-status"),s=e.querySelector(".status-endpoint-dot");try{const e=performance.now(),a=await fetch(t),o=performance.now(),d=Math.round(o-e);a.ok?(n.innerHTML=`<span class="status-endpoint-text">operational</span> <span class="status-endpoint-latency">(${d}ms)</span>`,s.className="status-endpoint-dot status-endpoint-dot-up"):(n.innerHTML=`<span class="status-endpoint-text">error (${a.status})</span>`,s.className="status-endpoint-dot status-endpoint-dot-down")}catch(a){n.innerHTML='<span class="status-endpoint-text">unreachable</span>',s.className="status-endpoint-dot status-endpoint-dot-down"}}async function n(){await async function(){try{const t=await fetch("/api/v1/status");if(!t.ok)throw new Error("Failed to fetch status");const e=await t.json(),n=document.getElementById("status-indicator"),s=n.querySelector(".status-dot"),a=n.querySelector(".status-text");if("UP"===e.status?(s.className="status-dot status-dot-up",a.textContent="All Systems Operational"):(s.className="status-dot status-dot-down",a.textContent="System Issues Detected"),document.getElementById("version").textContent=e.version||"unknown",document.getElementById("uptime").textContent=e.uptime||"-",document.getElementById("spots-count").textContent=e.spotsCount||"0",e.startTime){const t=new Date(e.startTime);document.getElementById("start-time").textContent=t.toLocaleString()}document.getElementById("last-updated").textContent="Last updated: "+(new Date).toLocaleTimeString()}catch(t){console.error("Error fetching status:",t);const e=document.getElementById("status-indicator"),n=e.querySelector(".status-dot"),s=e.querySelector(".status-text");n.className="status-dot status-dot-down",s.textContent="Unable to Connect"}}(),await async function(){await Promise.all(["/api/v1/health","/api/v1/status","/api/v1/spots"].map(e))}()}document.documentElement.setAttribute("data-theme",t),document.addEventListener("DOMContentLoaded",()=>{n(),setInterval(n,3e4),document.getElementById("refresh-status").addEventListener("click",n)});
