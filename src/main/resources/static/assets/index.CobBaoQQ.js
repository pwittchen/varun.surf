import{f as e,a as t}from"./api.CZRWHcNU.js";import{t as n,g as o}from"./translations.CwQqw7lg.js";let s=[],a=new Set,l="",i=!1,r=null,d="all",c=localStorage.getItem("previousUrl")||"/";function m(e){return e.toLowerCase().replace(/\s+/g,"").replace(/[^a-z]/g,"")}function u(){const e=window.location.pathname.split("/"),t=e.indexOf("country");return-1!==t&&e.length>t+1?e[t+1]:null}function g(){return"/starred"===window.location.pathname}function v(e){for(const t of a)if(m(t)===e)return t;return null}function p(e){if(g()||(c=window.location.pathname,localStorage.setItem("previousUrl",c)),"all"===e)window.history.pushState({country:"all"},"","/");else{const t=m(e);window.history.pushState({country:e},"",`/country/${t}`)}}function f(e){if("all"!==e&&e){const t=n(e.replace(/\s+/g,""));document.title=`${t} - VARUN.SURF`}else document.title="VARUN.SURF - Kitesurfing Weather Forecast"}function y(){const e=localStorage.getItem("favoriteSpots");return e?JSON.parse(e):[]}async function w(){i=!0;document.getElementById("favoritesToggle").classList.add("active");const e=document.getElementById("spotsGrid"),o=y();if(0===o.length)return A(0),void(e.innerHTML=`\n                <div class="error-message">\n                    <span class="error-icon">‚≠ê</span>\n                    <div class="error-title">${n("noFavoritesTitle")}</div>\n                    <div class="error-description">\n                        ${n("noFavoritesDescription")}\n                    </div>\n                </div>\n            `);try{0===s.length&&(s=await t());const n=s.filter(e=>o.includes(e.name));A(n.length),e.innerHTML="",n.forEach(t=>{e.appendChild(x(t))}),W()}catch(a){console.error("Failed to load favorites:",a.message),E(a)}}function I(){const e=document.getElementById("favoritesToggle");e.addEventListener("click",()=>{if(i){i=!1,localStorage.setItem("showingFavorites","false"),e.classList.remove("active"),function(){const e=c||"/";if(window.history.pushState({},"",e),"/"===e)f("all");else{const e=u();if(e){const t=v(e);t&&f(t)}}}();N(localStorage.getItem("selectedCountry")||"all","")}else localStorage.setItem("showingFavorites","true"),g()||(c=window.location.pathname,localStorage.setItem("previousUrl",c)),window.history.pushState({starred:!0},"","/starred"),document.title=`${n("favoritesToggleTooltip")} - VARUN.SURF`,w();window.scrollTo({top:0,behavior:"smooth"})});"true"===localStorage.getItem("showingFavorites")&&w()}function h(){const e=localStorage.getItem("language")||"en",t=document.getElementById("languageToggle");function o(e){localStorage.setItem("language",e),function(){f(localStorage.getItem("selectedCountry")||"all");const e=document.getElementById("searchInput");e&&(e.placeholder=n("searchPlaceholder"));const o=document.getElementById("themeToggle");o&&(o.title=n("themeToggleTooltip"));const a=document.getElementById("favoritesToggle");a&&(a.title=n("favoritesToggleTooltip"));const r=document.getElementById("infoToggle");r&&(r.title=n("infoToggleTooltip"));const c=document.getElementById("infoToggleLabel");c&&(c.textContent=n("infoButtonLabel"));const m=document.getElementById("kiteSizeToggle");m&&(m.title=n("kiteSizeToggleTooltip"));const u=document.getElementById("columnToggle");u&&(u.title=n("columnToggleTooltip"));t&&(t.title=n("languageToggleTooltip"));const g=document.getElementById("langCode");g&&(g.textContent=n("langCode"));const v=document.getElementById("spotCounter");if(v){const e=document.getElementById("spotCounterNumber"),t=e?e.textContent:"0";v.innerHTML=`<span class="spot-counter-number" id="spotCounterNumber">${t}</span><span>${n("spotsCount")}</span>`}const p=document.querySelector(".footer-disclaimer");p&&(p.textContent=n("footerDisclaimer"));if(s.length>0)T(s);else{$(localStorage.getItem("selectedCountry")||"all")}const y=document.getElementById("dropdownMenu");if(y){const e=y.querySelector('[data-country="all"]');e&&(e.textContent=`üåé ${n("allCountries")}`)}const I=document.querySelector(".loading-text");I&&(I.textContent=n("loadingText"));const h=document.getElementById("appInfoModalTitle");h&&(h.textContent=n("appInfoModalTitle"));const E=document.getElementById("appInfoDescription");E&&(E.textContent=n("appInfoDescription"));const L=document.getElementById("appInfoContactTitle");L&&(L.textContent=n("appInfoContactTitle"));const C=document.getElementById("appInfoContactText");C&&(C.innerHTML=n("appInfoContactText"));const b=document.getElementById("appInfoNewSpotTitle");b&&(b.textContent=n("appInfoNewSpotTitle"));const S=document.getElementById("appInfoNewSpotText");S&&(S.innerHTML=n("appInfoNewSpotText"));const k=document.getElementById("appInfoCollaborationTitle");k&&(k.textContent=n("appInfoCollaborationTitle"));const B=document.getElementById("appInfoCollaborationText");B&&(B.innerHTML=n("appInfoCollaborationText"));const M=document.querySelector("#kiteSizeModal .modal-title span");M&&(M.textContent=n("kiteSizeCalculatorTitle"));const x=document.querySelector('label[for="windSpeed"]');x&&(x.textContent=n("windSpeedLabel"));const A=document.getElementById("windSpeed");A&&(A.placeholder=n("windSpeedPlaceholder"));const D=document.querySelector('label[for="riderWeight"]');D&&(D.textContent=n("riderWeightLabel"));const H=document.getElementById("riderWeight");H&&(H.placeholder=n("riderWeightPlaceholder"));const F=document.querySelector('label[for="skillLevel"]');F&&(F.textContent=n("skillLevelLabel"));const W=document.getElementById("skillLevel");if(W){const e=W.querySelectorAll("option");e[0].textContent=n("skillLevelPlaceholder"),e[1].textContent=n("skillBeginnerFlat"),e[2].textContent=n("skillBeginnerSmall"),e[3].textContent=n("skillIntermediateFlat"),e[4].textContent=n("skillIntermediateMedium"),e[5].textContent=n("skillAdvancedFlat"),e[6].textContent=n("skillAdvancedMedium"),e[7].textContent=n("skillAdvancedLarge")}const q=document.getElementById("calculateBtn");q&&(q.textContent=n("calculateButton"));const U=document.querySelector("#calcResult .calc-result-title");U&&(U.textContent=n("recommendedEquipment"));const O=document.querySelector("#calcResult .calc-result-item:nth-child(2) .calc-result-label");O&&(O.textContent=n("kiteSizeLabel"));const R=document.querySelector("#calcResult .calc-result-item:nth-child(3) .calc-result-label");R&&(R.textContent=n("boardSizeLabel"));const P=document.querySelector("#calcResult .modal-disclaimer");P&&(P.textContent=n("calcDisclaimer"));const G=document.querySelector("#aiModal .modal-disclaimer");G&&(G.textContent=n("aiDisclaimer"));s.length>0&&(i?w():N(d,l,!0))}()}o(e),t.addEventListener("click",()=>{o("en"===(localStorage.getItem("language")||"en")?"pl":"en")})}function E(e){const t=document.getElementById("spotsGrid");let o=n("errorLoadDataTitle"),s=n("errorLoadDataDescription");e.message.includes("HTTP Error: 404")?(o=n("errorDataNotFoundTitle"),s=n("errorDataNotFoundDescription")):e.message.includes("HTTP Error: 500")?(o=n("errorServerTitle"),s=n("errorServerDescription")):e.message.includes("Failed to fetch")||e.message.includes("NetworkError")?(o=n("errorConnectionTitle"),s=n("errorConnectionDescription")):(e.message.includes("JSON")||e.message.includes("Invalid data format"))&&(o=n("errorDataFormatTitle"),s=n("errorDataFormatDescription")),t.innerHTML=`\n                <div class="error-message">\n                    <span class="error-icon">‚ö†Ô∏è</span>\n                    <div class="error-title">${o}</div>\n                    <div class="error-description">\n                        ${s}<br/>\n                        ${n("errorRefresh")}\n                    </div>\n                </div>\n            `}function L(e){return{N:"‚Üì",NE:"‚Üô",E:"‚Üê",SE:"‚Üñ",S:"‚Üë",SW:"‚Üó",W:"‚Üí",NW:"‚Üò"}[e]||"‚Ä¢"}function C(e){return e<12?"wind-weak":e>=12&&e<18?"wind-moderate":e>=18&&e<=25?"wind-strong":"wind-extreme"}function T(e){const t=document.getElementById("dropdownMenu");document.getElementById("selectedCountry"),a.clear(),e.forEach(e=>{e.country&&a.add(e.country)});const s=Array.from(a).sort((e,t)=>{const o=n(e.replace(/\s+/g,"")),s=n(t.replace(/\s+/g,""));return o.localeCompare(s)}),l=localStorage.getItem("selectedCountry")||"all",r=n("allCountries");let d=`<div class="dropdown-option ${"all"===l?"selected":""}" data-country="all">üåé ${r}</div>`;s.forEach(e=>{const t=o(e),s=l===e?"selected":"",a=n(e.replace(/\s+/g,""));d+=`<div class="dropdown-option ${s}" data-country="${e}">${t} ${a.toUpperCase()}</div>`}),t.innerHTML=d,$(l),function(){const e=document.querySelectorAll(".dropdown-option"),t=document.getElementById("searchInput");e.forEach(n=>{n.addEventListener("click",o=>{o.stopPropagation(),e.forEach(e=>e.classList.remove("selected")),n.classList.add("selected");const s=n.dataset.country;$(s),localStorage.setItem("selectedCountry",s),p(s),f(s),i&&(i=!1,localStorage.setItem("showingFavorites","false"),document.getElementById("favoritesToggle").classList.remove("active")),N(s,t.value,!0),closeDropdown(),window.scrollTo({top:0,behavior:"smooth"})})})}()}function $(e){const t=document.getElementById("selectedCountry");if(!t)return;if(!e||"all"===e)return void(t.textContent=`üåé ${n("allCountries")}`);const s=o(e),a=n(e.replace(/\s+/g,""));t.textContent=`${s} ${a.toUpperCase()}`}function b(){const e=document.getElementById("appInfoModal");e&&(e.classList.add("active"),document.body.style.overflow="hidden")}function S(){const e=document.getElementById("appInfoModal");e&&(e.classList.remove("active"),document.body.style.overflow="auto")}function k(){document.getElementById("aiModal").classList.remove("active"),document.body.style.overflow="auto"}function B(){document.getElementById("infoModal").classList.remove("active"),document.body.style.overflow="auto"}function M(){document.getElementById("icmModal").classList.remove("active"),document.body.style.overflow="auto";document.getElementById("icmImage").src=""}function x(e){const t=document.createElement("div");t.className="spot-card",t.dataset.country=n(e.country.replace(/\s+/g,""));const o=e.forecast&&e.forecast.some(e=>void 0!==e.wave)||e.currentConditions&&void 0!==e.currentConditions.wave;let s="";e.forecast&&Array.isArray(e.forecast)&&e.forecast.forEach(e=>{const t=C(e.wind),a=C(e.gusts),l=C((e.wind+e.gusts)/2),i="wind-weak"===l?"weak-wind":"wind-moderate"===l?"moderate-wind":"wind-strong"===l?"strong-wind":"extreme-wind",r=e.temp>=18?"temp-positive":"temp-negative",d=L(e.direction),c=0===e.precipitation?"precipitation-none":"precipitation";let m="",u="-";var g;void 0!==e.wave&&(m=e.wave<1?"wave-small":e.wave>=1&&e.wave<2?"wave-moderate":"wave-large",u=`${e.wave}`),s+=`\n                        <tr class="${i}">\n                            <td><strong>${g=e.date,{Mon:n("dayMon"),Tue:n("dayTue"),Wed:n("dayWed"),Thu:n("dayThu"),Fri:n("dayFri"),Sat:n("daySat"),Sun:n("daySun"),Today:n("dayToday"),Tomorrow:n("dayTomorrow"),"Day 3":n("dayDay3"),"Day 4":n("dayDay4"),"Day 5":n("dayDay5")}[g]||g}</strong></td>\n                            <td class="${t}">${e.wind} kts</td>\n                            <td class="${a}">${e.gusts} kts</td>\n                            <td class="${t}">\n                                <span class="wind-arrow">${d}</span> ${e.direction}\n                            </td>\n                            <td class="${r}">${e.temp}¬∞C</td>\n                            <td class="${c}">${e.precipitation}%</td>\n                            ${o?`<td class="${m}">${u}</td>`:""}\n                        </tr>\n                    `});let a="";if(e.currentConditions){const t=C(e.currentConditions.wind),s=C(e.currentConditions.gusts),l=C((e.currentConditions.wind+e.currentConditions.gusts)/2),i="wind-weak"===l?"weak-wind":"wind-moderate"===l?"moderate-wind":"wind-strong"===l?"strong-wind":"extreme-wind",r=e.currentConditions.temp>=20?"temp-positive":"temp-negative",d=L(e.currentConditions.direction);let c="",m="-";void 0!==e.currentConditions.wave&&(c=e.currentConditions.wave<1?"wave-small":e.currentConditions.wave>=1&&e.currentConditions.wave<2?"wave-moderate":"wave-large",m=`${e.currentConditions.wave}`),a=`\n                    <tr class="${i}" style="border-bottom: 2px solid #404040;">\n                        <td>\n                            <div class="live-indicator">\n                                <strong class="live-text">${n("nowLabel")}</strong>\n                                <div class="live-dot"></div>\n                            </div>\n                        </td>\n                        <td class="${t}">${e.currentConditions.wind} kts</td>\n                        <td class="${s}">${e.currentConditions.gusts} kts</td>\n                        <td class="${t}">\n                            <span class="wind-arrow">${d}</span> ${e.currentConditions.direction}\n                        </td>\n                        <td class="${r}">${e.currentConditions.temp}¬∞C</td>\n                        <td>-</td>\n                        ${o?`<td class="${c}">${m}</td>`:""}\n                    </tr>\n                `}const l=(i=e.name,y().includes(i));var i;const r=l?"favorited":"";return t.innerHTML=`\n                <div class="drag-handle" draggable="true">ìÉå</div>\n                <div class="spot-header">\n                    <div class="spot-title">\n                        <div class="spot-name" onclick="window.location.href='/spot/${e.wgId}'">${e.name||"Unknown Spot"}</div>\n                    </div>\n                    <div class="spot-meta">\n                        <div class="country-tag-wrapper">\n                            <div class="favorite-icon ${r}" onclick="toggleFavorite('${e.name}')" title="${l?"Remove from favorites":"Add to favorites"}">\n                                <svg class="favorite-icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n                                    <path d="M1.327,12.4,4.887,15,3.535,19.187A3.178,3.178,0,0,0,4.719,22.8a3.177,3.177,0,0,0,3.8-.019L12,20.219l3.482,2.559a3.227,3.227,0,0,0,4.983-3.591L19.113,15l3.56-2.6a3.227,3.227,0,0,0-1.9-5.832H16.4L15.073,2.432a3.227,3.227,0,0,0-6.146,0L7.6,6.568H3.231a3.227,3.227,0,0,0-1.9,5.832Z"/>\n                                </svg>\n                            </div>\n                            <div class="country-tag">${n(e.country.replace(/\s+/g,""))||"Unknown"}</div>\n                        </div>\n                        <div class="last-updated">${e.lastUpdated||"No data"}</div>\n                    </div>\n                </div>\n                <div class="external-links">\n                    ${e.spotInfo?`<span class="external-link info-link" onclick="openInfoModal('${e.name}')"></span>`:""}\n                    ${e.windguruUrl?`<a href="${e.windguruUrl}" target="_blank" class="external-link">WG</a>`:""}\n                    ${e.windfinderUrl?`<a href="${e.windfinderUrl}" target="_blank" class="external-link">WF</a>`:""}\n                    ${e.icmUrl?`<span class="external-link" onclick="openIcmModal('${e.name}', '${e.icmUrl}')">ICM</span>`:""}\n                    ${e.webcamUrl?`<a href="${e.webcamUrl}" target="_blank" class="external-link webcam-link">CAM</a>`:""}\n                    ${e.locationUrl?`<a href="${e.locationUrl}" target="_blank" class="external-link location-link">MAP</a>`:""}\n                    ${e.aiAnalysisEn||e.aiAnalysisPl?`<span class="external-link ai-link" onclick="openAIModal('${e.name}')">AI</span>`:""}\n                </div>\n                <table class="weather-table">\n                    <thead>\n                        <tr>\n                            <th>${n("dateHeader")}</th>\n                            <th>${n("windHeader")}</th>\n                            <th>${n("gustsHeader")}</th>\n                            <th>${n("directionHeader")}</th>\n                            <th>${n("tempHeader")}</th>\n                            <th>${n("rainHeader")}</th>\n                            ${o?`<th>${n("waveHeader")}</th>`:""}\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ${a}\n                        ${s}\n                    </tbody>\n                </table>\n            `,t}function A(e){const t=document.getElementById("spotCounterNumber");t&&(t.textContent=e)}function D(e,t,n){let o="all"===t?e:e.filter(e=>e.country===t);if(n&&""!==n.trim()){const e=n.toLowerCase().trim();o=o.filter(t=>t.name.toLowerCase().includes(e)||t.country&&t.country.toLowerCase().includes(e))}return o}async function N(e="all",o="",a=!1,i=!1){d=e,l=o;const r=document.getElementById("spotsGrid");if(s.length>0&&!i){return void H(D(s,e,o),r,e,o)}document.getElementById("spotsGrid").innerHTML=`\n                <div class="loading-message">\n                    <div class="loading-spinner"></div>\n                    <span class="loading-text">${n("loadingText")}</span>\n                </div>\n            `;const c=Date.now(),m=a?0:2e3;try{const n=await t(),a=m-(Date.now()-c);a>0&&await new Promise(e=>setTimeout(e,a)),s=n,T(n);H(D(n,e,o),r,e,o)}catch(u){console.error("Failed to load weather:",u.message),E(u)}}function H(e,t,o,s){if(t.innerHTML="",0===e.length){A(0);const e=s?`${n("errorNoSpotsSearchDescription")} "${s}"`:`${n("errorNoSpotsDescription")}`;t.innerHTML=`\n                    <div class="error-message">\n                        <span class="error-icon">üîç</span>\n                        <div class="error-title">${n("errorNoSpotsTitle")}</div>\n                        <div class="error-description">\n                            ${e}<br/>\n                            ${n("errorTryAdjusting")}\n                        </div>\n                    </div>\n                `}else{e.every(e=>!e.forecast||0===e.forecast.length)?(t.innerHTML=`\n                    <div class="loading-message">\n                        <div class="loading-spinner"></div>\n                        <span class="loading-text">${n("loadingText")}</span>\n                    </div>\n                `,setTimeout(()=>{N(o,s,!1,!0)},5e3)):(A(e.length),e.forEach(e=>{t.appendChild(x(e))}),W())}}function F(){const e=document.getElementById("spotsGrid");let t=null,n=null;e.addEventListener("dragstart",e=>{e.target.closest(".drag-handle")?(t=e.target.closest(".spot-card"),t&&(t.classList.add("dragging"),e.dataTransfer.effectAllowed="move",n=t.cloneNode(!0),n.classList.add("drag-ghost"),n.classList.remove("dragging"),n.style.width=t.offsetWidth+"px",n.style.position="fixed",n.style.left="-9999px",n.style.top="-9999px",document.body.appendChild(n),e.dataTransfer.setDragImage(n,e.offsetX,e.offsetY))):e.preventDefault()}),e.addEventListener("dragend",()=>{t&&(t.classList.remove("dragging"),t=null,function(){const e=document.getElementById("spotsGrid"),t=e.querySelectorAll(".spot-card"),n=Array.from(t).map(e=>e.querySelector(".spot-name").textContent),o=e.classList.contains("three-columns"),s=`spotOrder_${o?"3col":"2col"}_${d}_${l}`;localStorage.setItem(s,JSON.stringify(n))}()),n&&(n.remove(),n=null)}),e.addEventListener("dragover",n=>{n.preventDefault();const o=function(e,t,n){const o=[...e.querySelectorAll(".spot-card:not(.dragging)")];let s=null,a=Number.NEGATIVE_INFINITY;return o.forEach(e=>{const o=e.getBoundingClientRect(),l=o.top+o.height/2,i=n-l,r=t-(o.left+o.width/2);if(i<0){i>a&&(a=i,s=e)}else if(r<0&&i<o.height/2){const t=r/2+i;t>a&&(a=t,s=e)}}),s}(e,n.clientX,n.clientY);t&&null==o?e.appendChild(t):t&&o&&e.insertBefore(t,o)})}function W(){const e=document.getElementById("spotsGrid"),t=`spotOrder_${e.classList.contains("three-columns")?"3col":"2col"}_${d}_${l}`,n=localStorage.getItem(t);if(n)try{const t=JSON.parse(n),o=Array.from(e.querySelectorAll(".spot-card"));t.forEach(t=>{const n=o.find(e=>e.querySelector(".spot-name").textContent===t);n&&e.appendChild(n)})}catch(o){console.error("Failed to load card order:",o)}}function q(){r&&clearInterval(r),r=setInterval(()=>{!async function(){try{const e=await t();if(s=e,T(e),i){const e=document.getElementById("spotsGrid"),t=y();s.filter(e=>t.includes(e.name)).forEach(t=>{const n=Array.from(e.querySelectorAll(".spot-card")).find(e=>{const n=e.querySelector(".spot-name");return n&&n.textContent===t.name});if(n){const e=x(t);n.replaceWith(e)}})}else{const e=D(s,d,l),t=document.getElementById("spotsGrid");e.forEach(e=>{const n=Array.from(t.querySelectorAll(".spot-card")).find(t=>{const n=t.querySelector(".spot-name");return n&&n.textContent===e.name});if(n){const t=x(e);n.replaceWith(t)}}),A(e.length)}console.log("Data refreshed in background at",(new Date).toLocaleTimeString())}catch(e){console.error("Background refresh failed:",e)}}()},6e4),console.log("Auto-refresh started: updating every",60,"seconds")}function U(){const e=document.getElementById("kiteSizeToggle"),t=document.getElementById("kiteSizeModal"),n=document.getElementById("kiteSizeModalClose"),o=document.getElementById("calculateBtn");function s(){t.classList.remove("active"),document.body.style.overflow="auto"}e.addEventListener("click",()=>{t.classList.add("active"),document.body.style.overflow="hidden",document.getElementById("calcResult").classList.remove("show")}),n.addEventListener("click",s),t.addEventListener("click",e=>{e.target===t&&s()}),o.addEventListener("click",()=>{const e=parseFloat(document.getElementById("windSpeed").value),t=parseFloat(document.getElementById("riderWeight").value),n=document.getElementById("skillLevel").value,o=document.getElementById("calcWarning"),s=document.getElementById("calcResult");if(o.style.display="none",s.classList.remove("show"),!e||e<5||e>50)return o.innerHTML="‚ö†Ô∏è <strong>INVALID WIND SPEED</strong><br><br>Please enter a valid wind speed between 5 and 50 knots.",void(o.style.display="block");if(!t||t>150)return o.innerHTML="‚ö†Ô∏è <strong>INVALID RIDER WEIGHT</strong><br><br>Please enter a valid rider weight between 40 and 150 kg.",void(o.style.display="block");if(t<40)return o.innerHTML="‚ö†Ô∏è <strong>WEIGHT TOO LOW</strong><br><br>Your weight is too low and riding may be dangerous. Kitesurfing requires sufficient body weight for control and safety.",void(o.style.display="block");if(!n)return o.innerHTML="‚ö†Ô∏è <strong>SKILL LEVEL REQUIRED</strong><br><br>Please select your skill level and conditions.",void(o.style.display="block");if(t>120)return o.innerHTML="üòâ Maybe you should lose some weight before going onto the water!",void(o.style.display="block");if(e>40)return o.innerHTML="‚ö†Ô∏è <strong>EXTREME CONDITIONS!</strong><br><br>Wind speeds above 40 knots are extremely dangerous. We strongly recommend NOT going onto the water in these conditions. Stay safe!",void(o.style.display="block");if(e<12)return o.innerHTML="üí® <strong>LOW WIND CONDITIONS</strong><br><br>There is not enough wind for riding with a regular setup. However, you could try going on a <strong>kite foil board</strong>, which works great in light wind conditions!",void(o.style.display="block");if(e<15&&(n.includes("medium")||n.includes("large")))return o.innerHTML="üåä <strong>INSUFFICIENT WIND FOR WAVE CONDITIONS</strong><br><br>Wind speed below 15 knots is not enough for riding in medium or large waves. Waves create additional resistance and you need more wind power to maintain speed and control. We recommend NOT going onto the water in these conditions.",void(o.style.display="block");const a=function(e,t,n){let o=2.5;const s={"beginner-flat":3,"beginner-small":2.8,"intermediate-flat":2.5,"intermediate-medium":2.3,"advanced-flat":2.2,"advanced-medium":2,"advanced-large":1.8};n&&s[n]&&(o=s[n]);let a=t*o/e;return a=[7,9,10,12,14,15,17].reduce((e,t)=>Math.abs(t-a)<Math.abs(e-a)?t:e),a}(e,t,n),l=function(e,t){let n="Twin Tip";if((t.includes("large")||t.includes("medium")&&t.includes("advanced"))&&(n="Surfboard/Directional üèÑ"),"Twin Tip"===n){let o=125;o+=.5*(Math.min(e,115)-50);const s={"beginner-flat":1.15,"beginner-small":1.1,"intermediate-flat":1,"intermediate-medium":.98,"advanced-flat":.92,"advanced-medium":.9}[t]||1;let a=Math.round(o*s);a=2*Math.round(a/2);const l=136;let i=160;(t.includes("intermediate")||t.includes("advanced"))&&(i=142),a=Math.max(l,Math.min(a,i));let r=38+Math.floor((a-136)/4);return r=Math.min(r,46),`${a} x ${r} cm (${n})`}return`${e<70?"5'6\"":e<85?"5'10\"":"6'0\""} (${n})`}(t,n);document.getElementById("kiteSize").textContent=`${a} m¬≤`,document.getElementById("boardSize").textContent=l,s.classList.add("show")}),document.addEventListener("keydown",e=>{"Escape"===e.key&&t.classList.contains("active")&&s()})}function O(){const e=u();if(e)t().then(t=>{s=t,T(t);const o=v(e);o?(localStorage.setItem("selectedCountry",o),f(o),N(o,"",!0)):function(e){const t=document.getElementById("spotsGrid");A(0),t.innerHTML=`\n            <div class="error-message">\n                <span class="error-icon">‚ö†Ô∏è</span>\n                <div class="error-title">${n("invalidCountry")}</div>\n                <div class="error-description">\n                    ${n("invalidCountryDescription")}<br/>\n                    <br/>\n                    <strong>Invalid country: "${e}"</strong>\n                </div>\n            </div>\n        `}(e),q()}).catch(e=>{console.error("Failed to load weather:",e.message),E(e)});else{const e=localStorage.getItem("selectedCountry")||"all";p(e),f(e),N(e),q()}}window.onbeforeunload=function(){window.scrollTo(0,0)},window.openAppInfoModal=b,window.closeAppInfoModal=S,window.openAIModal=function(e){const t=s.find(t=>t.name===e),o="pl"===(localStorage.getItem("language")||"en")?t.aiAnalysisPl:t.aiAnalysisEn;if(!t||!o)return;const a=document.getElementById("aiModal"),l=document.getElementById("modalSpotName"),i=document.getElementById("aiAnalysisContent"),r=document.getElementById("aiModalDisclaimer");l.textContent=`${n("aiAnalysisTitle")} - ${e}`,i.innerHTML=o.trim(),r.textContent=n("aiDisclaimer"),a.classList.add("active"),document.body.style.overflow="hidden"},window.closeAIModal=k,window.openInfoModal=function(e){const t=s.find(t=>t.name===e);if(!t||!t.spotInfo)return;const o=document.getElementById("infoModal"),a=document.getElementById("infoModalSpotName"),l=document.getElementById("spotInfoContent");a.textContent=`${e}`;const i=function(e){return e?"pl"===(localStorage.getItem("language")||"en")?e.spotInfoPL:e.spotInfo:null}(t);l.innerHTML=`\n                <div class="info-grid">\n                    <div class="info-item" style="grid-column: 1 / -1;">\n                        <div class="info-label">${n("overviewLabel")}</div>\n                        <div class="info-value">${i.description}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${n("spotTypeLabel")}</div>\n                        <div class="info-value">${i.type}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${n("bestWindLabel")}</div>\n                        <div class="info-value">${i.bestWind}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${n("waterTempLabel")}</div>\n                        <div class="info-value">${i.waterTemp}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${n("experienceLabel")}</div>\n                        <div class="info-value">${i.experience}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${n("launchTypeLabel")}</div>\n                        <div class="info-value">${i.launch}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${n("hazardsLabel")}</div>\n                        <div class="info-value">${i.hazards}</div>\n                    </div>\n                    <div class="info-item" style="grid-column: 1 / -1;">\n                        <div class="info-label">${n("seasonLabel")}</div>\n                        <div class="info-value">${i.season}</div>\n                    </div>\n                </div>\n            `,o.classList.add("active"),document.body.style.overflow="hidden"},window.closeInfoModal=B,window.openIcmModal=function(e,t){const o=document.getElementById("icmModal"),s=document.getElementById("icmModalSpotName"),a=document.getElementById("icmImage");s.textContent=`${e} - ${n("icmForecastTitle")}`,a.src=t,a.alt=`${n("icmForecastTitle")} for ${e}`,o.classList.add("active"),document.body.style.overflow="hidden"},window.closeIcmModal=M,window.toggleFavorite=function(e){let t=y();const n=t.indexOf(e);n>-1?t.splice(n,1):t.push(e),function(e){localStorage.setItem("favoriteSpots",JSON.stringify(e))}(t),document.querySelectorAll(".favorite-icon").forEach(t=>{const o=t.closest(".spot-card");if(o){const s=o.querySelector(".spot-name");s&&s.textContent===e&&(n>-1?(t.classList.remove("favorited"),t.title="Add to favorites"):(t.classList.add("favorited"),t.title="Remove from favorites"),t.classList.add("animate"),setTimeout(()=>t.classList.remove("animate"),400))}}),i&&w()},document.addEventListener("DOMContentLoaded",()=>{!function(){const e=localStorage.getItem("theme")||"dark",t=document.getElementById("themeToggle"),n=document.getElementById("themeIcon");function o(e){document.documentElement.setAttribute("data-theme",e),n.innerHTML="light"===e?'<path d="M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5,5-2.24,5-5-2.24-5-5-5Zm0,7c-1.1,0-2-.9-2-2s.9-2,2-2,2,.9,2,2-.9,2-2,2Zm4.95-6.95c-.59-.59-.59-1.54,0-2.12l1.41-1.41c.59-.59,1.54-.59,2.12,0,.59,.59,.59,1.54,0,2.12l-1.41,1.41c-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44ZM7.05,16.95c.59,.59,.59,1.54,0,2.12l-1.41,1.41c-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44c-.59-.59-.59-1.54,0-2.12l1.41-1.41c.59-.59,1.54-.59,2.12,0ZM3.51,5.64c-.59-.59-.59-1.54,0-2.12,.59-.59,1.54-.59,2.12,0l1.41,1.41c.59,.59,.59,1.54,0,2.12-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44l-1.41-1.41Zm16.97,12.73c.59,.59,.59,1.54,0,2.12-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44l-1.41-1.41c-.59-.59-.59-1.54,0-2.12,.59-.59,1.54-.59,2.12,0l1.41,1.41Zm3.51-6.36c0,.83-.67,1.5-1.5,1.5h-2c-.83,0-1.5-.67-1.5-1.5s.67-1.5,1.5-1.5h2c.83,0,1.5,.67,1.5,1.5ZM3.5,13.5H1.5c-.83,0-1.5-.67-1.5-1.5s.67-1.5,1.5-1.5H3.5c.83,0,1.5,.67,1.5,1.5s-.67,1.5-1.5,1.5ZM10.5,3.5V1.5c0-.83,.67-1.5,1.5-1.5s1.5,.67,1.5,1.5V3.5c0,.83-.67,1.5-1.5,1.5s-1.5-.67-1.5-1.5Zm3,17v2c0,.83-.67,1.5-1.5,1.5s-1.5-.67-1.5-1.5v-2c0-.83,.67-1.5,1.5-1.5s1.5,.67,1.5,1.5Z"/>':'<path d="M15,24a12.021,12.021,0,0,1-8.914-3.966,11.9,11.9,0,0,1-3.02-9.309A12.122,12.122,0,0,1,13.085.152a13.061,13.061,0,0,1,5.031.205,2.5,2.5,0,0,1,1.108,4.226c-4.56,4.166-4.164,10.644.807,14.41a2.5,2.5,0,0,1-.7,4.32A13.894,13.894,0,0,1,15,24Z"/>',localStorage.setItem("theme",e)}o(e),t.addEventListener("click",()=>{o("dark"===document.documentElement.getAttribute("data-theme")?"light":"dark")});const s=document.getElementById("headerLogo");s&&s.addEventListener("click",()=>{const e=localStorage.getItem("selectedCountry")||"all";if("all"===e)window.location.href="/";else{const t=m(e);window.location.href=`/country/${t}`}})}(),h(),function(){const e=document.getElementById("dropdownButton"),t=document.getElementById("dropdownMenu");function n(){e.classList.remove("open","active"),t.classList.remove("open")}e.addEventListener("click",o=>{o.stopPropagation(),t.classList.contains("open")?n():(e.classList.add("open","active"),t.classList.add("open"))}),document.addEventListener("click",o=>{e.contains(o.target)||t.contains(o.target)||n()}),document.addEventListener("keydown",o=>{"Escape"===o.key&&t.classList.contains("open")&&(n(),e.focus())}),window.closeDropdown=n}(),function(){const e=document.getElementById("aiModal"),t=document.getElementById("modalClose"),n=document.getElementById("appInfoModal"),o=document.getElementById("appInfoModalClose"),s=document.getElementById("infoModal"),a=document.getElementById("infoModalClose"),l=document.getElementById("icmModal"),i=document.getElementById("icmModalClose");t.addEventListener("click",k),e.addEventListener("click",t=>{t.target===e&&k()}),o&&o.addEventListener("click",S),n&&n.addEventListener("click",e=>{e.target===n&&S()}),a.addEventListener("click",B),s.addEventListener("click",e=>{e.target===s&&B()}),i.addEventListener("click",M),l.addEventListener("click",e=>{e.target===l&&M()}),document.addEventListener("keydown",t=>{"Escape"===t.key&&(e.classList.contains("active")&&k(),n&&n.classList.contains("active")&&S(),s.classList.contains("active")&&B(),l.classList.contains("active")&&M())})}(),function(){const e=document.getElementById("searchInput"),t=document.getElementById("searchClear");let n;e.addEventListener("input",e=>{const o=e.target.value;""!==o.trim()?t.classList.add("visible"):t.classList.remove("visible"),i&&""!==o.trim()&&(i=!1,document.getElementById("favoritesToggle").classList.remove("active")),n&&clearTimeout(n),n=setTimeout(()=>{N(d,o,!0),window.scrollTo(0,0)},300)}),t.addEventListener("click",()=>{e.value="",t.classList.remove("visible"),N(d,""),window.scrollTo(0,0),e.focus()}),e.addEventListener("keydown",n=>{"Escape"===n.key&&""!==e.value&&(e.value="",t.classList.remove("visible"),N(d,""))})}(),F(),I(),function(){const e=document.getElementById("hamburgerMenu"),t=document.getElementById("headerControls"),n=document.querySelector(".main-content");e&&e.addEventListener("click",()=>{t.classList.contains("show")?(t.classList.remove("show"),e.classList.remove("active"),e.textContent="‚ò∞",n&&n.classList.remove("menu-open")):(t.classList.add("show"),e.classList.add("active"),e.textContent="‚úï",n&&n.classList.add("menu-open"))})}(),U(),function(){const e=document.getElementById("columnToggle"),t=document.getElementById("spotsGrid"),n=document.getElementById("icon3Columns"),o=document.getElementById("icon2Columns"),s=window.innerWidth<=768||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),a=localStorage.getItem("threeColumns");let l=null===a||"true"===a;function i(e){e?(n.style.display="block",o.style.display="none"):(n.style.display="none",o.style.display="block")}s&&l&&(l=!1,localStorage.setItem("threeColumns","false")),l?t.classList.add("three-columns"):t.classList.remove("three-columns"),i(l),null===a&&localStorage.setItem("threeColumns",String(l)),e.addEventListener("click",()=>{t.classList.toggle("three-columns");const e=t.classList.contains("three-columns");localStorage.setItem("threeColumns",String(e)),i(e)})}(),window.addEventListener("popstate",()=>{if(g())i||(i=!0,localStorage.setItem("showingFavorites","true"),document.getElementById("favoritesToggle").classList.add("active"),w());else{i&&(i=!1,localStorage.setItem("showingFavorites","false"),document.getElementById("favoritesToggle").classList.remove("active"));const e=u();if(e){const t=v(e);t&&(localStorage.setItem("selectedCountry",t),f(t),N(t,"",!0))}else{const e=localStorage.getItem("selectedCountry")||"all";f(e),N(e,"",!0)}}}),function(){const e=document.getElementById("infoToggle");e&&e.addEventListener("click",()=>{b()})}(),async function(){const t=document.getElementById("sponsorsContainer");if(!t)return;const n=await e();if(!n||0===n.length)return void(t.innerHTML="");let o='<div class="sponsors-container"><div class="sponsors-list">';for(const e of n)o+=`\n                <div class="sponsor-item">\n                    <a href="${e.link}" target="_blank" rel="noopener noreferrer" class="sponsor-link">\n                        <span class="sponsor-name">${e.name}</span>\n                    </a>\n                </div>\n            `;o+="</div></div>",t.innerHTML=o}(),function(){if(g()){i=!0,localStorage.setItem("showingFavorites","true");const e=document.getElementById("favoritesToggle");e&&e.classList.add("active"),f("all"),w(),q()}else O()}()});
