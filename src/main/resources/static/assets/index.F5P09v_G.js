import"./styles.CqidXsQ2.js";import{t as e,g as t}from"./translations.nRtBG3-m.js";let n=[],o=new Set,s="",a=!1,i=null,l="all",r=localStorage.getItem("previousUrl")||"/";function c(e){return e.toLowerCase().replace(/\s+/g,"").replace(/[^a-z]/g,"")}function d(){const e=window.location.pathname.split("/"),t=e.indexOf("country");return-1!==t&&e.length>t+1?e[t+1]:null}function m(){return"/starred"===window.location.pathname}function u(e){for(const t of o)if(c(t)===e)return t;return null}function g(e){if(m()||(r=window.location.pathname,localStorage.setItem("previousUrl",r)),"all"===e)window.history.pushState({country:"all"},"","/");else{const t=c(e);window.history.pushState({country:e},"",`/country/${t}`)}}function v(t){if("all"!==t&&t){const n=e(t.replace(/\s+/g,""));document.title=`${n} - VARUN.SURF`}else document.title="VARUN.SURF - Kitesurfing Weather Forecast"}function p(){const e=localStorage.getItem("favoriteSpots");return e?JSON.parse(e):[]}async function f(){a=!0;document.getElementById("favoritesToggle").classList.add("active");const t=document.getElementById("spotsGrid"),o=p();if(0===o.length)return x(0),void(t.innerHTML=`\n                <div class="error-message">\n                    <span class="error-icon">‚≠ê</span>\n                    <div class="error-title">${e("noFavoritesTitle")}</div>\n                    <div class="error-description">\n                        ${e("noFavoritesDescription")}\n                    </div>\n                </div>\n            `);try{0===n.length&&(n=await h());const e=n.filter(e=>o.includes(e.name));x(e.length),t.innerHTML="",e.forEach(e=>{t.appendChild(M(e))}),F()}catch(s){console.error("Failed to load favorites:",s.message),I(s)}}function y(){const t=document.getElementById("favoritesToggle");t.addEventListener("click",()=>{if(a){a=!1,localStorage.setItem("showingFavorites","false"),t.classList.remove("active"),function(){const e=r||"/";if(window.history.pushState({},"",e),"/"===e)v("all");else{const e=d();if(e){const t=u(e);t&&v(t)}}}();D(localStorage.getItem("selectedCountry")||"all","")}else localStorage.setItem("showingFavorites","true"),m()||(r=window.location.pathname,localStorage.setItem("previousUrl",r)),window.history.pushState({starred:!0},"","/starred"),document.title=`${e("favoritesToggleTooltip")} - VARUN.SURF`,f();window.scrollTo({top:0,behavior:"smooth"})});"true"===localStorage.getItem("showingFavorites")&&f()}function w(){const t=localStorage.getItem("language")||"en",o=document.getElementById("languageToggle");function i(t){localStorage.setItem("language",t),function(){v(localStorage.getItem("selectedCountry")||"all");const t=document.getElementById("searchInput");t&&(t.placeholder=e("searchPlaceholder"));const i=document.getElementById("themeToggle");i&&(i.title=e("themeToggleTooltip"));const r=document.getElementById("favoritesToggle");r&&(r.title=e("favoritesToggleTooltip"));const c=document.getElementById("infoToggle");c&&(c.title=e("infoToggleTooltip"));const d=document.getElementById("infoToggleLabel");d&&(d.textContent=e("infoButtonLabel"));const m=document.getElementById("kiteSizeToggle");m&&(m.title=e("kiteSizeToggleTooltip"));const u=document.getElementById("columnToggle");u&&(u.title=e("columnToggleTooltip"));o&&(o.title=e("languageToggleTooltip"));const g=document.getElementById("langCode");g&&(g.textContent=e("langCode"));const p=document.getElementById("spotCounter");if(p){const t=document.getElementById("spotCounterNumber"),n=t?t.textContent:"0";p.innerHTML=`<span class="spot-counter-number" id="spotCounterNumber">${n}</span><span>${e("spotsCount")}</span>`}const y=document.querySelector(".footer-disclaimer");y&&(y.textContent=e("footerDisclaimer"));if(n.length>0)C(n);else{T(localStorage.getItem("selectedCountry")||"all")}const w=document.getElementById("dropdownMenu");if(w){const t=w.querySelector('[data-country="all"]');t&&(t.textContent=`üåé ${e("allCountries")}`)}const h=document.querySelector(".loading-text");h&&(h.textContent=e("loadingText"));const I=document.getElementById("appInfoModalTitle");I&&(I.textContent=e("appInfoModalTitle"));const E=document.getElementById("appInfoDescription");E&&(E.textContent=e("appInfoDescription"));const L=document.getElementById("appInfoContactTitle");L&&(L.textContent=e("appInfoContactTitle"));const $=document.getElementById("appInfoContactText");$&&($.innerHTML=e("appInfoContactText"));const b=document.getElementById("appInfoNewSpotTitle");b&&(b.textContent=e("appInfoNewSpotTitle"));const S=document.getElementById("appInfoNewSpotText");S&&(S.innerHTML=e("appInfoNewSpotText"));const k=document.getElementById("appInfoCollaborationTitle");k&&(k.textContent=e("appInfoCollaborationTitle"));const B=document.getElementById("appInfoCollaborationText");B&&(B.innerHTML=e("appInfoCollaborationText"));const M=document.querySelector("#kiteSizeModal .modal-title span");M&&(M.textContent=e("kiteSizeCalculatorTitle"));const x=document.querySelector('label[for="windSpeed"]');x&&(x.textContent=e("windSpeedLabel"));const A=document.getElementById("windSpeed");A&&(A.placeholder=e("windSpeedPlaceholder"));const N=document.querySelector('label[for="riderWeight"]');N&&(N.textContent=e("riderWeightLabel"));const H=document.getElementById("riderWeight");H&&(H.placeholder=e("riderWeightPlaceholder"));const F=document.querySelector('label[for="skillLevel"]');F&&(F.textContent=e("skillLevelLabel"));const W=document.getElementById("skillLevel");if(W){const t=W.querySelectorAll("option");t[0].textContent=e("skillLevelPlaceholder"),t[1].textContent=e("skillBeginnerFlat"),t[2].textContent=e("skillBeginnerSmall"),t[3].textContent=e("skillIntermediateFlat"),t[4].textContent=e("skillIntermediateMedium"),t[5].textContent=e("skillAdvancedFlat"),t[6].textContent=e("skillAdvancedMedium"),t[7].textContent=e("skillAdvancedLarge")}const q=document.getElementById("calculateBtn");q&&(q.textContent=e("calculateButton"));const U=document.querySelector("#calcResult .calc-result-title");U&&(U.textContent=e("recommendedEquipment"));const O=document.querySelector("#calcResult .calc-result-item:nth-child(2) .calc-result-label");O&&(O.textContent=e("kiteSizeLabel"));const R=document.querySelector("#calcResult .calc-result-item:nth-child(3) .calc-result-label");R&&(R.textContent=e("boardSizeLabel"));const P=document.querySelector("#calcResult .modal-disclaimer");P&&(P.textContent=e("calcDisclaimer"));const G=document.querySelector("#aiModal .modal-disclaimer");G&&(G.textContent=e("aiDisclaimer"));n.length>0&&(a?f():D(l,s,!0))}()}i(t),o.addEventListener("click",()=>{i("en"===(localStorage.getItem("language")||"en")?"pl":"en")})}async function h(){try{const e=await fetch("/api/v1/spots",{cache:"no-store"});if(!e.ok)throw new Error(`HTTP Error: ${e.status}`);const t=await e.json();if(!Array.isArray(t))throw new Error("Invalid data format: Expected array of spots");return t}catch(e){throw console.error("Error fetching weather data:",e),e}}function I(t){const n=document.getElementById("spotsGrid");let o=e("errorLoadDataTitle"),s=e("errorLoadDataDescription");t.message.includes("HTTP Error: 404")?(o=e("errorDataNotFoundTitle"),s=e("errorDataNotFoundDescription")):t.message.includes("HTTP Error: 500")?(o=e("errorServerTitle"),s=e("errorServerDescription")):t.message.includes("Failed to fetch")||t.message.includes("NetworkError")?(o=e("errorConnectionTitle"),s=e("errorConnectionDescription")):(t.message.includes("JSON")||t.message.includes("Invalid data format"))&&(o=e("errorDataFormatTitle"),s=e("errorDataFormatDescription")),n.innerHTML=`\n                <div class="error-message">\n                    <span class="error-icon">‚ö†Ô∏è</span>\n                    <div class="error-title">${o}</div>\n                    <div class="error-description">\n                        ${s}<br/>\n                        ${e("errorRefresh")}\n                    </div>\n                </div>\n            `}function E(e){return{N:"‚Üì",NE:"‚Üô",E:"‚Üê",SE:"‚Üñ",S:"‚Üë",SW:"‚Üó",W:"‚Üí",NW:"‚Üò"}[e]||"‚Ä¢"}function L(e){return e<12?"wind-weak":e>=12&&e<18?"wind-moderate":e>=18&&e<=25?"wind-strong":"wind-extreme"}function C(n){const s=document.getElementById("dropdownMenu");document.getElementById("selectedCountry"),o.clear(),n.forEach(e=>{e.country&&o.add(e.country)});const i=Array.from(o).sort((t,n)=>{const o=e(t.replace(/\s+/g,"")),s=e(n.replace(/\s+/g,""));return o.localeCompare(s)}),l=localStorage.getItem("selectedCountry")||"all",r=e("allCountries");let c=`<div class="dropdown-option ${"all"===l?"selected":""}" data-country="all">üåé ${r}</div>`;i.forEach(n=>{const o=t(n),s=l===n?"selected":"",a=e(n.replace(/\s+/g,""));c+=`<div class="dropdown-option ${s}" data-country="${n}">${o} ${a.toUpperCase()}</div>`}),s.innerHTML=c,T(l),function(){const e=document.querySelectorAll(".dropdown-option"),t=document.getElementById("searchInput");e.forEach(n=>{n.addEventListener("click",o=>{o.stopPropagation(),e.forEach(e=>e.classList.remove("selected")),n.classList.add("selected");const s=n.dataset.country;T(s),localStorage.setItem("selectedCountry",s),g(s),v(s),a&&(a=!1,localStorage.setItem("showingFavorites","false"),document.getElementById("favoritesToggle").classList.remove("active")),D(s,t.value,!0),closeDropdown(),window.scrollTo({top:0,behavior:"smooth"})})})}()}function T(n){const o=document.getElementById("selectedCountry");if(!o)return;if(!n||"all"===n)return void(o.textContent=`üåé ${e("allCountries")}`);const s=t(n),a=e(n.replace(/\s+/g,""));o.textContent=`${s} ${a.toUpperCase()}`}function $(){const e=document.getElementById("appInfoModal");e&&(e.classList.add("active"),document.body.style.overflow="hidden")}function b(){const e=document.getElementById("appInfoModal");e&&(e.classList.remove("active"),document.body.style.overflow="auto")}function S(){document.getElementById("aiModal").classList.remove("active"),document.body.style.overflow="auto"}function k(){document.getElementById("infoModal").classList.remove("active"),document.body.style.overflow="auto"}function B(){document.getElementById("icmModal").classList.remove("active"),document.body.style.overflow="auto";document.getElementById("icmImage").src=""}function M(t){const n=document.createElement("div");n.className="spot-card",n.dataset.country=e(t.country.replace(/\s+/g,""));const o=t.forecast&&t.forecast.some(e=>void 0!==e.wave)||t.currentConditions&&void 0!==t.currentConditions.wave;let s="";t.forecast&&Array.isArray(t.forecast)&&t.forecast.forEach(t=>{const n=L(t.wind),a=L(t.gusts),i=L((t.wind+t.gusts)/2),l="wind-weak"===i?"weak-wind":"wind-moderate"===i?"moderate-wind":"wind-strong"===i?"strong-wind":"extreme-wind",r=t.temp>=18?"temp-positive":"temp-negative",c=E(t.direction),d=0===t.precipitation?"precipitation-none":"precipitation";let m="",u="-";var g;void 0!==t.wave&&(m=t.wave<1?"wave-small":t.wave>=1&&t.wave<2?"wave-moderate":"wave-large",u=`${t.wave}`),s+=`\n                        <tr class="${l}">\n                            <td><strong>${g=t.date,{Mon:e("dayMon"),Tue:e("dayTue"),Wed:e("dayWed"),Thu:e("dayThu"),Fri:e("dayFri"),Sat:e("daySat"),Sun:e("daySun"),Today:e("dayToday"),Tomorrow:e("dayTomorrow"),"Day 3":e("dayDay3"),"Day 4":e("dayDay4"),"Day 5":e("dayDay5")}[g]||g}</strong></td>\n                            <td class="${n}">${t.wind} kts</td>\n                            <td class="${a}">${t.gusts} kts</td>\n                            <td class="${n}">\n                                <span class="wind-arrow">${c}</span> ${t.direction}\n                            </td>\n                            <td class="${r}">${t.temp}¬∞C</td>\n                            <td class="${d}">${t.precipitation}%</td>\n                            ${o?`<td class="${m}">${u}</td>`:""}\n                        </tr>\n                    `});let a="";if(t.currentConditions){const n=L(t.currentConditions.wind),s=L(t.currentConditions.gusts),i=L((t.currentConditions.wind+t.currentConditions.gusts)/2),l="wind-weak"===i?"weak-wind":"wind-moderate"===i?"moderate-wind":"wind-strong"===i?"strong-wind":"extreme-wind",r=t.currentConditions.temp>=20?"temp-positive":"temp-negative",c=E(t.currentConditions.direction);let d="",m="-";void 0!==t.currentConditions.wave&&(d=t.currentConditions.wave<1?"wave-small":t.currentConditions.wave>=1&&t.currentConditions.wave<2?"wave-moderate":"wave-large",m=`${t.currentConditions.wave}`),a=`\n                    <tr class="${l}" style="border-bottom: 2px solid #404040;">\n                        <td>\n                            <div class="live-indicator">\n                                <strong class="live-text">${e("nowLabel")}</strong>\n                                <div class="live-dot"></div>\n                            </div>\n                        </td>\n                        <td class="${n}">${t.currentConditions.wind} kts</td>\n                        <td class="${s}">${t.currentConditions.gusts} kts</td>\n                        <td class="${n}">\n                            <span class="wind-arrow">${c}</span> ${t.currentConditions.direction}\n                        </td>\n                        <td class="${r}">${t.currentConditions.temp}¬∞C</td>\n                        <td>-</td>\n                        ${o?`<td class="${d}">${m}</td>`:""}\n                    </tr>\n                `}const i=(l=t.name,p().includes(l));var l;const r=i?"favorited":"";return n.innerHTML=`\n                <div class="drag-handle" draggable="true">ìÉå</div>\n                <div class="spot-header">\n                    <div class="spot-title">\n                        <div class="spot-name" onclick="window.location.href='/spot/${t.wgId}'">${t.name||"Unknown Spot"}</div>\n                    </div>\n                    <div class="spot-meta">\n                        <div class="country-tag-wrapper">\n                            <div class="favorite-icon ${r}" onclick="toggleFavorite('${t.name}')" title="${i?"Remove from favorites":"Add to favorites"}">\n                                <svg class="favorite-icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n                                    <path d="M1.327,12.4,4.887,15,3.535,19.187A3.178,3.178,0,0,0,4.719,22.8a3.177,3.177,0,0,0,3.8-.019L12,20.219l3.482,2.559a3.227,3.227,0,0,0,4.983-3.591L19.113,15l3.56-2.6a3.227,3.227,0,0,0-1.9-5.832H16.4L15.073,2.432a3.227,3.227,0,0,0-6.146,0L7.6,6.568H3.231a3.227,3.227,0,0,0-1.9,5.832Z"/>\n                                </svg>\n                            </div>\n                            <div class="country-tag">${e(t.country.replace(/\s+/g,""))||"Unknown"}</div>\n                        </div>\n                        <div class="last-updated">${t.lastUpdated||"No data"}</div>\n                    </div>\n                </div>\n                <div class="external-links">\n                    ${t.spotInfo?`<span class="external-link info-link" onclick="openInfoModal('${t.name}')"></span>`:""}\n                    ${t.windguruUrl?`<a href="${t.windguruUrl}" target="_blank" class="external-link">WG</a>`:""}\n                    ${t.windfinderUrl?`<a href="${t.windfinderUrl}" target="_blank" class="external-link">WF</a>`:""}\n                    ${t.icmUrl?`<span class="external-link" onclick="openIcmModal('${t.name}', '${t.icmUrl}')">ICM</span>`:""}\n                    ${t.webcamUrl?`<a href="${t.webcamUrl}" target="_blank" class="external-link webcam-link">CAM</a>`:""}\n                    ${t.locationUrl?`<a href="${t.locationUrl}" target="_blank" class="external-link location-link">MAP</a>`:""}\n                    ${t.aiAnalysisEn||t.aiAnalysisPl?`<span class="external-link ai-link" onclick="openAIModal('${t.name}')">AI</span>`:""}\n                </div>\n                <table class="weather-table">\n                    <thead>\n                        <tr>\n                            <th>${e("dateHeader")}</th>\n                            <th>${e("windHeader")}</th>\n                            <th>${e("gustsHeader")}</th>\n                            <th>${e("directionHeader")}</th>\n                            <th>${e("tempHeader")}</th>\n                            <th>${e("rainHeader")}</th>\n                            ${o?`<th>${e("waveHeader")}</th>`:""}\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ${a}\n                        ${s}\n                    </tbody>\n                </table>\n            `,n}function x(e){const t=document.getElementById("spotCounterNumber");t&&(t.textContent=e)}function A(e,t,n){let o="all"===t?e:e.filter(e=>e.country===t);if(n&&""!==n.trim()){const e=n.toLowerCase().trim();o=o.filter(t=>t.name.toLowerCase().includes(e)||t.country&&t.country.toLowerCase().includes(e))}return o}async function D(t="all",o="",a=!1,i=!1){l=t,s=o;const r=document.getElementById("spotsGrid");if(n.length>0&&!i){return void N(A(n,t,o),r,t,o)}document.getElementById("spotsGrid").innerHTML=`\n                <div class="loading-message">\n                    <div class="loading-spinner"></div>\n                    <span class="loading-text">${e("loadingText")}</span>\n                </div>\n            `;const c=Date.now(),d=a?0:2e3;try{const e=await h(),s=d-(Date.now()-c);s>0&&await new Promise(e=>setTimeout(e,s)),n=e,C(e);N(A(e,t,o),r,t,o)}catch(m){console.error("Failed to load weather:",m.message),I(m)}}function N(t,n,o,s){if(n.innerHTML="",0===t.length){x(0);const t=s?`${e("errorNoSpotsSearchDescription")} "${s}"`:`${e("errorNoSpotsDescription")}`;n.innerHTML=`\n                    <div class="error-message">\n                        <span class="error-icon">üîç</span>\n                        <div class="error-title">${e("errorNoSpotsTitle")}</div>\n                        <div class="error-description">\n                            ${t}<br/>\n                            ${e("errorTryAdjusting")}\n                        </div>\n                    </div>\n                `}else{t.every(e=>!e.forecast||0===e.forecast.length)?(n.innerHTML=`\n                    <div class="loading-message">\n                        <div class="loading-spinner"></div>\n                        <span class="loading-text">${e("loadingText")}</span>\n                    </div>\n                `,setTimeout(()=>{D(o,s,!1,!0)},5e3)):(x(t.length),t.forEach(e=>{n.appendChild(M(e))}),F())}}function H(){const e=document.getElementById("spotsGrid");let t=null,n=null;e.addEventListener("dragstart",e=>{e.target.closest(".drag-handle")?(t=e.target.closest(".spot-card"),t&&(t.classList.add("dragging"),e.dataTransfer.effectAllowed="move",n=t.cloneNode(!0),n.classList.add("drag-ghost"),n.classList.remove("dragging"),n.style.width=t.offsetWidth+"px",n.style.position="fixed",n.style.left="-9999px",n.style.top="-9999px",document.body.appendChild(n),e.dataTransfer.setDragImage(n,e.offsetX,e.offsetY))):e.preventDefault()}),e.addEventListener("dragend",()=>{t&&(t.classList.remove("dragging"),t=null,function(){const e=document.getElementById("spotsGrid"),t=e.querySelectorAll(".spot-card"),n=Array.from(t).map(e=>e.querySelector(".spot-name").textContent),o=e.classList.contains("three-columns"),a=`spotOrder_${o?"3col":"2col"}_${l}_${s}`;localStorage.setItem(a,JSON.stringify(n))}()),n&&(n.remove(),n=null)}),e.addEventListener("dragover",n=>{n.preventDefault();const o=function(e,t,n){const o=[...e.querySelectorAll(".spot-card:not(.dragging)")];let s=null,a=Number.NEGATIVE_INFINITY;return o.forEach(e=>{const o=e.getBoundingClientRect(),i=o.top+o.height/2,l=n-i,r=t-(o.left+o.width/2);if(l<0){l>a&&(a=l,s=e)}else if(r<0&&l<o.height/2){const t=r/2+l;t>a&&(a=t,s=e)}}),s}(e,n.clientX,n.clientY);t&&null==o?e.appendChild(t):t&&o&&e.insertBefore(t,o)})}function F(){const e=document.getElementById("spotsGrid"),t=`spotOrder_${e.classList.contains("three-columns")?"3col":"2col"}_${l}_${s}`,n=localStorage.getItem(t);if(n)try{const t=JSON.parse(n),o=Array.from(e.querySelectorAll(".spot-card"));t.forEach(t=>{const n=o.find(e=>e.querySelector(".spot-name").textContent===t);n&&e.appendChild(n)})}catch(o){console.error("Failed to load card order:",o)}}function W(){i&&clearInterval(i),i=setInterval(()=>{!async function(){try{const e=await h();if(n=e,C(e),a){const e=document.getElementById("spotsGrid"),t=p();n.filter(e=>t.includes(e.name)).forEach(t=>{const n=Array.from(e.querySelectorAll(".spot-card")).find(e=>{const n=e.querySelector(".spot-name");return n&&n.textContent===t.name});if(n){const e=M(t);n.replaceWith(e)}})}else{const e=A(n,l,s),t=document.getElementById("spotsGrid");e.forEach(e=>{const n=Array.from(t.querySelectorAll(".spot-card")).find(t=>{const n=t.querySelector(".spot-name");return n&&n.textContent===e.name});if(n){const t=M(e);n.replaceWith(t)}}),x(e.length)}console.log("Data refreshed in background at",(new Date).toLocaleTimeString())}catch(e){console.error("Background refresh failed:",e)}}()},6e4),console.log("Auto-refresh started: updating every",60,"seconds")}function q(){const e=document.getElementById("kiteSizeToggle"),t=document.getElementById("kiteSizeModal"),n=document.getElementById("kiteSizeModalClose"),o=document.getElementById("calculateBtn");function s(){t.classList.remove("active"),document.body.style.overflow="auto"}e.addEventListener("click",()=>{t.classList.add("active"),document.body.style.overflow="hidden",document.getElementById("calcResult").classList.remove("show")}),n.addEventListener("click",s),t.addEventListener("click",e=>{e.target===t&&s()}),o.addEventListener("click",()=>{const e=parseFloat(document.getElementById("windSpeed").value),t=parseFloat(document.getElementById("riderWeight").value),n=document.getElementById("skillLevel").value,o=document.getElementById("calcWarning"),s=document.getElementById("calcResult");if(o.style.display="none",s.classList.remove("show"),!e||e<5||e>50)return o.innerHTML="‚ö†Ô∏è <strong>INVALID WIND SPEED</strong><br><br>Please enter a valid wind speed between 5 and 50 knots.",void(o.style.display="block");if(!t||t>150)return o.innerHTML="‚ö†Ô∏è <strong>INVALID RIDER WEIGHT</strong><br><br>Please enter a valid rider weight between 40 and 150 kg.",void(o.style.display="block");if(t<40)return o.innerHTML="‚ö†Ô∏è <strong>WEIGHT TOO LOW</strong><br><br>Your weight is too low and riding may be dangerous. Kitesurfing requires sufficient body weight for control and safety.",void(o.style.display="block");if(!n)return o.innerHTML="‚ö†Ô∏è <strong>SKILL LEVEL REQUIRED</strong><br><br>Please select your skill level and conditions.",void(o.style.display="block");if(t>120)return o.innerHTML="üòâ Maybe you should lose some weight before going onto the water!",void(o.style.display="block");if(e>40)return o.innerHTML="‚ö†Ô∏è <strong>EXTREME CONDITIONS!</strong><br><br>Wind speeds above 40 knots are extremely dangerous. We strongly recommend NOT going onto the water in these conditions. Stay safe!",void(o.style.display="block");if(e<12)return o.innerHTML="üí® <strong>LOW WIND CONDITIONS</strong><br><br>There is not enough wind for riding with a regular setup. However, you could try going on a <strong>kite foil board</strong>, which works great in light wind conditions!",void(o.style.display="block");if(e<15&&(n.includes("medium")||n.includes("large")))return o.innerHTML="üåä <strong>INSUFFICIENT WIND FOR WAVE CONDITIONS</strong><br><br>Wind speed below 15 knots is not enough for riding in medium or large waves. Waves create additional resistance and you need more wind power to maintain speed and control. We recommend NOT going onto the water in these conditions.",void(o.style.display="block");const a=function(e,t,n){let o=2.5;const s={"beginner-flat":3,"beginner-small":2.8,"intermediate-flat":2.5,"intermediate-medium":2.3,"advanced-flat":2.2,"advanced-medium":2,"advanced-large":1.8};n&&s[n]&&(o=s[n]);let a=t*o/e;return a=[7,9,10,12,14,15,17].reduce((e,t)=>Math.abs(t-a)<Math.abs(e-a)?t:e),a}(e,t,n),i=function(e,t){let n="Twin Tip";if((t.includes("large")||t.includes("medium")&&t.includes("advanced"))&&(n="Surfboard/Directional üèÑ"),"Twin Tip"===n){let o=125;o+=.5*(Math.min(e,115)-50);const s={"beginner-flat":1.15,"beginner-small":1.1,"intermediate-flat":1,"intermediate-medium":.98,"advanced-flat":.92,"advanced-medium":.9}[t]||1;let a=Math.round(o*s);a=2*Math.round(a/2);const i=136;let l=160;(t.includes("intermediate")||t.includes("advanced"))&&(l=142),a=Math.max(i,Math.min(a,l));let r=38+Math.floor((a-136)/4);return r=Math.min(r,46),`${a} x ${r} cm (${n})`}return`${e<70?"5'6\"":e<85?"5'10\"":"6'0\""} (${n})`}(t,n);document.getElementById("kiteSize").textContent=`${a} m¬≤`,document.getElementById("boardSize").textContent=i,s.classList.add("show")}),document.addEventListener("keydown",e=>{"Escape"===e.key&&t.classList.contains("active")&&s()})}async function U(){const e=document.getElementById("sponsorsContainer");if(!e)return;const t=await async function(){try{const e=await fetch("/api/v1/sponsors/main");return e.ok&&await e.json()||[]}catch(e){return console.error("Error fetching main sponsors:",e),[]}}();if(!t||0===t.length)return void(e.innerHTML="");let n='<div class="sponsors-container"><div class="sponsors-list">';for(const o of t)n+=`\n                <div class="sponsor-item">\n                    <a href="${o.link}" target="_blank" rel="noopener noreferrer" class="sponsor-link">\n                        <span class="sponsor-name">${o.name}</span>\n                    </a>\n                </div>\n            `;n+="</div></div>",e.innerHTML=n}function O(){const t=d();if(t)h().then(o=>{n=o,C(o);const s=u(t);s?(localStorage.setItem("selectedCountry",s),v(s),D(s,"",!0)):function(t){const n=document.getElementById("spotsGrid");x(0),n.innerHTML=`\n            <div class="error-message">\n                <span class="error-icon">‚ö†Ô∏è</span>\n                <div class="error-title">${e("invalidCountry")}</div>\n                <div class="error-description">\n                    ${e("invalidCountryDescription")}<br/>\n                    <br/>\n                    <strong>Invalid country: "${t}"</strong>\n                </div>\n            </div>\n        `}(t),W()}).catch(e=>{console.error("Failed to load weather:",e.message),I(e)});else{const e=localStorage.getItem("selectedCountry")||"all";g(e),v(e),D(e),W()}}window.openAppInfoModal=$,window.closeAppInfoModal=b,window.openAIModal=function(t){const o=n.find(e=>e.name===t),s="pl"===(localStorage.getItem("language")||"en")?o.aiAnalysisPl:o.aiAnalysisEn;if(!o||!s)return;const a=document.getElementById("aiModal"),i=document.getElementById("modalSpotName"),l=document.getElementById("aiAnalysisContent"),r=document.getElementById("aiModalDisclaimer");i.textContent=`${e("aiAnalysisTitle")} - ${t}`,l.innerHTML=s.trim(),r.textContent=e("aiDisclaimer"),a.classList.add("active"),document.body.style.overflow="hidden"},window.closeAIModal=S,window.openInfoModal=function(t){const o=n.find(e=>e.name===t);if(!o||!o.spotInfo)return;const s=document.getElementById("infoModal"),a=document.getElementById("infoModalSpotName"),i=document.getElementById("spotInfoContent");a.textContent=`${t}`;const l=function(e){return e?"pl"===(localStorage.getItem("language")||"en")?e.spotInfoPL:e.spotInfo:null}(o);i.innerHTML=`\n                <div class="info-grid">\n                    <div class="info-item" style="grid-column: 1 / -1;">\n                        <div class="info-label">${e("overviewLabel")}</div>\n                        <div class="info-value">${l.description}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${e("spotTypeLabel")}</div>\n                        <div class="info-value">${l.type}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${e("bestWindLabel")}</div>\n                        <div class="info-value">${l.bestWind}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${e("waterTempLabel")}</div>\n                        <div class="info-value">${l.waterTemp}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${e("experienceLabel")}</div>\n                        <div class="info-value">${l.experience}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${e("launchTypeLabel")}</div>\n                        <div class="info-value">${l.launch}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${e("hazardsLabel")}</div>\n                        <div class="info-value">${l.hazards}</div>\n                    </div>\n                    <div class="info-item" style="grid-column: 1 / -1;">\n                        <div class="info-label">${e("seasonLabel")}</div>\n                        <div class="info-value">${l.season}</div>\n                    </div>\n                </div>\n            `,s.classList.add("active"),document.body.style.overflow="hidden"},window.closeInfoModal=k,window.openIcmModal=function(t,n){const o=document.getElementById("icmModal"),s=document.getElementById("icmModalSpotName"),a=document.getElementById("icmImage");s.textContent=`${t} - ${e("icmForecastTitle")}`,a.src=n,a.alt=`${e("icmForecastTitle")} for ${t}`,o.classList.add("active"),document.body.style.overflow="hidden"},window.closeIcmModal=B,window.toggleFavorite=function(e){let t=p();const n=t.indexOf(e);n>-1?t.splice(n,1):t.push(e),function(e){localStorage.setItem("favoriteSpots",JSON.stringify(e))}(t),document.querySelectorAll(".favorite-icon").forEach(t=>{const o=t.closest(".spot-card");if(o){const s=o.querySelector(".spot-name");s&&s.textContent===e&&(n>-1?(t.classList.remove("favorited"),t.title="Add to favorites"):(t.classList.add("favorited"),t.title="Remove from favorites"),t.classList.add("animate"),setTimeout(()=>t.classList.remove("animate"),400))}}),a&&f()},document.addEventListener("DOMContentLoaded",()=>{!function(){const e=localStorage.getItem("theme")||"dark",t=document.getElementById("themeToggle"),n=document.getElementById("themeIcon");function o(e){document.documentElement.setAttribute("data-theme",e),n.innerHTML="light"===e?'<path d="M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5,5-2.24,5-5-2.24-5-5-5Zm0,7c-1.1,0-2-.9-2-2s.9-2,2-2,2,.9,2,2-.9,2-2,2Zm4.95-6.95c-.59-.59-.59-1.54,0-2.12l1.41-1.41c.59-.59,1.54-.59,2.12,0,.59,.59,.59,1.54,0,2.12l-1.41,1.41c-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44ZM7.05,16.95c.59,.59,.59,1.54,0,2.12l-1.41,1.41c-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44c-.59-.59-.59-1.54,0-2.12l1.41-1.41c.59-.59,1.54-.59,2.12,0ZM3.51,5.64c-.59-.59-.59-1.54,0-2.12,.59-.59,1.54-.59,2.12,0l1.41,1.41c.59,.59,.59,1.54,0,2.12-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44l-1.41-1.41Zm16.97,12.73c.59,.59,.59,1.54,0,2.12-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44l-1.41-1.41c-.59-.59-.59-1.54,0-2.12,.59-.59,1.54-.59,2.12,0l1.41,1.41Zm3.51-6.36c0,.83-.67,1.5-1.5,1.5h-2c-.83,0-1.5-.67-1.5-1.5s.67-1.5,1.5-1.5h2c.83,0,1.5,.67,1.5,1.5ZM3.5,13.5H1.5c-.83,0-1.5-.67-1.5-1.5s.67-1.5,1.5-1.5H3.5c.83,0,1.5,.67,1.5,1.5s-.67,1.5-1.5,1.5ZM10.5,3.5V1.5c0-.83,.67-1.5,1.5-1.5s1.5,.67,1.5,1.5V3.5c0,.83-.67,1.5-1.5,1.5s-1.5-.67-1.5-1.5Zm3,17v2c0,.83-.67,1.5-1.5,1.5s-1.5-.67-1.5-1.5v-2c0-.83,.67-1.5,1.5-1.5s1.5,.67,1.5,1.5Z"/>':'<path d="M15,24a12.021,12.021,0,0,1-8.914-3.966,11.9,11.9,0,0,1-3.02-9.309A12.122,12.122,0,0,1,13.085.152a13.061,13.061,0,0,1,5.031.205,2.5,2.5,0,0,1,1.108,4.226c-4.56,4.166-4.164,10.644.807,14.41a2.5,2.5,0,0,1-.7,4.32A13.894,13.894,0,0,1,15,24Z"/>',localStorage.setItem("theme",e)}o(e),t.addEventListener("click",()=>{o("dark"===document.documentElement.getAttribute("data-theme")?"light":"dark")});const s=document.getElementById("headerLogo");s&&s.addEventListener("click",()=>{const e=localStorage.getItem("selectedCountry")||"all";if("all"===e)window.location.href="/";else{const t=c(e);window.location.href=`/country/${t}`}})}(),w(),function(){const e=document.getElementById("dropdownButton"),t=document.getElementById("dropdownMenu");function n(){e.classList.remove("open","active"),t.classList.remove("open")}e.addEventListener("click",o=>{o.stopPropagation(),t.classList.contains("open")?n():(e.classList.add("open","active"),t.classList.add("open"))}),document.addEventListener("click",o=>{e.contains(o.target)||t.contains(o.target)||n()}),document.addEventListener("keydown",o=>{"Escape"===o.key&&t.classList.contains("open")&&(n(),e.focus())}),window.closeDropdown=n}(),function(){const e=document.getElementById("aiModal"),t=document.getElementById("modalClose"),n=document.getElementById("appInfoModal"),o=document.getElementById("appInfoModalClose"),s=document.getElementById("infoModal"),a=document.getElementById("infoModalClose"),i=document.getElementById("icmModal"),l=document.getElementById("icmModalClose");t.addEventListener("click",S),e.addEventListener("click",t=>{t.target===e&&S()}),o&&o.addEventListener("click",b),n&&n.addEventListener("click",e=>{e.target===n&&b()}),a.addEventListener("click",k),s.addEventListener("click",e=>{e.target===s&&k()}),l.addEventListener("click",B),i.addEventListener("click",e=>{e.target===i&&B()}),document.addEventListener("keydown",t=>{"Escape"===t.key&&(e.classList.contains("active")&&S(),n&&n.classList.contains("active")&&b(),s.classList.contains("active")&&k(),i.classList.contains("active")&&B())})}(),function(){const e=document.getElementById("searchInput"),t=document.getElementById("searchClear");let n;e.addEventListener("input",e=>{const o=e.target.value;""!==o.trim()?t.classList.add("visible"):t.classList.remove("visible"),a&&""!==o.trim()&&(a=!1,document.getElementById("favoritesToggle").classList.remove("active")),n&&clearTimeout(n),n=setTimeout(()=>{D(l,o,!0),window.scrollTo(0,0)},300)}),t.addEventListener("click",()=>{e.value="",t.classList.remove("visible"),D(l,""),window.scrollTo(0,0),e.focus()}),e.addEventListener("keydown",n=>{"Escape"===n.key&&""!==e.value&&(e.value="",t.classList.remove("visible"),D(l,""))})}(),H(),y(),function(){const e=document.getElementById("hamburgerMenu"),t=document.getElementById("headerControls"),n=document.querySelector(".main-content");e&&e.addEventListener("click",()=>{t.classList.contains("show")?(t.classList.remove("show"),e.classList.remove("active"),e.textContent="‚ò∞",n&&n.classList.remove("menu-open")):(t.classList.add("show"),e.classList.add("active"),e.textContent="‚úï",n&&n.classList.add("menu-open"))})}(),q(),function(){const e=document.getElementById("columnToggle"),t=document.getElementById("spotsGrid"),n=document.getElementById("icon3Columns"),o=document.getElementById("icon2Columns"),s=window.innerWidth<=768||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),a=localStorage.getItem("threeColumns");let i=null===a||"true"===a;function l(e){e?(n.style.display="block",o.style.display="none"):(n.style.display="none",o.style.display="block")}s&&i&&(i=!1,localStorage.setItem("threeColumns","false")),i?t.classList.add("three-columns"):t.classList.remove("three-columns"),l(i),null===a&&localStorage.setItem("threeColumns",String(i)),e.addEventListener("click",()=>{t.classList.toggle("three-columns");const e=t.classList.contains("three-columns");localStorage.setItem("threeColumns",String(e)),l(e)})}(),window.addEventListener("popstate",()=>{if(m())a||(a=!0,localStorage.setItem("showingFavorites","true"),document.getElementById("favoritesToggle").classList.add("active"),f());else{a&&(a=!1,localStorage.setItem("showingFavorites","false"),document.getElementById("favoritesToggle").classList.remove("active"));const e=d();if(e){const t=u(e);t&&(localStorage.setItem("selectedCountry",t),v(t),D(t,"",!0))}else{const e=localStorage.getItem("selectedCountry")||"all";v(e),D(e,"",!0)}}}),function(){const e=document.getElementById("infoToggle");e&&e.addEventListener("click",()=>{$()})}(),U(),function(){if(m()){a=!0,localStorage.setItem("showingFavorites","true");const e=document.getElementById("favoritesToggle");e&&e.classList.add("active"),v("all"),f(),W()}else O()}()}),window.onbeforeunload=function(){window.scrollTo(0,0)};
