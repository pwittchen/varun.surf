import"./styles.Dx44RYmW.js";import{t as e,a as t,g as n}from"./translations.BAPjtOWS.js";let i=null,o="en",s=null,d="",a="loadingSpotData",l=null,c=null,r=null,u=null,m="conditions",v="dark",p="en";function f(){const e=sessionStorage.getItem("forecastModel");return!e||"gfs"!==e&&"ifs"!==e?"gfs":e}async function g(e){try{const t=f(),n=`/api/v1/spots/${e}${t?"/"+t:""}`,i=await fetch(n);if(!i.ok){const e=new Error(`HTTP error! status: ${i.status}`);throw e.status=i.status,e}return await i.json()}catch(t){throw console.error("Error fetching spot data:",t),t}}function w(e){return e&&Array.isArray(e.forecast)&&e.forecast.length>0}function y(){l&&(clearInterval(l),l=null),c&&(clearTimeout(c),c=null)}function b(){r&&(clearInterval(r),r=null)}function h(t){const n=document.getElementById("loadingMessage"),i=document.getElementById("loadingText"),o=document.getElementById("errorMessage");a=t,o&&(o.style.display="none"),n&&(n.style.display="block"),i&&(i.textContent=e(t))}function $(e){y();let t=!1;l=setInterval(async()=>{if(!t){t=!0;try{const t=await g(e);w(t)&&(y(),R(t))}catch(n){n&&404===n.status&&(y(),K("spotNotFound"))}finally{t=!1}}},5e3),c=setTimeout(()=>{y(),K("forecastTimeout")},3e4)}function I(e){return{N:"‚Üì",NE:"‚Üô",E:"‚Üê",SE:"‚Üñ",S:"‚Üë",SW:"‚Üó",W:"‚Üí",NW:"‚Üò"}[e]||"‚Ä¢"}function E(t){if(!t||"string"!=typeof t)return"";const n={Mon:"dayMon",Tue:"dayTue",Wed:"dayWed",Thu:"dayThu",Fri:"dayFri",Sat:"daySat",Sun:"daySun"}[t.substring(0,3)];return n?e(n):t}function L(e){if(!e||"string"!=typeof e)return e||"";const t=e.split(" ").filter(Boolean);if(t.length<5)return e;const[n,i,o,,s]=t,d=E(n),a=i.padStart(2,"0");if(window.innerWidth<=768){const e=s.split(":")[0];return`${d.substring(0,2)} ${e}`.trim()}return`${a}. ${d} ${s}`.trim()}function C(t){if(!t)return"";const n=t.split(" ").filter(Boolean);if(n.length<4)return"";const i=n[0],o=n[1],s=n[2];return`${E(i).substring(0,3)} ${o}/${function(t){if(!t||"string"!=typeof t)return"";const n={Jan:"monthJan",Feb:"monthFeb",Mar:"monthMar",Apr:"monthApr",May:"monthMay",Jun:"monthJun",Jul:"monthJul",Aug:"monthAug",Sep:"monthSep",Oct:"monthOct",Nov:"monthNov",Dec:"monthDec"}[t];return n?e(n):t}(s)}`}function x(e){if(!e)return new Date;try{const t=e.trim().split(/\s+/);if(t.length>=5){const e=parseInt(t[1]),n=t[2],i=parseInt(t[3]),o=t[4].split(":"),s=parseInt(o[0]),d=parseInt(o[1]),a={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11}[n];if(void 0!==a){const t=new Date(i,a,e,s,d);if(!isNaN(t.getTime()))return t}}}catch(t){console.warn("Error parsing forecast date:",e,t)}return new Date}function M(e){if(!e)return null;return"pl"===(localStorage.getItem("language")||"en")?e.spotInfoPL:e.spotInfo}function B(e){if(!e)return"";const t=e=>"string"==typeof e&&e.trim().length>0?e:"",n=t(e.aiAnalysisEn),i=t(e.aiAnalysisPl),s=t(e.aiAnalysis);return"pl"===(o||localStorage.getItem("language")||"en")?i||n||s:n||i||s}function T(){document.getElementById("infoModal").classList.remove("active"),document.body.style.overflow="auto"}function k(){document.getElementById("aiModal").classList.remove("active"),document.body.style.overflow="auto"}function S(){document.getElementById("icmModal").classList.remove("active"),document.body.style.overflow="auto"}const D=[];let H=!1;function A(){document.getElementById("embedModal").classList.remove("active"),document.body.style.overflow="auto",O()}function W(e,t){return`${function(){try{return window.location.origin.replace(/\/$/,"")}catch(e){return"https://varun.surf"}}()}/embed?spotId=${u}&theme=${e}&view=${t}&lang=${p}`}function N(){if(!u)return;const e=`<iframe src="${W(v,m)}" width="100%" height="500" frameborder="0" style="border-radius: 12px; max-width: 600px;"></iframe>`,t=document.getElementById("embedCode"),n=document.getElementById("embedPreview");t&&(t.value=e),n&&(n.src=W(v,m))}function U(){const t=document.getElementById("embedCode"),n=document.getElementById("copyEmbedCode"),i=document.getElementById("copyButtonText");t&&n&&(t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value).then(()=>{n.classList.add("copied"),i&&(i.textContent=e("embedCopyButtonSuccess")),setTimeout(()=>{n.classList.remove("copied"),i&&(i.textContent=e("embedCopyButtonDefault"))},2e3)}).catch(t=>{console.error("Failed to copy:",t);try{document.execCommand("copy"),n.classList.add("copied"),i&&(i.textContent=e("embedCopyButtonSuccess")),setTimeout(()=>{n.classList.remove("copied"),i&&(i.textContent=e("embedCopyButtonDefault"))},2e3)}catch(o){alert(e("embedCopyButtonError"))}}))}function V(e,t){e.querySelectorAll(".dropdown-option").forEach(e=>{e.classList.toggle("selected",e.dataset.value===t)})}function Z(t,n,i){const o=document.getElementById(t),s=document.getElementById(n);if(!o||!s)return;const d=o.querySelector(`.dropdown-option[data-value="${i}"]`);if(d){const t=d.dataset.labelKey;s.textContent=t?e(t):d.textContent}}function F(t){const n=document.getElementById(t);n&&n.querySelectorAll(".dropdown-option").forEach(t=>{const n=t.dataset.labelKey;n&&(t.textContent=e(n))})}function q(){F("embedViewDropdownMenu"),F("embedThemeDropdownMenu"),Z("embedViewDropdownMenu","embedViewDropdownText",m),Z("embedThemeDropdownMenu","embedThemeDropdownText",v)}function O(){D.forEach(({button:e,menu:t})=>{e.classList.remove("open"),e.setAttribute("aria-expanded","false"),t.classList.remove("open")})}function P(){const e=document.getElementById("copyEmbedCode");e&&e.addEventListener("click",U),function(){if(H)return;H=!0,[{buttonId:"embedViewDropdown",menuId:"embedViewDropdownMenu",textId:"embedViewDropdownText",getSelection:()=>m,setSelection:e=>{m=e,N()}},{buttonId:"embedThemeDropdown",menuId:"embedThemeDropdownMenu",textId:"embedThemeDropdownText",getSelection:()=>v,setSelection:e=>{v=e,N()}}].forEach(e=>{const t=document.getElementById(e.buttonId),n=document.getElementById(e.menuId),i=document.getElementById(e.textId);t&&n&&i&&(D.push({button:t,menu:n}),t.addEventListener("click",e=>{e.stopPropagation();const i=!t.classList.contains("open");O(),i?(t.classList.add("open"),n.classList.add("open"),t.setAttribute("aria-expanded","true")):t.setAttribute("aria-expanded","false")}),n.querySelectorAll(".dropdown-option").forEach(t=>{t.addEventListener("click",i=>{i.stopPropagation();const o=t.dataset.value;e.setSelection(o),V(n,o),Z(e.menuId,e.textId,o),O()})}),V(n,e.getSelection()))}),document.addEventListener("click",e=>{const t=e.target instanceof Element?e.target:e.target?.parentElement;t&&t.closest(".embed-dropdown")||O()}),q()}()}function J(){document.getElementById("appInfoModal").classList.remove("active"),document.body.style.overflow="auto"}function j(e){return e.some(e=>e.wind>=12)}function z(){return"true"===localStorage.getItem("filterWindyDays")}function _(t){const i=n(t.country),o=t.forecastHourly&&t.forecastHourly.length>0?t.forecastHourly:t.forecast||[],s=o&&o.some(e=>void 0!==e.wave),d=window.matchMedia("(min-width: 769px)").matches;let a="";if(t.currentConditions&&void 0!==t.currentConditions.wind){let n,i;const o=(t.currentConditions.wind+t.currentConditions.gusts)/2;o<12?(n="weak-wind",i="wind-weak"):o>=12&&o<18?(n="moderate-wind",i="wind-moderate"):o>=18&&o<=22?(n="strong-wind",i="wind-strong"):(n="extreme-wind",i="wind-extreme");const d=t.currentConditions.temp>=20?"temp-positive":"temp-negative",l=I(t.currentConditions.direction);let c="",r="-";void 0!==t.currentConditions.wave&&(0===t.currentConditions.wave?(c="wave-none",r="0m"):(c=t.currentConditions.wave>1.5?"wave-high":"wave-low",r=`${t.currentConditions.wave}m`)),a=`\n                    <tr class="${n}" style="border-bottom: 2px solid #404040;">\n                        <td>\n                            <div class="live-indicator">\n                                <strong class="live-text">${e("nowLabel")}</strong>\n                                <div class="live-dot"></div>\n                            </div>\n                        </td>\n                        <td class="${i}">${t.currentConditions.wind} kts</td>\n                        <td class="${i}">${t.currentConditions.gusts} kts</td>\n                        <td class="${i}">\n                            <span class="wind-arrow">${l}</span> ${t.currentConditions.direction}\n                        </td>\n                        <td class="${d}">${t.currentConditions.temp}¬∞C</td>\n                        <td>-</td>\n                        ${s?`<td class="${c}">${r}</td>`:""}\n                    </tr>\n                `}let l="";if(o&&o.length>0){let e=null,t=0,n=o.filter(e=>{if(!e.date)return!1;const t=e.date.split(" ")[4];if(!t)return!1;const n=parseInt(t.split(":")[0]);return n>=6&&n<=21});if(z()){const e={};n.forEach(t=>{const n=t.date?t.date.split(" ").slice(0,4).join(" "):"Unknown";e[n]||(e[n]=[]),e[n].push(t)}),n=[],Object.keys(e).forEach(t=>{const i=e[t];j(i)&&n.push(...i)})}n.forEach(n=>{let i="",o="";n.wind<12?(i="weak-wind",o="wind-weak"):n.wind>=12&&n.wind<=18?(i="moderate-wind",o="wind-moderate"):n.wind>=19&&n.wind<=25?(i="strong-wind",o="wind-strong"):(i="extreme-wind",o="wind-extreme");const d=n.temp>=18?"temp-positive":"temp-negative",a=I(n.direction),c=0===n.precipitation?"precipitation-none":"precipitation";let r="",u="-";void 0!==n.wave&&(0===n.wave?(r="wave-none",u="0m"):(r=n.wave>1.5?"wave-high":"wave-low",u=`${n.wave}m`));const m=n.date?n.date.split(" ")[0]:null;e&&m&&e!==m&&(t=(t+1)%2);const v=`border-left: 3px solid ${0===t?"rgba(74, 158, 255, 0.4)":"rgba(255, 158, 74, 0.4)"};`;e=m,l+=`\n                        <tr class="${i}" style="${v}">\n                            <td><strong>${L(n.date)}</strong></td>\n                            <td class="${o}">${n.wind} kts</td>\n                            <td class="${o}">${n.gusts} kts</td>\n                            <td class="${o}">\n                                <span class="wind-arrow">${a}</span> ${n.direction}\n                            </td>\n                            <td class="${d}">${n.temp}¬∞C</td>\n                            <td class="${c}">${n.precipitation} mm</td>\n                            ${s?`<td class="${r}">${u}</td>`:""}\n                        </tr>\n                    `})}let c="",r=null,u="";if(t.currentConditions&&void 0!==t.currentConditions.wind)r={wind:t.currentConditions.wind,gusts:t.currentConditions.gusts,direction:t.currentConditions.direction,temp:t.currentConditions.temp,precipitation:0,isCurrent:!0},u=e("nowLabel");else if(o&&o.length>0){const e=function(e){if(!e||0===e.length)return null;const t=new Date;let n=e[0],i=Math.abs(x(e[0].date)-t);for(let o=1;o<e.length;o++){const s=x(e[o].date),d=Math.abs(s-t);d<i&&(i=d,n=e[o])}return n}(o);e&&(r={wind:e.wind,gusts:e.gusts,direction:e.direction,temp:e.temp,precipitation:e.precipitation||0,isCurrent:!1},u=L(e.date))}if(r){I(r.direction);const t=(r.wind+r.gusts)/2;let n="";n=t<12?"wind-weak":t>=12&&t<18?"wind-moderate":t>=18&&t<=25?"wind-strong":"wind-extreme",c=`\n                <div class="current-conditions-card">\n                    <div class="conditions-header">\n                        <div class="conditions-label">${u}</div>\n                        ${r.isCurrent?'<div class="live-dot"></div>':""}\n                    </div>\n                    <div class="conditions-main">\n                        <div class="wind-arrow-large ${n}" style="transform: rotate(${m=r.direction,{N:0,NE:45,E:90,SE:135,S:180,SW:225,W:270,NW:315}[m]||0}deg);">\n                            ‚Üì\n                        </div>\n                        <div class="wind-details">\n                            <div class="wind-speed ${n}">${r.wind} kts</div>\n                            <div class="wind-label">${e("windLabel")}</div>\n                        </div>\n                    </div>\n                    <div class="conditions-grid">\n                        <div class="condition-item">\n                            <div class="condition-label">${e("gustsLabel")}</div>\n                            <div class="condition-value ${n}">${r.gusts} kts</div>\n                        </div>\n                        <div class="condition-item">\n                            <div class="condition-label">${e("directionLabel")}</div>\n                            <div class="condition-value">${r.direction}</div>\n                        </div>\n                        <div class="condition-item">\n                            <div class="condition-label">${e("temperatureLabel")}</div>\n                            <div class="condition-value ${r.temp>=18?"temp-positive":"temp-negative"}">${r.temp}¬∞C</div>\n                        </div>\n                        <div class="condition-item">\n                            <div class="condition-label">${e("precipitationLabel")}</div>\n                            <div class="condition-value ${0===r.precipitation?"precipitation-none":"precipitation"}">${r.precipitation} mm</div>\n                        </div>\n                    </div>\n                </div>\n            `}var m;let v="";if(t.spotInfo){const n=M(t);v=`\n                <div class="spot-info-card">\n                    <div class="info-grid">\n                        <div class="info-item" style="grid-column: 1 / -1;">\n                            <div class="info-label">${e("overviewLabel")}</div>\n                            <div class="info-value">${n.description}</div>\n                        </div>\n                        <div class="info-item">\n                            <div class="info-label">${e("spotTypeLabel")}</div>\n                            <div class="info-value">${n.type}</div>\n                        </div>\n                        <div class="info-item">\n                            <div class="info-label">${e("bestWindLabel")}</div>\n                            <div class="info-value">${n.bestWind}</div>\n                        </div>\n                        <div class="info-item">\n                            <div class="info-label">${e("waterTempLabel")}</div>\n                            <div class="info-value">${n.waterTemp}</div>\n                        </div>\n                        <div class="info-item">\n                            <div class="info-label">${e("experienceLabel")}</div>\n                            <div class="info-value">${n.experience}</div>\n                        </div>\n                        <div class="info-item">\n                            <div class="info-label">${e("launchTypeLabel")}</div>\n                            <div class="info-value">${n.launch}</div>\n                        </div>\n                        <div class="info-item">\n                            <div class="info-label">${e("hazardsLabel")}</div>\n                            <div class="info-value">${n.hazards}</div>\n                        </div>\n                        <div class="info-item" style="grid-column: 1 / -1;">\n                            <div class="info-label">${e("seasonLabel")}</div>\n                            <div class="info-value">${n.season}</div>\n                        </div>\n                    </div>\n                </div>\n            `}const p=d&&t.embeddedMap&&t.embeddedMap.trim().length>0?`\n                <div class="spot-embedded-map">\n                    <div class="spot-embedded-map-frame">${t.embeddedMap}</div>\n                </div>\n            `:"",f=B(t);let g="";f&&(g=`\n                <div class="ai-analysis-card">\n                    <div class="ai-analysis">\n                        <p>${f}</p>\n                    </div>\n                    <div class="modal-disclaimer">${e("aiDisclaimer")}</div>\n                </div>\n            `);let w="";if(t.sponsors&&t.sponsors.length>0){let e="";for(const n of t.sponsors)e+=`\n                <div class="sponsor-item">\n                    <a href="${n.link}" target="_blank" rel="noopener noreferrer" class="sponsor-link">\n                        ${n.name}\n                    </a>\n                </div>\n            `;w=`\n                <div class="sponsors-card">\n                    <div class="sponsors-list">\n                        ${e}\n                    </div>\n                </div>\n            `}return`\n            <div class="spot-card" style="width: 100%;">\n                <div class="spot-header" style="margin-left: 0;">\n                    <div class="spot-title">\n                        <h2 class="spot-name spot-name-single">${t.name}</h2>\n                        <div class="last-updated">${t.lastUpdated||e("noData")}</div>\n                    </div>\n                    <div class="spot-meta">\n                        <span class="country-tag">${i} ${e(t.country.replace(/\s+/g,""))}</span>\n                    </div>\n                </div>\n                <div class="external-links">\n                    ${t.spotInfo?`<span class="external-link info-link" onclick="openInfoModal('${t.name}')"></span>`:""}\n                    ${t.windguruUrl?`<a href="${t.windguruUrl}" target="_blank" class="external-link">WG</a>`:""}\n                    ${t.windfinderUrl?`<a href="${t.windfinderUrl}" target="_blank" class="external-link">WF</a>`:""}\n                    ${t.icmUrl?`<span class="external-link" onclick="openIcmModal('${t.name}', '${t.icmUrl}')">ICM</span>`:""}\n                    ${t.webcamUrl?`<a href="${t.webcamUrl}" target="_blank" class="external-link webcam-link">CAM</a>`:""}\n                    ${t.locationUrl?`<a href="${t.locationUrl}" target="_blank" class="external-link location-link">${e("mapLinkLabel")}</a>`:""}\n                    <span class="external-link embed-link" onclick="openEmbedModal()">${e("embedLinkLabel")}</span>\n                    ${f?`<span class="external-link ai-link" onclick="openAIModal('${t.name}')">AI</span>`:""}\n                </div>\n\n                <div class="spot-detail-container">\n                    <div class="spot-detail-left">\n                        ${c}\n                        ${v}\n                        ${g}\n                        ${w}\n                    </div>\n                    <div class="spot-detail-right">\n                        ${p}\n                        ${d?`\n                        <div class="forecast-tabs-container">\n                            <div class="forecast-tabs">\n                                <button class="forecast-tab active" data-tab="table">\n                                    <svg class="tab-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                        <path d="M11,22H5c-2.757,0-5-2.243-5-5V9H11v13ZM24,7c0-2.757-2.243-5-5-5H5C2.243,2,0,4.243,0,7H24Zm-11,2v13h6c2.757,0,5-2.243,5-5V9H13Z" fill="currentColor"/>\n                                    </svg>\n                                    ${e("tableViewLabel")}\n                                </button>\n                                <button class="forecast-tab" data-tab="windguru">\n                                    <svg class="tab-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                        <path d="M5,22c-2.757,0-5-2.243-5-5V7C0,4.243,2.243,2,5,2V22Zm2-11H24V7c0-2.757-2.243-5-5-5H7V11Zm0,2v9h12c2.757,0,5-2.243,5-5v-4H7Z" fill="currentColor"/>\n                                    </svg>\n                                    ${e("windguruViewLabel")}\n                                </button>\n                            </div>\n                            <div class="filter-windy-days-container">\n                                <label class="filter-windy-days-label">\n                                    <input type="checkbox" id="filterWindyDaysCheckbox" ${z()?"checked":""} />\n                                    <span class="filter-text">${e("filterWindyDaysLabel")}</span>\n                                </label>\n                            </div>\n                        </div>\n                        `:""}\n                        <div class="forecast-view-container">\n                            <div class="forecast-view table-view active">\n                                ${z()&&""===l?`\n                                    <div class="no-windy-days-message">\n                                        <span class="no-windy-days-icon">üí®</span>\n                                        <p class="no-windy-days-text">${e("noWindyDaysMessage")}</p>\n                                    </div>\n                                `:`\n                                    <table class="weather-table">\n                                        <thead>\n                                            <tr>\n                                                <th>${e("dateHeader")}</th>\n                                                <th>${e("windHeader")}</th>\n                                                <th>${e("gustsHeader")}</th>\n                                                <th>${e("directionHeader")}</th>\n                                                <th>${e("tempHeader")}</th>\n                                                <th>${e("rainHeader")}</th>\n                                                ${s?`<th>${e("waveHeader")}</th>`:""}\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            ${a}\n                                            ${l}\n                                        </tbody>\n                                    </table>\n                                `}\n                            </div>\n                            ${d?function(t,n){if(!t||0===t.length)return"";const i={};t.forEach(e=>{const t=e.date?e.date.split(" ").slice(0,4).join(" "):"Unknown";i[t]||(i[t]=[]),i[t].push(e)});const o=z();let s="",d=!1;Object.keys(i).forEach(e=>{const t=i[e].filter(e=>{if(!e.date)return!1;const t=e.date.split(" ")[4];if(!t)return!1;const n=parseInt(t.split(":")[0]);return n>=6&&n<=21});if(0===t.length)return;if(o&&!j(t))return;d=!0;const a=C(t[0].date);s+='<div class="windguru-day-column">',s+=`<div class="windguru-day-header">${a}</div>`,s+='<div class="windguru-data-row">',t.forEach(e=>{const t=e.date?e.date.split(" ")[4]:"";s+=`<div class="windguru-cell windguru-time-cell">${t}</div>`}),s+="</div>",s+='<div class="windguru-data-row">',t.forEach(e=>{let t="";t=e.wind<12?"wind-weak":e.wind>=12&&e.wind<=18?"wind-moderate":e.wind>=19&&e.wind<=25?"wind-strong":"wind-extreme",s+=`<div class="windguru-cell ${t}">${e.wind}</div>`}),s+="</div>",s+='<div class="windguru-data-row">',t.forEach(e=>{let t="";t=e.gusts<12?"wind-weak":e.gusts>=12&&e.gusts<=18?"wind-moderate":e.gusts>=19&&e.gusts<=25?"wind-strong":"wind-extreme",s+=`<div class="windguru-cell ${t}">${e.gusts}</div>`}),s+="</div>",s+='<div class="windguru-data-row">',t.forEach(e=>{const t=I(e.direction);s+=`<div class="windguru-cell"><span class="wind-arrow" style="display: block;">${t}</span><span style="font-size: 0.7rem;">${e.direction}</span></div>`}),s+="</div>",s+='<div class="windguru-data-row">',t.forEach(e=>{const t=e.temp>=18?"temp-positive":"temp-negative";s+=`<div class="windguru-cell ${t}">${e.temp}¬∞</div>`}),s+="</div>",s+='<div class="windguru-data-row">',t.forEach(e=>{const t=0===e.precipitation?"precipitation-none":"precipitation";s+=`<div class="windguru-cell ${t}">${e.precipitation}</div>`}),s+="</div>",n&&(s+='<div class="windguru-data-row">',t.forEach(e=>{let t="",n="-";void 0!==e.wave&&(0===e.wave?(t="wave-none",n="0m"):(t=e.wave>1.5?"wave-high":"wave-low",n=`${e.wave}m`)),s+=`<div class="windguru-cell ${t}">${n}</div>`}),s+="</div>"),s+="</div>"});let a='<div class="forecast-view windguru-view">';return o&&!d?a+=`\n            <div class="no-windy-days-message">\n                <span class="no-windy-days-icon">üí®</span>\n                <p class="no-windy-days-text">${e("noWindyDaysMessage")}</p>\n            </div>\n        `:(a+='<div class="windguru-wrapper">',a+='<div class="windguru-labels">',a+='<div class="windguru-label-header"></div>',a+=`<div class="windguru-label">${e("timeLabel")}</div>`,a+=`<div class="windguru-label">${e("windHeader")}</div>`,a+=`<div class="windguru-label">${e("gustsHeader")}</div>`,a+=`<div class="windguru-label">${e("directionHeader")}</div>`,a+=`<div class="windguru-label">${e("tempHeader")}</div>`,a+=`<div class="windguru-label">${e("rainHeader")}</div>`,n&&(a+=`<div class="windguru-label">${e("waveHeader")}</div>`),a+="</div>",a+='<div class="windguru-data-container">',a+='<div class="windguru-data">',a+=s,a+="</div>",a+="</div>",a+="</div>"),a+="</div>",a}(o,s):""}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `}function R(e){const t=document.getElementById("spotContainer"),n=document.getElementById("loadingMessage"),o=document.getElementById("errorMessage");y(),n&&(n.style.display="none"),o&&(o.style.display="none");const l=i;s=null,d="",a=null;let c=null;const m=l&&l.embeddedMap&&e.embeddedMap&&l.embeddedMap===e.embeddedMap;if(m){const e=document.querySelector(".spot-embedded-map-frame");e&&e.firstElementChild&&(c=e.firstElementChild)}if(e){if(t.innerHTML=_(e),m&&c){const e=document.querySelector(".spot-embedded-map-frame");e&&(e.innerHTML="",e.appendChild(c))}document.title=`${e.name} - VARUN.SURF`,function(){const e=document.querySelectorAll(".forecast-tab");if(0===e.length)return;const t=localStorage.getItem("forecastViewPreference")||"table",n=document.querySelector(".table-view"),i=document.querySelector(".windguru-view");e.forEach(e=>{e.dataset.tab===t?e.classList.add("active"):e.classList.remove("active")}),"table"===t?(n&&n.classList.add("active"),i&&i.classList.remove("active")):"windguru"===t&&(n&&n.classList.remove("active"),i&&i.classList.add("active")),e.forEach(t=>{t.addEventListener("click",()=>{const o=t.dataset.tab;localStorage.setItem("forecastViewPreference",o),e.forEach(e=>e.classList.remove("active")),t.classList.add("active"),"table"===o?(n&&n.classList.add("active"),i&&i.classList.remove("active")):"windguru"===o&&(n&&n.classList.remove("active"),i&&i.classList.add("active"))})});const o=document.querySelector(".windguru-data-container");if(o){let e,t,n=!1;o.addEventListener("mousedown",i=>{n=!0,o.classList.add("dragging"),e=i.pageX-o.offsetLeft,t=o.scrollLeft}),o.addEventListener("mouseleave",()=>{n=!1,o.classList.remove("dragging")}),o.addEventListener("mouseup",()=>{n=!1,o.classList.remove("dragging")}),o.addEventListener("mousemove",i=>{if(!n)return;i.preventDefault();const s=2*(i.pageX-o.offsetLeft-e);o.scrollLeft=t-s})}}(),function(){const e=document.getElementById("filterWindyDaysCheckbox");if(!e)return;e.addEventListener("change",e=>{!function(e){localStorage.setItem("filterWindyDays",e?"true":"false")}(e.target.checked),i&&R(i)})}()}var v;i=e,u&&(v=u,!r&&v&&(r=setInterval(async()=>{try{const e=await g(v);if(!w(e))return;i&&JSON.stringify(e)===JSON.stringify(i)||R(e)}catch(e){e&&404===e.status?(b(),K("spotNotFound")):console.warn("Background refresh failed:",e)}},6e4)))}function K(n){const i=document.getElementById("loadingMessage"),o=document.getElementById("errorMessage"),l=document.getElementById("errorTitle"),c=document.getElementById("errorDescription");y(),b(),i&&(i.style.display="none"),o.style.display="flex";"string"==typeof n&&(t.en&&Object.prototype.hasOwnProperty.call(t.en,n)||t.pl&&Object.prototype.hasOwnProperty.call(t.pl,n))?(s=n,d=e(n)):(s=null,d="string"==typeof n?n:""),l.textContent=e("error"),c.textContent=d,a=null}function X(){const t=document.getElementById("appInfoModalTitle");t&&(t.textContent=e("appInfoModalTitle"));const n=document.getElementById("embedModalTitle");n&&(n.textContent=e("embedModalTitle"));const o=document.getElementById("embedDescription");o&&(o.textContent=e("embedModalDescription")),q();const l=document.getElementById("embedPreviewTitle");l&&(l.textContent=e("embedPreviewTitle"));const c=document.getElementById("embedCodeTitle");c&&(c.textContent=e("embedCodeTitle"));const r=document.getElementById("copyButtonText");r&&(r.textContent=e("embedCopyButtonDefault"));const u=document.getElementById("aiModalDisclaimer");u&&(u.textContent=e("aiDisclaimer"));const m=document.getElementById("aiModalTitle");m&&i&&(m.textContent=`${i.name} - ${e("aiAnalysisTitle")}`);const v=document.getElementById("appInfoDescription");v&&(v.textContent=e("appInfoDescription"));const p=document.getElementById("appInfoContactTitle");p&&(p.textContent=e("appInfoContactTitle"));const f=document.getElementById("appInfoContactText");f&&(f.innerHTML=e("appInfoContactText"));const g=document.getElementById("appInfoNewSpotTitle");g&&(g.textContent=e("appInfoNewSpotTitle"));const w=document.getElementById("appInfoNewSpotText");w&&(w.innerHTML=e("appInfoNewSpotText"));const y=document.getElementById("appInfoCollaborationTitle");y&&(y.textContent=e("appInfoCollaborationTitle"));const b=document.getElementById("appInfoCollaborationText");b&&(b.innerHTML=e("appInfoCollaborationText"));const h=document.getElementById("infoToggleLabel");h&&(h.textContent=e("infoButtonLabel"));const $=document.getElementById("loadingMessage");if($&&"none"!==$.style.display){const t=document.getElementById("loadingText");if(t){const n=a||"loadingSpotData";t.textContent=e(n)}}const I=document.getElementById("errorMessage");if(I&&"none"!==I.style.display){const t=document.getElementById("errorTitle"),n=document.getElementById("errorDescription");t&&(t.textContent=e("error")),n&&(s&&(d=e(s)),n.textContent=d)}}function G(){const e=document.getElementById("infoToggle");e&&e.addEventListener("click",()=>{!function(){const e=document.getElementById("appInfoModal");e&&(e.classList.add("active"),document.body.style.overflow="hidden")}()})}function Q(){const e=document.getElementById("modelDropdown"),t=document.getElementById("modelDropdownMenu"),n=document.getElementById("modelDropdownText");if(!e||!t||!n)return;const i=f();n.textContent=i.toUpperCase();const o=document.querySelectorAll("#modelDropdownMenu .dropdown-option");o.forEach(s=>{s.dataset.value===i&&s.classList.add("selected"),s.addEventListener("click",()=>{const i=s.dataset.value;var d;d=i,sessionStorage.setItem("forecastModel",d),n.textContent=i.toUpperCase(),o.forEach(e=>e.classList.remove("selected")),s.classList.add("selected"),t.classList.remove("open"),e.classList.remove("open"),u&&(h("loadingSpotData"),g(u).then(e=>{w(e)?R(e):(h("loadingForecast"),$(u))}).catch(e=>{e&&404===e.status?K("spotNotFound"):K("errorLoadingSpot")}))})}),e.addEventListener("click",()=>{t.classList.toggle("open"),e.classList.toggle("open")}),document.addEventListener("click",n=>{e.contains(n.target)||t.contains(n.target)||(t.classList.remove("open"),e.classList.remove("open"))})}async function Y(){const e=function(){const e=window.location.pathname.split("/"),t=e.indexOf("spot");return-1!==t&&e.length>t+1?e[t+1]:null}();if(u=e,!e)return void K("invalidSpotId");h("loadingSpotData");const t=Date.now();try{const n=await g(e),i=2e3-(Date.now()-t);i>0&&await new Promise(e=>setTimeout(e,i)),w(n)?(R(n),function(e){const t=document.getElementById("sponsorsContainer");if(!t)return;if(!e.sponsors||0===e.sponsors.length)return void(t.innerHTML="");let n='<div class="sponsors-container"><div class="sponsors-list">';for(const i of e.sponsors)n+=`\n            <div class="sponsor-item">\n                <a href="${i.link}" target="_blank" rel="noopener noreferrer" class="sponsor-link">\n                    <span class="sponsor-name">${i.name}</span>\n                </a>\n            </div>\n        `;n+="</div></div>",t.innerHTML=n}(n)):(h("loadingForecast"),$(e))}catch(n){n&&404===n.status?K("spotNotFound"):K("errorLoadingSpot")}}window.openAIModal=function(t){if(!i)return;const n=B(i);if(!n)return;const o=document.getElementById("aiModal"),s=document.getElementById("aiModalTitle"),d=document.getElementById("aiAnalysisContent");s.textContent=`${t} - ${e("aiAnalysisTitle")}`,d.innerHTML=`<p>${n}</p>`;const a=document.getElementById("aiModalDisclaimer");a&&(a.textContent=e("aiDisclaimer")),o.classList.add("active"),document.body.style.overflow="hidden"},window.closeAIModal=k,window.openInfoModal=function(t){if(!i||!i.spotInfo)return;const n=document.getElementById("infoModal"),o=document.getElementById("infoModalSpotName"),s=document.getElementById("spotInfoContent");o.textContent=`${t}`;const d=M(i);s.innerHTML=`\n                <div class="info-grid">\n                    <div class="info-item" style="grid-column: 1 / -1;">\n                        <div class="info-label">${e("overviewLabel")}</div>\n                        <div class="info-value">${d.description}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${e("spotTypeLabel")}</div>\n                        <div class="info-value">${d.type}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${e("bestWindLabel")}</div>\n                        <div class="info-value">${d.bestWind}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${e("waterTempLabel")}</div>\n                        <div class="info-value">${d.waterTemp}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${e("experienceLabel")}</div>\n                        <div class="info-value">${d.experience}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${e("launchTypeLabel")}</div>\n                        <div class="info-value">${d.launch}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${e("hazardsLabel")}</div>\n                        <div class="info-value">${d.hazards}</div>\n                    </div>\n                    <div class="info-item" style="grid-column: 1 / -1;">\n                        <div class="info-label">${e("seasonLabel")}</div>\n                        <div class="info-value">${d.season}</div>\n                    </div>\n                </div>\n            `,n.classList.add("active"),document.body.style.overflow="hidden"},window.closeInfoModal=T,window.openIcmModal=function(e,t){const n=document.getElementById("icmModal"),i=document.getElementById("icmModalTitle"),o=document.getElementById("icmImage");i.textContent=`${e} - ICM Forecast`,o.src=t,n.classList.add("active"),document.body.style.overflow="hidden"},window.closeIcmModal=S,window.openEmbedModal=function(){if(!u)return;document.getElementById("embedModal").classList.add("active"),document.body.style.overflow="hidden";const t=document.getElementById("copyEmbedCode"),n=document.getElementById("copyButtonText");t&&t.classList.remove("copied"),n&&(n.textContent=e("embedCopyButtonDefault")),q(),O(),N()},window.closeEmbedModal=A,document.addEventListener("DOMContentLoaded",async function(){!function(){const e=localStorage.getItem("theme")||"dark",t=document.getElementById("themeToggle"),n=document.getElementById("themeIcon");function i(e){document.documentElement.setAttribute("data-theme",e),n.innerHTML="light"===e?'<path d="M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5,5-2.24,5-5-2.24-5-5-5Zm0,7c-1.1,0-2-.9-2-2s.9-2,2-2,2,.9,2,2-.9,2-2,2Zm4.95-6.95c-.59-.59-.59-1.54,0-2.12l1.41-1.41c.59-.59,1.54-.59,2.12,0,.59,.59,.59,1.54,0,2.12l-1.41,1.41c-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44ZM7.05,16.95c.59,.59,.59,1.54,0,2.12l-1.41,1.41c-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44c-.59-.59-.59-1.54,0-2.12l1.41-1.41c.59-.59,1.54-.59,2.12,0ZM3.51,5.64c-.59-.59-.59-1.54,0-2.12,.59-.59,1.54-.59,2.12,0l1.41,1.41c.59,.59,.59,1.54,0,2.12-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44l-1.41-1.41Zm16.97,12.73c.59,.59,.59,1.54,0,2.12-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44l-1.41-1.41c-.59-.59-.59-1.54,0-2.12,.59-.59,1.54-.59,2.12,0l1.41,1.41Zm3.51-6.36c0,.83-.67,1.5-1.5,1.5h-2c-.83,0-1.5-.67-1.5-1.5s.67-1.5,1.5-1.5h2c.83,0,1.5,.67,1.5,1.5ZM3.5,13.5H1.5c-.83,0-1.5-.67-1.5-1.5s.67-1.5,1.5-1.5H3.5c.83,0,1.5,.67,1.5,1.5s-.67,1.5-1.5,1.5ZM10.5,3.5V1.5c0-.83,.67-1.5,1.5-1.5s1.5,.67,1.5,1.5V3.5c0,.83-.67,1.5-1.5,1.5s-1.5-.67-1.5-1.5Zm3,17v2c0,.83-.67,1.5-1.5,1.5s-1.5-.67-1.5-1.5v-2c0-.83,.67-1.5-1.5-1.5s1.5,.67,1.5,1.5Z"/>':'<path d="M15,24a12.021,12.021,0,0,1-8.914-3.966,11.9,11.9,0,0,1-3.02-9.309A12.122,12.122,0,0,1,13.085.152a13.061,13.061,0,0,1,5.031.205,2.5,2.5,0,0,1,1.108,4.226c-4.56,4.166-4.164,10.644.807,14.41a2.5,2.5,0,0,1-.7,4.32A13.894,13.894,0,0,1,15,24Z"/>',localStorage.setItem("theme",e)}i(e),t&&t.addEventListener("click",()=>{i("dark"===document.documentElement.getAttribute("data-theme")?"light":"dark")})}(),function(){const e=localStorage.getItem("language")||"en";o=e,p=e;const t=document.getElementById("languageToggle"),n=document.getElementById("langCode");X(),t&&n&&(n.textContent=e.toUpperCase(),t.addEventListener("click",()=>{const e="en"===o?"pl":"en";o=e,p=e,n.textContent=e.toUpperCase(),localStorage.setItem("language",e),X(),i&&R(i),N()}))}(),function(){const e=document.getElementById("infoModalClose"),t=document.getElementById("aiModalClose"),n=document.getElementById("icmModalClose"),i=document.getElementById("appInfoModalClose"),o=document.getElementById("embedModalClose");e&&e.addEventListener("click",T),t&&t.addEventListener("click",k),n&&n.addEventListener("click",S),i&&i.addEventListener("click",J),o&&o.addEventListener("click",A),document.querySelectorAll(".modal-overlay").forEach(e=>{e.addEventListener("click",t=>{t.target===e&&(T(),k(),S(),J(),A())})})}(),P(),G(),function(){const e=document.getElementById("hamburgerMenu"),t=document.getElementById("headerControls"),n=document.querySelector(".main-content");e&&e.addEventListener("click",()=>{t.classList.contains("show")?(t.classList.remove("show"),e.classList.remove("active"),e.textContent="‚ò∞",n&&n.classList.remove("menu-open")):(t.classList.add("show"),e.classList.add("active"),e.textContent="‚úï",n&&n.classList.add("menu-open"))})}(),function(){const e=document.getElementById("headerLogo"),t=document.getElementById("headerTitle");function n(){const e=localStorage.getItem("selectedCountry")||"all";if("all"===e)window.location.href="/";else{const t=e.toLowerCase().replace(/\s+/g,"").replace(/[^a-z]/g,"");window.location.href=`/country/${t}`}}e&&e.addEventListener("click",n),t&&t.addEventListener("click",n)}(),function(){let e,t=window.innerWidth<=768,n=window.innerWidth<=1430;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{const e=window.innerWidth<=768,o=window.innerWidth<=1430;(e!==t||o!==n)&&(t=e,n=o,i&&R(i))},150)})}(),Q(),Y()});
