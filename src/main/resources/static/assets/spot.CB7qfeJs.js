import"./styles.CqidXsQ2.js";import{a as e,t as n,g as t}from"./translations.nRtBG3-m.js";let i=null,o="en",s=null,a="",d="loadingSpotData",l=null,c=null,r=null,u=null;function v(){const e=sessionStorage.getItem("forecastModel");return!e||"gfs"!==e&&"ifs"!==e?"gfs":e}async function m(e){try{const n=v(),t=`/api/v1/spots/${e}${n?"/"+n:""}`,i=await fetch(t);if(!i.ok){const e=new Error(`HTTP error! status: ${i.status}`);throw e.status=i.status,e}return await i.json()}catch(n){throw console.error("Error fetching spot data:",n),n}}function p(e){return e&&Array.isArray(e.forecast)&&e.forecast.length>0}function g(){l&&(clearInterval(l),l=null),c&&(clearTimeout(c),c=null)}function f(){r&&(clearInterval(r),r=null)}function w(e){const t=document.getElementById("loadingMessage"),i=document.getElementById("loadingText"),o=document.getElementById("errorMessage");d=e,o&&(o.style.display="none"),t&&(t.style.display="block"),i&&(i.textContent=n(e))}function y(e){g();let n=!1;l=setInterval(async()=>{if(!n){n=!0;try{const n=await m(e);p(n)&&(g(),S(n))}catch(t){t&&404===t.status&&(g(),H("spotNotFound"))}finally{n=!1}}},5e3),c=setTimeout(()=>{g(),H("forecastTimeout")},3e4)}function $(e){return{N:"↓",NE:"↙",E:"←",SE:"↖",S:"↑",SW:"↗",W:"→",NW:"↘"}[e]||"•"}function h(e){if(!e||"string"!=typeof e)return"";const t={Mon:"dayMon",Tue:"dayTue",Wed:"dayWed",Thu:"dayThu",Fri:"dayFri",Sat:"daySat",Sun:"daySun"}[e.substring(0,3)];return t?n(t):e}function b(e){if(!e||"string"!=typeof e)return e||"";const n=e.split(" ").filter(Boolean);if(n.length<5)return e;const[t,i,o,,s]=n,a=h(t),d=i.padStart(2,"0");if(window.innerWidth<=768){const e=s.split(":")[0];return`${a.substring(0,2)} ${e}`.trim()}return`${d}. ${a} ${s}`.trim()}function I(e){if(!e)return"";const t=e.split(" ").filter(Boolean);if(t.length<4)return"";const i=t[0],o=t[1],s=t[2];return`${h(i).substring(0,3)} ${o}/${function(e){if(!e||"string"!=typeof e)return"";const t={Jan:"monthJan",Feb:"monthFeb",Mar:"monthMar",Apr:"monthApr",May:"monthMay",Jun:"monthJun",Jul:"monthJul",Aug:"monthAug",Sep:"monthSep",Oct:"monthOct",Nov:"monthNov",Dec:"monthDec"}[e];return t?n(t):e}(s)}`}function E(e){if(!e)return new Date;try{const n=e.trim().split(/\s+/);if(n.length>=5){const e=parseInt(n[1]),t=n[2],i=parseInt(n[3]),o=n[4].split(":"),s=parseInt(o[0]),a=parseInt(o[1]),d={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11}[t];if(void 0!==d){const n=new Date(i,d,e,s,a);if(!isNaN(n.getTime()))return n}}}catch(n){console.warn("Error parsing forecast date:",e,n)}return new Date}function L(e){if(!e)return null;return"pl"===(localStorage.getItem("language")||"en")?e.spotInfoPL:e.spotInfo}function C(e){if(!e)return"";const n=e=>"string"==typeof e&&e.trim().length>0?e:"",t=n(e.aiAnalysisEn),i=n(e.aiAnalysisPl),s=n(e.aiAnalysis);return"pl"===(o||localStorage.getItem("language")||"en")?i||t||s:t||i||s}function M(){document.getElementById("infoModal").classList.remove("active"),document.body.style.overflow="auto"}function B(){document.getElementById("aiModal").classList.remove("active"),document.body.style.overflow="auto"}function x(){document.getElementById("icmModal").classList.remove("active"),document.body.style.overflow="auto"}function k(){document.getElementById("appInfoModal").classList.remove("active"),document.body.style.overflow="auto"}function T(e){const i=t(e.country),o=e.forecastHourly&&e.forecastHourly.length>0?e.forecastHourly:e.forecast||[],s=o&&o.some(e=>void 0!==e.wave),a=window.matchMedia("(min-width: 769px)").matches;let d="";if(e.currentConditions&&void 0!==e.currentConditions.wind){let t,i;const o=(e.currentConditions.wind+e.currentConditions.gusts)/2;o<12?(t="weak-wind",i="wind-weak"):o>=12&&o<18?(t="moderate-wind",i="wind-moderate"):o>=18&&o<=22?(t="strong-wind",i="wind-strong"):(t="extreme-wind",i="wind-extreme");const a=e.currentConditions.temp>=20?"temp-positive":"temp-negative",l=$(e.currentConditions.direction);let c="",r="-";void 0!==e.currentConditions.wave&&(0===e.currentConditions.wave?(c="wave-none",r="0m"):(c=e.currentConditions.wave>1.5?"wave-high":"wave-low",r=`${e.currentConditions.wave}m`)),d=`\n                    <tr class="${t}" style="border-bottom: 2px solid #404040;">\n                        <td>\n                            <div class="live-indicator">\n                                <strong class="live-text">${n("nowLabel")}</strong>\n                                <div class="live-dot"></div>\n                            </div>\n                        </td>\n                        <td class="${i}">${e.currentConditions.wind} kts</td>\n                        <td class="${i}">${e.currentConditions.gusts} kts</td>\n                        <td class="${i}">\n                            <span class="wind-arrow">${l}</span> ${e.currentConditions.direction}\n                        </td>\n                        <td class="${a}">${e.currentConditions.temp}°C</td>\n                        <td>-</td>\n                        ${s?`<td class="${c}">${r}</td>`:""}\n                    </tr>\n                `}let l="";if(o&&o.length>0){let e=null,n=0;o.filter(e=>{if(!e.date)return!1;const n=e.date.split(" ")[4];if(!n)return!1;const t=parseInt(n.split(":")[0]);return t>=6&&t<=21}).forEach(t=>{let i="",o="";t.wind<12?(i="weak-wind",o="wind-weak"):t.wind>=12&&t.wind<=18?(i="moderate-wind",o="wind-moderate"):t.wind>=19&&t.wind<=25?(i="strong-wind",o="wind-strong"):(i="extreme-wind",o="wind-extreme");const a=t.temp>=18?"temp-positive":"temp-negative",d=$(t.direction),c=0===t.precipitation?"precipitation-none":"precipitation";let r="",u="-";void 0!==t.wave&&(0===t.wave?(r="wave-none",u="0m"):(r=t.wave>1.5?"wave-high":"wave-low",u=`${t.wave}m`));const v=t.date?t.date.split(" ")[0]:null;e&&v&&e!==v&&(n=(n+1)%2);const m=`border-left: 3px solid ${0===n?"rgba(74, 158, 255, 0.4)":"rgba(255, 158, 74, 0.4)"};`;e=v,l+=`\n                        <tr class="${i}" style="${m}">\n                            <td><strong>${b(t.date)}</strong></td>\n                            <td class="${o}">${t.wind} kts</td>\n                            <td class="${o}">${t.gusts} kts</td>\n                            <td class="${o}">\n                                <span class="wind-arrow">${d}</span> ${t.direction}\n                            </td>\n                            <td class="${a}">${t.temp}°C</td>\n                            <td class="${c}">${t.precipitation} mm</td>\n                            ${s?`<td class="${r}">${u}</td>`:""}\n                        </tr>\n                    `})}let c="",r=null,u="";if(e.currentConditions&&void 0!==e.currentConditions.wind)r={wind:e.currentConditions.wind,gusts:e.currentConditions.gusts,direction:e.currentConditions.direction,temp:e.currentConditions.temp,precipitation:0,isCurrent:!0},u=n("nowLabel");else if(o&&o.length>0){const e=function(e){if(!e||0===e.length)return null;const n=new Date;let t=e[0],i=Math.abs(E(e[0].date)-n);for(let o=1;o<e.length;o++){const s=E(e[o].date),a=Math.abs(s-n);a<i&&(i=a,t=e[o])}return t}(o);e&&(r={wind:e.wind,gusts:e.gusts,direction:e.direction,temp:e.temp,precipitation:e.precipitation||0,isCurrent:!1},u=b(e.date))}if(r){$(r.direction);const e=(r.wind+r.gusts)/2;let t="";t=e<12?"wind-weak":e>=12&&e<18?"wind-moderate":e>=18&&e<=25?"wind-strong":"wind-extreme",c=`\n                <div class="current-conditions-card">\n                    <div class="conditions-header">\n                        <div class="conditions-label">${u}</div>\n                        ${r.isCurrent?'<div class="live-dot"></div>':""}\n                    </div>\n                    <div class="conditions-main">\n                        <div class="wind-arrow-large ${t}" style="transform: rotate(${v=r.direction,{N:0,NE:45,E:90,SE:135,S:180,SW:225,W:270,NW:315}[v]||0}deg);">\n                            ↓\n                        </div>\n                        <div class="wind-details">\n                            <div class="wind-speed ${t}">${r.wind} kts</div>\n                            <div class="wind-label">${n("windLabel")}</div>\n                        </div>\n                    </div>\n                    <div class="conditions-grid">\n                        <div class="condition-item">\n                            <div class="condition-label">${n("gustsLabel")}</div>\n                            <div class="condition-value ${t}">${r.gusts} kts</div>\n                        </div>\n                        <div class="condition-item">\n                            <div class="condition-label">${n("directionLabel")}</div>\n                            <div class="condition-value">${r.direction}</div>\n                        </div>\n                        <div class="condition-item">\n                            <div class="condition-label">${n("temperatureLabel")}</div>\n                            <div class="condition-value ${r.temp>=18?"temp-positive":"temp-negative"}">${r.temp}°C</div>\n                        </div>\n                        <div class="condition-item">\n                            <div class="condition-label">${n("precipitationLabel")}</div>\n                            <div class="condition-value ${0===r.precipitation?"precipitation-none":"precipitation"}">${r.precipitation} mm</div>\n                        </div>\n                    </div>\n                </div>\n            `}var v;let m="";if(e.spotInfo){const t=L(e);m=`\n                <div class="spot-info-card">\n                    <div class="info-grid">\n                        <div class="info-item" style="grid-column: 1 / -1;">\n                            <div class="info-label">${n("overviewLabel")}</div>\n                            <div class="info-value">${t.description}</div>\n                        </div>\n                        <div class="info-item">\n                            <div class="info-label">${n("spotTypeLabel")}</div>\n                            <div class="info-value">${t.type}</div>\n                        </div>\n                        <div class="info-item">\n                            <div class="info-label">${n("bestWindLabel")}</div>\n                            <div class="info-value">${t.bestWind}</div>\n                        </div>\n                        <div class="info-item">\n                            <div class="info-label">${n("waterTempLabel")}</div>\n                            <div class="info-value">${t.waterTemp}</div>\n                        </div>\n                        <div class="info-item">\n                            <div class="info-label">${n("experienceLabel")}</div>\n                            <div class="info-value">${t.experience}</div>\n                        </div>\n                        <div class="info-item">\n                            <div class="info-label">${n("launchTypeLabel")}</div>\n                            <div class="info-value">${t.launch}</div>\n                        </div>\n                        <div class="info-item">\n                            <div class="info-label">${n("hazardsLabel")}</div>\n                            <div class="info-value">${t.hazards}</div>\n                        </div>\n                        <div class="info-item" style="grid-column: 1 / -1;">\n                            <div class="info-label">${n("seasonLabel")}</div>\n                            <div class="info-value">${t.season}</div>\n                        </div>\n                    </div>\n                </div>\n            `}const p=a&&e.embeddedMap&&e.embeddedMap.trim().length>0?`\n                <div class="spot-embedded-map">\n                    <div class="spot-embedded-map-frame">${e.embeddedMap}</div>\n                </div>\n            `:"",g=C(e);let f="";return g&&(f=`\n                <div class="ai-analysis-card">\n                    <div class="ai-analysis">\n                        <p>${g}</p>\n                    </div>\n                    <div class="modal-disclaimer">${n("aiDisclaimer")}</div>\n                </div>\n            `),`\n            <div class="spot-card" style="width: 100%;">\n                <div class="spot-header" style="margin-left: 0;">\n                    <div class="spot-title">\n                        <h2 class="spot-name spot-name-single">${e.name}</h2>\n                        <div class="last-updated">${e.lastUpdated||n("noData")}</div>\n                    </div>\n                    <div class="spot-meta">\n                        <span class="country-tag">${i} ${n(e.country.replace(/\s+/g,""))}</span>\n                    </div>\n                </div>\n                <div class="external-links">\n                    ${e.spotInfo?`<span class="external-link info-link" onclick="openInfoModal('${e.name}')"></span>`:""}\n                    ${e.windguruUrl?`<a href="${e.windguruUrl}" target="_blank" class="external-link">WG</a>`:""}\n                    ${e.windfinderUrl?`<a href="${e.windfinderUrl}" target="_blank" class="external-link">WF</a>`:""}\n                    ${e.icmUrl?`<span class="external-link" onclick="openIcmModal('${e.name}', '${e.icmUrl}')">ICM</span>`:""}\n                    ${e.webcamUrl?`<a href="${e.webcamUrl}" target="_blank" class="external-link webcam-link">CAM</a>`:""}\n                    ${e.locationUrl?`<a href="${e.locationUrl}" target="_blank" class="external-link location-link">MAP</a>`:""}\n                    ${g?`<span class="external-link ai-link" onclick="openAIModal('${e.name}')">AI</span>`:""}\n                </div>\n\n                <div class="spot-detail-container">\n                    <div class="spot-detail-left">\n                        ${c}\n                        ${m}\n                        ${f}\n                    </div>\n                    <div class="spot-detail-right">\n                        ${p}\n                        ${a?`\n                        <div class="forecast-tabs">\n                            <button class="forecast-tab active" data-tab="table">\n                                <svg class="tab-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                    <path d="M11,22H5c-2.757,0-5-2.243-5-5V9H11v13ZM24,7c0-2.757-2.243-5-5-5H5C2.243,2,0,4.243,0,7H24Zm-11,2v13h6c2.757,0,5-2.243,5-5V9H13Z" fill="currentColor"/>\n                                </svg>\n                                ${n("tableViewLabel")}\n                            </button>\n                            <button class="forecast-tab" data-tab="windguru">\n                                <svg class="tab-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                    <path d="M5,22c-2.757,0-5-2.243-5-5V7C0,4.243,2.243,2,5,2V22Zm2-11H24V7c0-2.757-2.243-5-5-5H7V11Zm0,2v9h12c2.757,0,5-2.243,5-5v-4H7Z" fill="currentColor"/>\n                                </svg>\n                                ${n("windguruViewLabel")}\n                            </button>\n                        </div>\n                        `:""}\n                        <div class="forecast-view-container">\n                            <div class="forecast-view table-view active">\n                                <table class="weather-table">\n                                    <thead>\n                                        <tr>\n                                            <th>${n("dateHeader")}</th>\n                                            <th>${n("windHeader")}</th>\n                                            <th>${n("gustsHeader")}</th>\n                                            <th>${n("directionHeader")}</th>\n                                            <th>${n("tempHeader")}</th>\n                                            <th>${n("rainHeader")}</th>\n                                            ${s?`<th>${n("waveHeader")}</th>`:""}\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        ${d}\n                                        ${l}\n                                    </tbody>\n                                </table>\n                            </div>\n                            ${a?function(e,t){if(!e||0===e.length)return"";const i={};e.forEach(e=>{const n=e.date?e.date.split(" ").slice(0,4).join(" "):"Unknown";i[n]||(i[n]=[]),i[n].push(e)});let o='<div class="forecast-view windguru-view">';return o+='<div class="windguru-wrapper">',o+='<div class="windguru-labels">',o+='<div class="windguru-label-header"></div>',o+=`<div class="windguru-label">${n("timeLabel")}</div>`,o+=`<div class="windguru-label">${n("windHeader")}</div>`,o+=`<div class="windguru-label">${n("gustsHeader")}</div>`,o+=`<div class="windguru-label">${n("directionHeader")}</div>`,o+=`<div class="windguru-label">${n("tempHeader")}</div>`,o+=`<div class="windguru-label">${n("rainHeader")}</div>`,t&&(o+=`<div class="windguru-label">${n("waveHeader")}</div>`),o+="</div>",o+='<div class="windguru-data-container">',o+='<div class="windguru-data">',Object.keys(i).forEach(e=>{const n=i[e].filter(e=>{if(!e.date)return!1;const n=e.date.split(" ")[4];if(!n)return!1;const t=parseInt(n.split(":")[0]);return t>=6&&t<=21});if(0===n.length)return;const s=I(n[0].date);o+='<div class="windguru-day-column">',o+=`<div class="windguru-day-header">${s}</div>`,o+='<div class="windguru-data-row">',n.forEach(e=>{const n=e.date?e.date.split(" ")[4]:"";o+=`<div class="windguru-cell windguru-time-cell">${n}</div>`}),o+="</div>",o+='<div class="windguru-data-row">',n.forEach(e=>{let n="";n=e.wind<12?"wind-weak":e.wind>=12&&e.wind<=18?"wind-moderate":e.wind>=19&&e.wind<=25?"wind-strong":"wind-extreme",o+=`<div class="windguru-cell ${n}">${e.wind}</div>`}),o+="</div>",o+='<div class="windguru-data-row">',n.forEach(e=>{let n="";n=e.gusts<12?"wind-weak":e.gusts>=12&&e.gusts<=18?"wind-moderate":e.gusts>=19&&e.gusts<=25?"wind-strong":"wind-extreme",o+=`<div class="windguru-cell ${n}">${e.gusts}</div>`}),o+="</div>",o+='<div class="windguru-data-row">',n.forEach(e=>{const n=$(e.direction);o+=`<div class="windguru-cell"><span class="wind-arrow" style="display: block;">${n}</span><span style="font-size: 0.7rem;">${e.direction}</span></div>`}),o+="</div>",o+='<div class="windguru-data-row">',n.forEach(e=>{const n=e.temp>=18?"temp-positive":"temp-negative";o+=`<div class="windguru-cell ${n}">${e.temp}°</div>`}),o+="</div>",o+='<div class="windguru-data-row">',n.forEach(e=>{const n=0===e.precipitation?"precipitation-none":"precipitation";o+=`<div class="windguru-cell ${n}">${e.precipitation}</div>`}),o+="</div>",t&&(o+='<div class="windguru-data-row">',n.forEach(e=>{let n="",t="-";void 0!==e.wave&&(0===e.wave?(n="wave-none",t="0m"):(n=e.wave>1.5?"wave-high":"wave-low",t=`${e.wave}m`)),o+=`<div class="windguru-cell ${n}">${t}</div>`}),o+="</div>"),o+="</div>"}),o+="</div>",o+="</div>",o+="</div>",o+="</div>",o}(o,s):""}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `}function S(e){const n=document.getElementById("spotContainer"),t=document.getElementById("loadingMessage"),o=document.getElementById("errorMessage");g(),t&&(t.style.display="none"),o&&(o.style.display="none");const l=i;s=null,a="",d=null;let c=null;const v=l&&l.embeddedMap&&e.embeddedMap&&l.embeddedMap===e.embeddedMap;if(v){const e=document.querySelector(".spot-embedded-map-frame");e&&e.firstElementChild&&(c=e.firstElementChild)}if(e){if(n.innerHTML=T(e),v&&c){const e=document.querySelector(".spot-embedded-map-frame");e&&(e.innerHTML="",e.appendChild(c))}document.title=`${e.name} - VARUN.SURF`,function(){const e=document.querySelectorAll(".forecast-tab");if(0===e.length)return;const n=localStorage.getItem("forecastViewPreference")||"table",t=document.querySelector(".table-view"),i=document.querySelector(".windguru-view");e.forEach(e=>{e.dataset.tab===n?e.classList.add("active"):e.classList.remove("active")}),"table"===n?(t&&t.classList.add("active"),i&&i.classList.remove("active")):"windguru"===n&&(t&&t.classList.remove("active"),i&&i.classList.add("active")),e.forEach(n=>{n.addEventListener("click",()=>{const o=n.dataset.tab;localStorage.setItem("forecastViewPreference",o),e.forEach(e=>e.classList.remove("active")),n.classList.add("active"),"table"===o?(t&&t.classList.add("active"),i&&i.classList.remove("active")):"windguru"===o&&(t&&t.classList.remove("active"),i&&i.classList.add("active"))})});const o=document.querySelector(".windguru-data-container");if(o){let e,n,t=!1;o.addEventListener("mousedown",i=>{t=!0,o.classList.add("dragging"),e=i.pageX-o.offsetLeft,n=o.scrollLeft}),o.addEventListener("mouseleave",()=>{t=!1,o.classList.remove("dragging")}),o.addEventListener("mouseup",()=>{t=!1,o.classList.remove("dragging")}),o.addEventListener("mousemove",i=>{if(!t)return;i.preventDefault();const s=2*(i.pageX-o.offsetLeft-e);o.scrollLeft=n-s})}}()}var w;i=e,u&&(w=u,!r&&w&&(r=setInterval(async()=>{try{const e=await m(w);if(!p(e))return;i&&JSON.stringify(e)===JSON.stringify(i)||S(e)}catch(e){e&&404===e.status?(f(),H("spotNotFound")):console.warn("Background refresh failed:",e)}},6e4)))}function H(t){const i=document.getElementById("loadingMessage"),o=document.getElementById("errorMessage"),l=document.getElementById("errorTitle"),c=document.getElementById("errorDescription");g(),f(),i&&(i.style.display="none"),o.style.display="flex";"string"==typeof t&&(e.en&&Object.prototype.hasOwnProperty.call(e.en,t)||e.pl&&Object.prototype.hasOwnProperty.call(e.pl,t))?(s=t,a=n(t)):(s=null,a="string"==typeof t?t:""),l.textContent=n("error"),c.textContent=a,d=null}function D(){const e=document.getElementById("appInfoModalTitle");e&&(e.textContent=n("appInfoModalTitle"));const t=document.getElementById("aiModalDisclaimer");t&&(t.textContent=n("aiDisclaimer"));const o=document.getElementById("aiModalTitle");o&&i&&(o.textContent=`${i.name} - ${n("aiAnalysisTitle")}`);const l=document.getElementById("appInfoDescription");l&&(l.textContent=n("appInfoDescription"));const c=document.getElementById("appInfoContactTitle");c&&(c.textContent=n("appInfoContactTitle"));const r=document.getElementById("appInfoContactText");r&&(r.innerHTML=n("appInfoContactText"));const u=document.getElementById("appInfoNewSpotTitle");u&&(u.textContent=n("appInfoNewSpotTitle"));const v=document.getElementById("appInfoNewSpotText");v&&(v.innerHTML=n("appInfoNewSpotText"));const m=document.getElementById("appInfoCollaborationTitle");m&&(m.textContent=n("appInfoCollaborationTitle"));const p=document.getElementById("appInfoCollaborationText");p&&(p.innerHTML=n("appInfoCollaborationText"));const g=document.getElementById("infoToggleLabel");g&&(g.textContent=n("infoButtonLabel"));const f=document.getElementById("loadingMessage");if(f&&"none"!==f.style.display){const e=document.getElementById("loadingText");if(e){const t=d||"loadingSpotData";e.textContent=n(t)}}const w=document.getElementById("errorMessage");if(w&&"none"!==w.style.display){const e=document.getElementById("errorTitle"),t=document.getElementById("errorDescription");e&&(e.textContent=n("error")),t&&(s&&(a=n(s)),t.textContent=a)}}function A(){const e=document.getElementById("infoToggle");e&&e.addEventListener("click",()=>{!function(){const e=document.getElementById("appInfoModal");e&&(e.classList.add("active"),document.body.style.overflow="hidden")}()})}function N(){const e=document.getElementById("modelDropdown"),n=document.getElementById("modelDropdownMenu"),t=document.getElementById("modelDropdownText");if(!e||!n||!t)return;const i=v();t.textContent=i.toUpperCase();const o=document.querySelectorAll("#modelDropdownMenu .dropdown-option");o.forEach(s=>{s.dataset.value===i&&s.classList.add("selected"),s.addEventListener("click",()=>{const i=s.dataset.value;var a;a=i,sessionStorage.setItem("forecastModel",a),t.textContent=i.toUpperCase(),o.forEach(e=>e.classList.remove("selected")),s.classList.add("selected"),n.classList.remove("open"),e.classList.remove("open"),u&&(w("loadingSpotData"),m(u).then(e=>{p(e)?S(e):(w("loadingForecast"),y(u))}).catch(e=>{e&&404===e.status?H("spotNotFound"):H("errorLoadingSpot")}))})}),e.addEventListener("click",()=>{n.classList.toggle("open"),e.classList.toggle("open")}),document.addEventListener("click",t=>{e.contains(t.target)||n.contains(t.target)||(n.classList.remove("open"),e.classList.remove("open"))})}async function W(e){const n=document.getElementById("sponsorsContainer");if(!n)return;const t=await async function(e){try{const n=await fetch(`/api/v1/sponsors/${e}`);return n.ok&&await n.json()||null}catch(n){return console.error("Error fetching sponsor:",n),null}}(e);if(!t)return void(n.innerHTML="");const i=`\n        <div class="sponsors-container">\n            <div class="sponsors-list">\n                <div class="sponsor-item">\n                    <a href="${t.link}" target="_blank" rel="noopener noreferrer" class="sponsor-link">\n                        <span class="sponsor-name">${t.name}</span>\n                    </a>\n                </div>\n            </div>\n        </div>\n    `;n.innerHTML=i}window.openAIModal=function(e){if(!i)return;const t=C(i);if(!t)return;const o=document.getElementById("aiModal"),s=document.getElementById("aiModalTitle"),a=document.getElementById("aiAnalysisContent");s.textContent=`${e} - ${n("aiAnalysisTitle")}`,a.innerHTML=`<p>${t}</p>`;const d=document.getElementById("aiModalDisclaimer");d&&(d.textContent=n("aiDisclaimer")),o.classList.add("active"),document.body.style.overflow="hidden"},window.closeAIModal=B,window.openInfoModal=function(e){if(!i||!i.spotInfo)return;const t=document.getElementById("infoModal"),o=document.getElementById("infoModalSpotName"),s=document.getElementById("spotInfoContent");o.textContent=`${e}`;const a=L(i);s.innerHTML=`\n                <div class="info-grid">\n                    <div class="info-item" style="grid-column: 1 / -1;">\n                        <div class="info-label">${n("overviewLabel")}</div>\n                        <div class="info-value">${a.description}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${n("spotTypeLabel")}</div>\n                        <div class="info-value">${a.type}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${n("bestWindLabel")}</div>\n                        <div class="info-value">${a.bestWind}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${n("waterTempLabel")}</div>\n                        <div class="info-value">${a.waterTemp}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${n("experienceLabel")}</div>\n                        <div class="info-value">${a.experience}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${n("launchTypeLabel")}</div>\n                        <div class="info-value">${a.launch}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${n("hazardsLabel")}</div>\n                        <div class="info-value">${a.hazards}</div>\n                    </div>\n                    <div class="info-item" style="grid-column: 1 / -1;">\n                        <div class="info-label">${n("seasonLabel")}</div>\n                        <div class="info-value">${a.season}</div>\n                    </div>\n                </div>\n            `,t.classList.add("active"),document.body.style.overflow="hidden"},window.closeInfoModal=M,window.openIcmModal=function(e,n){const t=document.getElementById("icmModal"),i=document.getElementById("icmModalTitle"),o=document.getElementById("icmImage");i.textContent=`${e} - ICM Forecast`,o.src=n,t.classList.add("active"),document.body.style.overflow="hidden"},window.closeIcmModal=x,document.addEventListener("DOMContentLoaded",async function(){!function(){const e=localStorage.getItem("theme")||"dark",n=document.getElementById("themeToggle"),t=document.getElementById("themeIcon");function i(e){document.documentElement.setAttribute("data-theme",e),t.innerHTML="light"===e?'<path d="M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5,5-2.24,5-5-2.24-5-5-5Zm0,7c-1.1,0-2-.9-2-2s.9-2,2-2,2,.9,2,2-.9,2-2,2Zm4.95-6.95c-.59-.59-.59-1.54,0-2.12l1.41-1.41c.59-.59,1.54-.59,2.12,0,.59,.59,.59,1.54,0,2.12l-1.41,1.41c-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44ZM7.05,16.95c.59,.59,.59,1.54,0,2.12l-1.41,1.41c-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44c-.59-.59-.59-1.54,0-2.12l1.41-1.41c.59-.59,1.54-.59,2.12,0ZM3.51,5.64c-.59-.59-.59-1.54,0-2.12,.59-.59,1.54-.59,2.12,0l1.41,1.41c.59,.59,.59,1.54,0,2.12-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44l-1.41-1.41Zm16.97,12.73c.59,.59,.59,1.54,0,2.12-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44l-1.41-1.41c-.59-.59-.59-1.54,0-2.12,.59-.59,1.54-.59,2.12,0l1.41,1.41Zm3.51-6.36c0,.83-.67,1.5-1.5,1.5h-2c-.83,0-1.5-.67-1.5-1.5s.67-1.5,1.5-1.5h2c.83,0,1.5,.67,1.5,1.5ZM3.5,13.5H1.5c-.83,0-1.5-.67-1.5-1.5s.67-1.5,1.5-1.5H3.5c.83,0,1.5,.67,1.5,1.5s-.67,1.5-1.5,1.5ZM10.5,3.5V1.5c0-.83,.67-1.5,1.5-1.5s1.5,.67,1.5,1.5V3.5c0,.83-.67,1.5-1.5,1.5s-1.5-.67-1.5-1.5Zm3,17v2c0,.83-.67,1.5-1.5,1.5s-1.5-.67-1.5-1.5v-2c0-.83,.67-1.5-1.5-1.5s1.5,.67,1.5,1.5Z"/>':'<path d="M15,24a12.021,12.021,0,0,1-8.914-3.966,11.9,11.9,0,0,1-3.02-9.309A12.122,12.122,0,0,1,13.085.152a13.061,13.061,0,0,1,5.031.205,2.5,2.5,0,0,1,1.108,4.226c-4.56,4.166-4.164,10.644.807,14.41a2.5,2.5,0,0,1-.7,4.32A13.894,13.894,0,0,1,15,24Z"/>',localStorage.setItem("theme",e)}i(e),n&&n.addEventListener("click",()=>{i("dark"===document.documentElement.getAttribute("data-theme")?"light":"dark")})}(),function(){const e=localStorage.getItem("language")||"en";o=e;const n=document.getElementById("languageToggle"),t=document.getElementById("langCode");D(),n&&t&&(t.textContent=e.toUpperCase(),n.addEventListener("click",()=>{const e="en"===o?"pl":"en";o=e,t.textContent=e.toUpperCase(),localStorage.setItem("language",e),D(),i&&S(i)}))}(),function(){const e=document.getElementById("infoModalClose"),n=document.getElementById("aiModalClose"),t=document.getElementById("icmModalClose"),i=document.getElementById("appInfoModalClose");e&&e.addEventListener("click",M),n&&n.addEventListener("click",B),t&&t.addEventListener("click",x),i&&i.addEventListener("click",k),document.querySelectorAll(".modal-overlay").forEach(e=>{e.addEventListener("click",n=>{n.target===e&&(M(),B(),x(),k())})})}(),A(),function(){const e=document.getElementById("hamburgerMenu"),n=document.getElementById("headerControls"),t=document.querySelector(".main-content");e&&e.addEventListener("click",()=>{n.classList.contains("show")?(n.classList.remove("show"),e.classList.remove("active"),e.textContent="☰",t&&t.classList.remove("menu-open")):(n.classList.add("show"),e.classList.add("active"),e.textContent="✕",t&&t.classList.add("menu-open"))})}(),function(){const e=document.getElementById("headerLogo"),n=document.getElementById("headerTitle");function t(){const e=localStorage.getItem("selectedCountry")||"all";if("all"===e)window.location.href="/";else{const n=e.toLowerCase().replace(/\s+/g,"").replace(/[^a-z]/g,"");window.location.href=`/country/${n}`}}e&&e.addEventListener("click",t),n&&n.addEventListener("click",t)}(),function(){let e,n=window.innerWidth<=768,t=window.innerWidth<=1430;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{const e=window.innerWidth<=768,o=window.innerWidth<=1430;(e!==n||o!==t)&&(n=e,t=o,i&&S(i))},150)})}(),N();const e=function(){const e=window.location.pathname.split("/"),n=e.indexOf("spot");return-1!==n&&e.length>n+1?e[n+1]:null}();if(u=e,!e)return void H("invalidSpotId");w("loadingSpotData");const n=Date.now();try{const t=await m(e),i=2e3-(Date.now()-n);i>0&&await new Promise(e=>setTimeout(e,i)),W(e),p(t)?S(t):(w("loadingForecast"),y(e))}catch(t){t&&404===t.status?H("spotNotFound"):H("errorLoadingSpot")}});
