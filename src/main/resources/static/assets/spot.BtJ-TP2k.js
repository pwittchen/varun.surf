import"./styles.DRocxZpn.js";import{t as e,a as t,g as n}from"./translations.9G6Bls5y.js";let o=null,i="en",s=null,a="",d="loadingSpotData",l=null,c=null,r=null,u=null,m="conditions",v="dark",p="en";function f(){const e=sessionStorage.getItem("forecastModel");return!e||"gfs"!==e&&"ifs"!==e?"gfs":e}async function g(e){try{const t=f(),n=`/api/v1/spots/${e}${t?"/"+t:""}`,o=await fetch(n);if(!o.ok){const e=new Error(`HTTP error! status: ${o.status}`);throw e.status=o.status,e}return await o.json()}catch(t){throw console.error("Error fetching spot data:",t),t}}function w(e){return e&&Array.isArray(e.forecast)&&e.forecast.length>0}function y(){l&&(clearInterval(l),l=null),c&&(clearTimeout(c),c=null)}function b(){r&&(clearInterval(r),r=null)}function h(t){const n=document.getElementById("loadingMessage"),o=document.getElementById("loadingText"),i=document.getElementById("errorMessage");d=t,i&&(i.style.display="none"),n&&(n.style.display="block"),o&&(o.textContent=e(t))}function $(e){y();let t=!1;l=setInterval(async()=>{if(!t){t=!0;try{const t=await g(e);w(t)&&(y(),R(t))}catch(n){n&&404===n.status&&(y(),K("spotNotFound"))}finally{t=!1}}},5e3),c=setTimeout(()=>{y(),K("forecastTimeout")},3e4)}function E(e){return{N:"‚Üì",NE:"‚Üô",E:"‚Üê",SE:"‚Üñ",S:"‚Üë",SW:"‚Üó",W:"‚Üí",NW:"‚Üò"}[e]||"‚Ä¢"}function I(t){if(!t||"string"!=typeof t)return"";const n={Mon:"dayMon",Tue:"dayTue",Wed:"dayWed",Thu:"dayThu",Fri:"dayFri",Sat:"daySat",Sun:"daySun"}[t.substring(0,3)];return n?e(n):t}function L(e){if(!e||"string"!=typeof e)return e||"";const t=e.split(" ").filter(Boolean);if(t.length<5)return e;const[n,o,i,,s]=t,a=I(n),d=o.padStart(2,"0");if(window.innerWidth<=768){const e=s.split(":")[0];return`${a.substring(0,2)} ${e}`.trim()}return`${d}. ${a} ${s}`.trim()}function C(t){if(!t)return"";const n=t.split(" ").filter(Boolean);if(n.length<4)return"";const o=n[0],i=n[1],s=n[2];return`${I(o).substring(0,3)} ${i}/${function(t){if(!t||"string"!=typeof t)return"";const n={Jan:"monthJan",Feb:"monthFeb",Mar:"monthMar",Apr:"monthApr",May:"monthMay",Jun:"monthJun",Jul:"monthJul",Aug:"monthAug",Sep:"monthSep",Oct:"monthOct",Nov:"monthNov",Dec:"monthDec"}[t];return n?e(n):t}(s)}`}function M(e){if(!e)return new Date;try{const t=e.trim().split(/\s+/);if(t.length>=5){const e=parseInt(t[1]),n=t[2],o=parseInt(t[3]),i=t[4].split(":"),s=parseInt(i[0]),a=parseInt(i[1]),d={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11}[n];if(void 0!==d){const t=new Date(o,d,e,s,a);if(!isNaN(t.getTime()))return t}}}catch(t){console.warn("Error parsing forecast date:",e,t)}return new Date}function x(e){if(!e)return null;return"pl"===(localStorage.getItem("language")||"en")?e.spotInfoPL:e.spotInfo}function B(e){if(!e)return"";const t=e=>"string"==typeof e&&e.trim().length>0?e:"",n=t(e.aiAnalysisEn),o=t(e.aiAnalysisPl),s=t(e.aiAnalysis);return"pl"===(i||localStorage.getItem("language")||"en")?o||n||s:n||o||s}function T(){document.getElementById("infoModal").classList.remove("active"),document.body.style.overflow="auto"}function k(){document.getElementById("aiModal").classList.remove("active"),document.body.style.overflow="auto"}function S(){document.getElementById("icmModal").classList.remove("active"),document.body.style.overflow="auto"}const D=[];let A=!1;function H(){document.getElementById("embedModal").classList.remove("active"),document.body.style.overflow="auto",P()}function Z(e,t){return`${function(){try{return window.location.origin.replace(/\/$/,"")}catch(e){return"https://varun.surf"}}()}/embed?spotId=${u}&theme=${e}&view=${t}&lang=${p}`}function V(){if(!u)return;const e=`<iframe src="${Z(v,m)}" width="100%" height="500" frameborder="0" style="border-radius: 12px; max-width: 600px;"></iframe>`,t=document.getElementById("embedCode"),n=document.getElementById("embedPreview");t&&(t.value=e),n&&(n.src=Z(v,m))}function W(){const t=document.getElementById("embedCode"),n=document.getElementById("copyEmbedCode"),o=document.getElementById("copyButtonText");t&&n&&(t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value).then(()=>{n.classList.add("copied"),o&&(o.textContent=e("embedCopyButtonSuccess")),setTimeout(()=>{n.classList.remove("copied"),o&&(o.textContent=e("embedCopyButtonDefault"))},2e3)}).catch(t=>{console.error("Failed to copy:",t);try{document.execCommand("copy"),n.classList.add("copied"),o&&(o.textContent=e("embedCopyButtonSuccess")),setTimeout(()=>{n.classList.remove("copied"),o&&(o.textContent=e("embedCopyButtonDefault"))},2e3)}catch(i){alert(e("embedCopyButtonError"))}}))}function N(e,t){e.querySelectorAll(".dropdown-option").forEach(e=>{e.classList.toggle("selected",e.dataset.value===t)})}function U(t,n,o){const i=document.getElementById(t),s=document.getElementById(n);if(!i||!s)return;const a=i.querySelector(`.dropdown-option[data-value="${o}"]`);if(a){const t=a.dataset.labelKey;s.textContent=t?e(t):a.textContent}}function F(t){const n=document.getElementById(t);n&&n.querySelectorAll(".dropdown-option").forEach(t=>{const n=t.dataset.labelKey;n&&(t.textContent=e(n))})}function q(){F("embedViewDropdownMenu"),F("embedThemeDropdownMenu"),U("embedViewDropdownMenu","embedViewDropdownText",m),U("embedThemeDropdownMenu","embedThemeDropdownText",v)}function P(){D.forEach(({button:e,menu:t})=>{e.classList.remove("open"),e.setAttribute("aria-expanded","false"),t.classList.remove("open")})}function O(){const e=document.getElementById("copyEmbedCode");e&&e.addEventListener("click",W),function(){if(A)return;A=!0,[{buttonId:"embedViewDropdown",menuId:"embedViewDropdownMenu",textId:"embedViewDropdownText",getSelection:()=>m,setSelection:e=>{m=e,V()}},{buttonId:"embedThemeDropdown",menuId:"embedThemeDropdownMenu",textId:"embedThemeDropdownText",getSelection:()=>v,setSelection:e=>{v=e,V()}}].forEach(e=>{const t=document.getElementById(e.buttonId),n=document.getElementById(e.menuId),o=document.getElementById(e.textId);t&&n&&o&&(D.push({button:t,menu:n}),t.addEventListener("click",e=>{e.stopPropagation();const o=!t.classList.contains("open");P(),o?(t.classList.add("open"),n.classList.add("open"),t.setAttribute("aria-expanded","true")):t.setAttribute("aria-expanded","false")}),n.querySelectorAll(".dropdown-option").forEach(t=>{t.addEventListener("click",o=>{o.stopPropagation();const i=t.dataset.value;e.setSelection(i),N(n,i),U(e.menuId,e.textId,i),P()})}),N(n,e.getSelection()))}),document.addEventListener("click",e=>{const t=e.target instanceof Element?e.target:e.target?.parentElement;t&&t.closest(".embed-dropdown")||P()}),q()}()}function J(){document.getElementById("appInfoModal").classList.remove("active"),document.body.style.overflow="auto"}function j(e){return e.some(e=>e.wind>=12)}function z(){return"true"===localStorage.getItem("filterWindyDays")}function _(t){const o=n(t.country),i=t.forecastHourly&&t.forecastHourly.length>0?t.forecastHourly:t.forecast||[],s=i&&i.some(e=>void 0!==e.wave),a=window.matchMedia("(min-width: 769px)").matches,d="string"==typeof t.spotPhotoUrl?t.spotPhotoUrl.trim():"",l=a&&d.length>0;let c="";if(t.currentConditions&&void 0!==t.currentConditions.wind){let n,o;const i=(t.currentConditions.wind+t.currentConditions.gusts)/2;i<12?(n="weak-wind",o="wind-weak"):i>=12&&i<18?(n="moderate-wind",o="wind-moderate"):i>=18&&i<=22?(n="strong-wind",o="wind-strong"):(n="extreme-wind",o="wind-extreme");const a=t.currentConditions.temp>=20?"temp-positive":"temp-negative",d=E(t.currentConditions.direction);let l="",r="-";void 0!==t.currentConditions.wave&&(0===t.currentConditions.wave?(l="wave-none",r="0m"):(l=t.currentConditions.wave>1.5?"wave-high":"wave-low",r=`${t.currentConditions.wave}m`)),c=`\n                    <tr class="${n}" style="border-bottom: 2px solid #404040;">\n                        <td>\n                            <div class="live-indicator">\n                                <strong class="live-text">${e("nowLabel")}</strong>\n                                <div class="live-dot"></div>\n                            </div>\n                        </td>\n                        <td class="${o}">${t.currentConditions.wind} kts</td>\n                        <td class="${o}">${t.currentConditions.gusts} kts</td>\n                        <td class="${o}">\n                            <span class="wind-arrow">${d}</span> ${t.currentConditions.direction}\n                        </td>\n                        <td class="${a}">${t.currentConditions.temp}¬∞C</td>\n                        <td>-</td>\n                        ${s?`<td class="${l}">${r}</td>`:""}\n                    </tr>\n                `}let r="";if(i&&i.length>0){let e=null,t=0,n=i.filter(e=>{if(!e.date)return!1;const t=e.date.split(" ")[4];if(!t)return!1;const n=parseInt(t.split(":")[0]);return n>=6&&n<=21});if(z()){const e={};n.forEach(t=>{const n=t.date?t.date.split(" ").slice(0,4).join(" "):"Unknown";e[n]||(e[n]=[]),e[n].push(t)}),n=[],Object.keys(e).forEach(t=>{const o=e[t];j(o)&&n.push(...o)})}n.forEach(n=>{let o="",i="";n.wind<12?(o="weak-wind",i="wind-weak"):n.wind>=12&&n.wind<=18?(o="moderate-wind",i="wind-moderate"):n.wind>=19&&n.wind<=25?(o="strong-wind",i="wind-strong"):(o="extreme-wind",i="wind-extreme");const a=n.temp>=18?"temp-positive":"temp-negative",d=E(n.direction),l=0===n.precipitation?"precipitation-none":"precipitation";let c="",u="-";void 0!==n.wave&&(0===n.wave?(c="wave-none",u="0m"):(c=n.wave>1.5?"wave-high":"wave-low",u=`${n.wave}m`));const m=n.date?n.date.split(" ")[0]:null;e&&m&&e!==m&&(t=(t+1)%2);const v=`border-left: 3px solid ${0===t?"rgba(74, 158, 255, 0.4)":"rgba(255, 158, 74, 0.4)"};`;e=m,r+=`\n                        <tr class="${o}" style="${v}">\n                            <td><strong>${L(n.date)}</strong></td>\n                            <td class="${i}">${n.wind} kts</td>\n                            <td class="${i}">${n.gusts} kts</td>\n                            <td class="${i}">\n                                <span class="wind-arrow">${d}</span> ${n.direction}\n                            </td>\n                            <td class="${a}">${n.temp}¬∞C</td>\n                            <td class="${l}">${n.precipitation} mm</td>\n                            ${s?`<td class="${c}">${u}</td>`:""}\n                        </tr>\n                    `})}let u="",m=null,v="";if(t.currentConditions&&void 0!==t.currentConditions.wind)m={wind:t.currentConditions.wind,gusts:t.currentConditions.gusts,direction:t.currentConditions.direction,temp:t.currentConditions.temp,precipitation:0,isCurrent:!0},v=e("nowLabel");else if(i&&i.length>0){const e=function(e){if(!e||0===e.length)return null;const t=new Date;let n=e[0],o=Math.abs(M(e[0].date)-t);for(let i=1;i<e.length;i++){const s=M(e[i].date),a=Math.abs(s-t);a<o&&(o=a,n=e[i])}return n}(i);e&&(m={wind:e.wind,gusts:e.gusts,direction:e.direction,temp:e.temp,precipitation:e.precipitation||0,isCurrent:!1},v=L(e.date))}if(m){E(m.direction);const t=(m.wind+m.gusts)/2;let n="";n=t<12?"wind-weak":t>=12&&t<18?"wind-moderate":t>=18&&t<=25?"wind-strong":"wind-extreme",u=`\n                <div class="current-conditions-card">\n                    <div class="conditions-header">\n                        <div class="conditions-label">${v}</div>\n                        ${m.isCurrent?'<div class="live-dot"></div>':""}\n                    </div>\n                    <div class="conditions-main">\n                        <div class="wind-arrow-large ${n}" style="transform: rotate(${p=m.direction,{N:0,NE:45,E:90,SE:135,S:180,SW:225,W:270,NW:315}[p]||0}deg);">\n                            ‚Üì\n                        </div>\n                        <div class="wind-details">\n                            <div class="wind-speed ${n}">${m.wind} kts</div>\n                            <div class="wind-label">${e("windLabel")}</div>\n                        </div>\n                    </div>\n                    <div class="conditions-grid">\n                        <div class="condition-item">\n                            <div class="condition-label">${e("gustsLabel")}</div>\n                            <div class="condition-value ${n}">${m.gusts} kts</div>\n                        </div>\n                        <div class="condition-item">\n                            <div class="condition-label">${e("directionLabel")}</div>\n                            <div class="condition-value">${m.direction}</div>\n                        </div>\n                        <div class="condition-item">\n                            <div class="condition-label">${e("temperatureLabel")}</div>\n                            <div class="condition-value ${m.temp>=18?"temp-positive":"temp-negative"}">${m.temp}¬∞C</div>\n                        </div>\n                        <div class="condition-item">\n                            <div class="condition-label">${e("precipitationLabel")}</div>\n                            <div class="condition-value ${0===m.precipitation?"precipitation-none":"precipitation"}">${m.precipitation} mm</div>\n                        </div>\n                    </div>\n                </div>\n            `}var p;let f="";if(t.spotInfo){const n=x(t),o=t.coordinates?`<div class="info-item" style="grid-column: 1 / -1;">\n                   <div class="info-label">${e("coordinatesLabel")}</div>\n                   <div class="info-value">${t.coordinates.lat.toFixed(6)}, ${t.coordinates.lon.toFixed(6)}</div>\n               </div>`:"";f=`\n                <div class="spot-info-card">\n                    <div class="info-grid">\n                        <div class="info-item" style="grid-column: 1 / -1;">\n                            <div class="info-label">${e("overviewLabel")}</div>\n                            <div class="info-value">${n.description}</div>\n                        </div>\n                        <div class="info-item">\n                            <div class="info-label">${e("spotTypeLabel")}</div>\n                            <div class="info-value">${n.type}</div>\n                        </div>\n                        <div class="info-item">\n                            <div class="info-label">${e("bestWindLabel")}</div>\n                            <div class="info-value">${n.bestWind}</div>\n                        </div>\n                        <div class="info-item">\n                            <div class="info-label">${e("waterTempLabel")}</div>\n                            <div class="info-value">${n.waterTemp}</div>\n                        </div>\n                        <div class="info-item">\n                            <div class="info-label">${e("experienceLabel")}</div>\n                            <div class="info-value">${n.experience}</div>\n                        </div>\n                        <div class="info-item">\n                            <div class="info-label">${e("launchTypeLabel")}</div>\n                            <div class="info-value">${n.launch}</div>\n                        </div>\n                        <div class="info-item">\n                            <div class="info-label">${e("hazardsLabel")}</div>\n                            <div class="info-value">${n.hazards}</div>\n                        </div>\n                        <div class="info-item" style="grid-column: 1 / -1;">\n                            <div class="info-label">${e("seasonLabel")}</div>\n                            <div class="info-value">${n.season}</div>\n                        </div>\n                        ${o}\n                    </div>\n                </div>\n            `}const g=a&&t.embeddedMap&&t.embeddedMap.trim().length>0;let w="";g&&l?w=`\n                <div class="spot-media-switcher">\n                    <div class="spot-media-tabs">\n                        <button type="button" class="spot-media-tab active" data-media="map">\n                            <svg class="tab-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12,12A4,4,0,1,0,8,8,4,4,0,0,0,12,12Zm0-6a2,2,0,1,1-2,2A2,2,0,0,1,12,6Zm8.66,3.157-.719-.239A8,8,0,0,0,12,0,7.993,7.993,0,0,0,4.086,9.092a5.045,5.045,0,0,0-2.548,1.3A4.946,4.946,0,0,0,0,14v4.075a5.013,5.013,0,0,0,3.6,4.8l2.87.9A4.981,4.981,0,0,0,7.959,24a5.076,5.076,0,0,0,1.355-.186l5.78-1.71a2.987,2.987,0,0,1,1.573,0l2.387.8A4,4,0,0,0,24,19.021V13.872A5.015,5.015,0,0,0,20.66,9.156ZM7.758,3.762a5.987,5.987,0,0,1,8.484,0,6.037,6.037,0,0,1,.011,8.5L12.7,15.717a.992.992,0,0,1-1.389,0L7.758,12.277A6.04,6.04,0,0,1,7.758,3.762ZM22,19.021a1.991,1.991,0,0,1-.764,1.572,1.969,1.969,0,0,1-1.626.395L17.265,20.2a5.023,5.023,0,0,0-2.717-.016L8.764,21.892a3,3,0,0,1-1.694-.029l-2.894-.9A3.013,3.013,0,0,1,2,18.075V14a2.964,2.964,0,0,1,.92-2.163,3.024,3.024,0,0,1,1.669-.806A8.021,8.021,0,0,0,6.354,13.7l3.567,3.453a2.983,2.983,0,0,0,4.174,0l3.563-3.463a7.962,7.962,0,0,0,1.813-2.821l.537.178A3.006,3.006,0,0,1,22,13.872Z"/></svg>\n                            <span>${e("mapTabLabel")}</span>\n                        </button>\n                        <button type="button" class="spot-media-tab" data-media="photo">\n                            <svg class="tab-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M19,0H5A5.006,5.006,0,0,0,0,5V19a5.006,5.006,0,0,0,5,5H19a5.006,5.006,0,0,0,5-5V5A5.006,5.006,0,0,0,19,0ZM5,2H19a3,3,0,0,1,3,3V19a2.951,2.951,0,0,1-.3,1.285l-9.163-9.163a5,5,0,0,0-7.072,0L2,14.586V5A3,3,0,0,1,5,2ZM5,22a3,3,0,0,1-3-3V17.414l4.878-4.878a3,3,0,0,1,4.244,0L20.285,21.7A2.951,2.951,0,0,1,19,22Z"/><path fill="currentColor" d="M16,10.5A3.5,3.5,0,1,0,12.5,7,3.5,3.5,0,0,0,16,10.5Zm0-5A1.5,1.5,0,1,1,14.5,7,1.5,1.5,0,0,1,16,5.5Z"/></svg>\n                            <span>${e("photoTabLabel")}</span>\n                        </button>\n                    </div>\n                    <div class="spot-media-panels">\n                        <div class="spot-media-panel spot-media-panel-map active">\n                            <div class="spot-embedded-map">\n                                <div class="spot-embedded-map-frame">${t.embeddedMap}</div>\n                            </div>\n                        </div>\n                        <div class="spot-media-panel spot-media-panel-photo">\n                            <div class="spot-photo-frame">\n                                <img src="${d}" alt="${t.name} photo" loading="lazy" />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            `:g&&(w=`\n                <div class="spot-embedded-map">\n                    <div class="spot-embedded-map-frame">${t.embeddedMap}</div>\n                </div>\n            `);const y=B(t);let b="";y&&(b=`\n                <div class="ai-analysis-card">\n                    <div class="ai-analysis">\n                        <p>${y}</p>\n                    </div>\n                    <div class="modal-disclaimer">${e("aiDisclaimer")}</div>\n                </div>\n            `);let h="";if(t.sponsors&&t.sponsors.length>0){let e="";for(const n of t.sponsors)e+=`\n                <div class="sponsor-item">\n                    <a href="${n.link}" target="_blank" rel="noopener noreferrer" class="sponsor-link">\n                        ${n.name}\n                    </a>\n                </div>\n            `;h=`\n                <div class="sponsors-card">\n                    <div class="sponsors-list">\n                        ${e}\n                    </div>\n                </div>\n            `}return`\n            <div class="spot-card" style="width: 100%;">\n                <div class="spot-header" style="margin-left: 0;">\n                    <div class="spot-title">\n                        <h2 class="spot-name spot-name-single">${t.name}</h2>\n                        <div class="last-updated">${t.lastUpdated||e("noData")}</div>\n                    </div>\n                    <div class="spot-meta">\n                        <span class="country-tag">${o} ${e(t.country.replace(/\s+/g,""))}</span>\n                    </div>\n                </div>\n                <div class="external-links">\n                    ${t.spotInfo?`<span class="external-link info-link" onclick="openInfoModal('${t.name}')"></span>`:""}\n                    ${t.windguruUrl?`<a href="${t.windguruUrl}" target="_blank" class="external-link">WG</a>`:""}\n                    ${t.windfinderUrl?`<a href="${t.windfinderUrl}" target="_blank" class="external-link">WF</a>`:""}\n                    ${t.icmUrl?`<span class="external-link" onclick="openIcmModal('${t.name}', '${t.icmUrl}')">ICM</span>`:""}\n                    ${t.webcamUrl?`<a href="${t.webcamUrl}" target="_blank" class="external-link webcam-link">CAM</a>`:""}\n                    ${t.locationUrl?`<a href="${t.locationUrl}" target="_blank" class="external-link location-link">${e("mapLinkLabel")}</a>`:""}\n                    <span class="external-link embed-link" onclick="openEmbedModal()">${e("embedLinkLabel")}</span>\n                    ${y?`<span class="external-link ai-link" onclick="openAIModal('${t.name}')">AI</span>`:""}\n                </div>\n\n                <div class="spot-detail-container">\n                    <div class="spot-detail-left">\n                        ${u}\n                        ${f}\n                        ${b}\n                        ${h}\n                    </div>\n                    <div class="spot-detail-right">\n                        ${w}\n                        ${a?`\n                        <div class="forecast-tabs-container">\n                            <div class="forecast-tabs">\n                                <button class="forecast-tab active" data-tab="table">\n                                    <svg class="tab-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                        <path d="M11,22H5c-2.757,0-5-2.243-5-5V9H11v13ZM24,7c0-2.757-2.243-5-5-5H5C2.243,2,0,4.243,0,7H24Zm-11,2v13h6c2.757,0,5-2.243,5-5V9H13Z" fill="currentColor"/>\n                                    </svg>\n                                    ${e("tableViewLabel")}\n                                </button>\n                                <button class="forecast-tab" data-tab="windguru">\n                                    <svg class="tab-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                        <path d="M5,22c-2.757,0-5-2.243-5-5V7C0,4.243,2.243,2,5,2V22Zm2-11H24V7c0-2.757-2.243-5-5-5H7V11Zm0,2v9h12c2.757,0,5-2.243,5-5v-4H7Z" fill="currentColor"/>\n                                    </svg>\n                                    ${e("windguruViewLabel")}\n                                </button>\n                            </div>\n                            <div class="filter-windy-days-container">\n                                <label class="filter-windy-days-label">\n                                    <input type="checkbox" id="filterWindyDaysCheckbox" ${z()?"checked":""} />\n                                    <span class="filter-text">${e("filterWindyDaysLabel")}</span>\n                                </label>\n                            </div>\n                        </div>\n                        `:""}\n                        <div class="forecast-view-container">\n                            <div class="forecast-view table-view active">\n                                ${z()&&""===r?`\n                                    <div class="no-windy-days-message">\n                                        <span class="no-windy-days-icon">üí®</span>\n                                        <p class="no-windy-days-text">${e("noWindyDaysMessage")}</p>\n                                    </div>\n                                `:`\n                                    <table class="weather-table">\n                                        <thead>\n                                            <tr>\n                                                <th>${e("dateHeader")}</th>\n                                                <th>${e("windHeader")}</th>\n                                                <th>${e("gustsHeader")}</th>\n                                                <th>${e("directionHeader")}</th>\n                                                <th>${e("tempHeader")}</th>\n                                                <th>${e("rainHeader")}</th>\n                                                ${s?`<th>${e("waveHeader")}</th>`:""}\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            ${c}\n                                            ${r}\n                                        </tbody>\n                                    </table>\n                                `}\n                            </div>\n                            ${a?function(t,n){if(!t||0===t.length)return"";const o={};t.forEach(e=>{const t=e.date?e.date.split(" ").slice(0,4).join(" "):"Unknown";o[t]||(o[t]=[]),o[t].push(e)});const i=z();let s="",a=!1;Object.keys(o).forEach(e=>{const t=o[e].filter(e=>{if(!e.date)return!1;const t=e.date.split(" ")[4];if(!t)return!1;const n=parseInt(t.split(":")[0]);return n>=6&&n<=21});if(0===t.length)return;if(i&&!j(t))return;a=!0;const d=C(t[0].date);s+='<div class="windguru-day-column">',s+=`<div class="windguru-day-header">${d}</div>`,s+='<div class="windguru-data-row">',t.forEach(e=>{const t=e.date?e.date.split(" ")[4]:"";s+=`<div class="windguru-cell windguru-time-cell">${t}</div>`}),s+="</div>",s+='<div class="windguru-data-row">',t.forEach(e=>{let t="";t=e.wind<12?"wind-weak":e.wind>=12&&e.wind<=18?"wind-moderate":e.wind>=19&&e.wind<=25?"wind-strong":"wind-extreme",s+=`<div class="windguru-cell ${t}">${e.wind}</div>`}),s+="</div>",s+='<div class="windguru-data-row">',t.forEach(e=>{let t="";t=e.gusts<12?"wind-weak":e.gusts>=12&&e.gusts<=18?"wind-moderate":e.gusts>=19&&e.gusts<=25?"wind-strong":"wind-extreme",s+=`<div class="windguru-cell ${t}">${e.gusts}</div>`}),s+="</div>",s+='<div class="windguru-data-row">',t.forEach(e=>{const t=E(e.direction);s+=`<div class="windguru-cell"><span class="wind-arrow" style="display: block;">${t}</span><span style="font-size: 0.7rem;">${e.direction}</span></div>`}),s+="</div>",s+='<div class="windguru-data-row">',t.forEach(e=>{const t=e.temp>=18?"temp-positive":"temp-negative";s+=`<div class="windguru-cell ${t}">${e.temp}¬∞</div>`}),s+="</div>",s+='<div class="windguru-data-row">',t.forEach(e=>{const t=0===e.precipitation?"precipitation-none":"precipitation";s+=`<div class="windguru-cell ${t}">${e.precipitation}</div>`}),s+="</div>",n&&(s+='<div class="windguru-data-row">',t.forEach(e=>{let t="",n="-";void 0!==e.wave&&(0===e.wave?(t="wave-none",n="0m"):(t=e.wave>1.5?"wave-high":"wave-low",n=`${e.wave}m`)),s+=`<div class="windguru-cell ${t}">${n}</div>`}),s+="</div>"),s+="</div>"});let d='<div class="forecast-view windguru-view">';return i&&!a?d+=`\n            <div class="no-windy-days-message">\n                <span class="no-windy-days-icon">üí®</span>\n                <p class="no-windy-days-text">${e("noWindyDaysMessage")}</p>\n            </div>\n        `:(d+='<div class="windguru-wrapper">',d+='<div class="windguru-labels">',d+='<div class="windguru-label-header"></div>',d+=`<div class="windguru-label">${e("timeLabel")}</div>`,d+=`<div class="windguru-label">${e("windHeader")}</div>`,d+=`<div class="windguru-label">${e("gustsHeader")}</div>`,d+=`<div class="windguru-label">${e("directionHeader")}</div>`,d+=`<div class="windguru-label">${e("tempHeader")}</div>`,d+=`<div class="windguru-label">${e("rainHeader")}</div>`,n&&(d+=`<div class="windguru-label">${e("waveHeader")}</div>`),d+="</div>",d+='<div class="windguru-data-container">',d+='<div class="windguru-data">',d+=s,d+="</div>",d+="</div>",d+="</div>"),d+="</div>",d}(i,s):""}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `}function R(e){const t=document.getElementById("spotContainer"),n=document.getElementById("loadingMessage"),i=document.getElementById("errorMessage");y(),n&&(n.style.display="none"),i&&(i.style.display="none");const l=o;s=null,a="",d=null;let c=null;const m=l&&l.embeddedMap&&e.embeddedMap&&l.embeddedMap===e.embeddedMap;if(m){const e=document.querySelector(".spot-embedded-map-frame");e&&e.firstElementChild&&(c=e.firstElementChild)}if(e){if(t.innerHTML=_(e),m&&c){const e=document.querySelector(".spot-embedded-map-frame");e&&(e.innerHTML="",e.appendChild(c))}document.title=`${e.name} - VARUN.SURF`,function(){const e=document.querySelectorAll(".forecast-tab");if(0===e.length)return;const t=localStorage.getItem("forecastViewPreference")||"table",n=document.querySelector(".table-view"),o=document.querySelector(".windguru-view");e.forEach(e=>{e.dataset.tab===t?e.classList.add("active"):e.classList.remove("active")}),"table"===t?(n&&n.classList.add("active"),o&&o.classList.remove("active")):"windguru"===t&&(n&&n.classList.remove("active"),o&&o.classList.add("active")),e.forEach(t=>{t.addEventListener("click",()=>{const i=t.dataset.tab;localStorage.setItem("forecastViewPreference",i),e.forEach(e=>e.classList.remove("active")),t.classList.add("active"),"table"===i?(n&&n.classList.add("active"),o&&o.classList.remove("active")):"windguru"===i&&(n&&n.classList.remove("active"),o&&o.classList.add("active"))})});const i=document.querySelector(".windguru-data-container");if(i){let e,t,n=!1;i.addEventListener("mousedown",o=>{n=!0,i.classList.add("dragging"),e=o.pageX-i.offsetLeft,t=i.scrollLeft}),i.addEventListener("mouseleave",()=>{n=!1,i.classList.remove("dragging")}),i.addEventListener("mouseup",()=>{n=!1,i.classList.remove("dragging")}),i.addEventListener("mousemove",o=>{if(!n)return;o.preventDefault();const s=2*(o.pageX-i.offsetLeft-e);i.scrollLeft=t-s})}}(),function(){const e=document.getElementById("filterWindyDaysCheckbox");if(!e)return;e.addEventListener("change",e=>{!function(e){localStorage.setItem("filterWindyDays",e?"true":"false")}(e.target.checked),o&&R(o)})}(),function(){const e=Array.from(document.querySelectorAll(".spot-media-tab"));if(0===e.length)return;const t=document.querySelector(".spot-media-panel-map"),n=document.querySelector(".spot-media-panel-photo");t&&n&&e.forEach(o=>{o.addEventListener("click",()=>{if(o.classList.contains("active"))return;const i=o.dataset.media;e.forEach(e=>e.classList.toggle("active",e===o)),t.classList.toggle("active","map"===i),n.classList.toggle("active","photo"===i)})})}()}var v;o=e,u&&(v=u,!r&&v&&(r=setInterval(async()=>{try{const e=await g(v);if(!w(e))return;o&&JSON.stringify(e)===JSON.stringify(o)||R(e)}catch(e){e&&404===e.status?(b(),K("spotNotFound")):console.warn("Background refresh failed:",e)}},6e4)))}function K(n){const o=document.getElementById("loadingMessage"),i=document.getElementById("errorMessage"),l=document.getElementById("errorTitle"),c=document.getElementById("errorDescription");y(),b(),o&&(o.style.display="none"),i.style.display="flex";"string"==typeof n&&(t.en&&Object.prototype.hasOwnProperty.call(t.en,n)||t.pl&&Object.prototype.hasOwnProperty.call(t.pl,n))?(s=n,a=e(n)):(s=null,a="string"==typeof n?n:""),l.textContent=e("error"),c.textContent=a,d=null}function X(){const t=document.getElementById("appInfoModalTitle");t&&(t.textContent=e("appInfoModalTitle"));const n=document.getElementById("embedModalTitle");n&&(n.textContent=e("embedModalTitle"));const i=document.getElementById("embedDescription");i&&(i.textContent=e("embedModalDescription")),q();const l=document.getElementById("embedPreviewTitle");l&&(l.textContent=e("embedPreviewTitle"));const c=document.getElementById("embedCodeTitle");c&&(c.textContent=e("embedCodeTitle"));const r=document.getElementById("copyButtonText");r&&(r.textContent=e("embedCopyButtonDefault"));const u=document.getElementById("aiModalDisclaimer");u&&(u.textContent=e("aiDisclaimer"));const m=document.getElementById("aiModalTitle");m&&o&&(m.textContent=`${o.name} - ${e("aiAnalysisTitle")}`);const v=document.getElementById("appInfoDescription");v&&(v.textContent=e("appInfoDescription"));const p=document.getElementById("appInfoContactTitle");p&&(p.textContent=e("appInfoContactTitle"));const f=document.getElementById("appInfoContactText");f&&(f.innerHTML=e("appInfoContactText"));const g=document.getElementById("appInfoNewSpotTitle");g&&(g.textContent=e("appInfoNewSpotTitle"));const w=document.getElementById("appInfoNewSpotText");w&&(w.innerHTML=e("appInfoNewSpotText"));const y=document.getElementById("appInfoCollaborationTitle");y&&(y.textContent=e("appInfoCollaborationTitle"));const b=document.getElementById("appInfoCollaborationText");b&&(b.innerHTML=e("appInfoCollaborationText"));const h=document.getElementById("infoToggleLabel");h&&(h.textContent=e("infoButtonLabel"));const $=document.getElementById("loadingMessage");if($&&"none"!==$.style.display){const t=document.getElementById("loadingText");if(t){const n=d||"loadingSpotData";t.textContent=e(n)}}const E=document.getElementById("errorMessage");if(E&&"none"!==E.style.display){const t=document.getElementById("errorTitle"),n=document.getElementById("errorDescription");t&&(t.textContent=e("error")),n&&(s&&(a=e(s)),n.textContent=a)}}function G(){const e=document.getElementById("infoToggle");e&&e.addEventListener("click",()=>{!function(){const e=document.getElementById("appInfoModal");e&&(e.classList.add("active"),document.body.style.overflow="hidden")}()})}function Q(){const e=document.getElementById("modelDropdown"),t=document.getElementById("modelDropdownMenu"),n=document.getElementById("modelDropdownText");if(!e||!t||!n)return;const o=f();n.textContent=o.toUpperCase();const i=document.querySelectorAll("#modelDropdownMenu .dropdown-option");i.forEach(s=>{s.dataset.value===o&&s.classList.add("selected"),s.addEventListener("click",()=>{const o=s.dataset.value;var a;a=o,sessionStorage.setItem("forecastModel",a),n.textContent=o.toUpperCase(),i.forEach(e=>e.classList.remove("selected")),s.classList.add("selected"),t.classList.remove("open"),e.classList.remove("open"),u&&(h("loadingSpotData"),g(u).then(e=>{w(e)?R(e):(h("loadingForecast"),$(u))}).catch(e=>{e&&404===e.status?K("spotNotFound"):K("errorLoadingSpot")}))})}),e.addEventListener("click",()=>{t.classList.toggle("open"),e.classList.toggle("open")}),document.addEventListener("click",n=>{e.contains(n.target)||t.contains(n.target)||(t.classList.remove("open"),e.classList.remove("open"))})}async function Y(){const e=function(){const e=window.location.pathname.split("/"),t=e.indexOf("spot");return-1!==t&&e.length>t+1?e[t+1]:null}();if(u=e,!e)return void K("invalidSpotId");h("loadingSpotData");const t=Date.now();try{const n=await g(e),o=2e3-(Date.now()-t);o>0&&await new Promise(e=>setTimeout(e,o)),w(n)?(R(n),function(e){const t=document.getElementById("sponsorsContainer");if(!t)return;if(!e.sponsors||0===e.sponsors.length)return void(t.innerHTML="");let n='<div class="sponsors-container"><div class="sponsors-list">';for(const o of e.sponsors)n+=`\n            <div class="sponsor-item">\n                <a href="${o.link}" target="_blank" rel="noopener noreferrer" class="sponsor-link">\n                    <span class="sponsor-name">${o.name}</span>\n                </a>\n            </div>\n        `;n+="</div></div>",t.innerHTML=n}(n)):(h("loadingForecast"),$(e))}catch(n){n&&404===n.status?K("spotNotFound"):K("errorLoadingSpot")}}window.openAIModal=function(t){if(!o)return;const n=B(o);if(!n)return;const i=document.getElementById("aiModal"),s=document.getElementById("aiModalTitle"),a=document.getElementById("aiAnalysisContent");s.textContent=`${t} - ${e("aiAnalysisTitle")}`,a.innerHTML=`<p>${n}</p>`;const d=document.getElementById("aiModalDisclaimer");d&&(d.textContent=e("aiDisclaimer")),i.classList.add("active"),document.body.style.overflow="hidden"},window.closeAIModal=k,window.openInfoModal=function(t){if(!o||!o.spotInfo)return;const n=document.getElementById("infoModal"),i=document.getElementById("infoModalSpotName"),s=document.getElementById("spotInfoContent");i.textContent=`${t}`;const a=x(o);s.innerHTML=`\n                <div class="info-grid">\n                    <div class="info-item" style="grid-column: 1 / -1;">\n                        <div class="info-label">${e("overviewLabel")}</div>\n                        <div class="info-value">${a.description}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${e("spotTypeLabel")}</div>\n                        <div class="info-value">${a.type}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${e("bestWindLabel")}</div>\n                        <div class="info-value">${a.bestWind}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${e("waterTempLabel")}</div>\n                        <div class="info-value">${a.waterTemp}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${e("experienceLabel")}</div>\n                        <div class="info-value">${a.experience}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${e("launchTypeLabel")}</div>\n                        <div class="info-value">${a.launch}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">${e("hazardsLabel")}</div>\n                        <div class="info-value">${a.hazards}</div>\n                    </div>\n                    <div class="info-item" style="grid-column: 1 / -1;">\n                        <div class="info-label">${e("seasonLabel")}</div>\n                        <div class="info-value">${a.season}</div>\n                    </div>\n                </div>\n            `,n.classList.add("active"),document.body.style.overflow="hidden"},window.closeInfoModal=T,window.openIcmModal=function(e,t){const n=document.getElementById("icmModal"),o=document.getElementById("icmModalTitle"),i=document.getElementById("icmImage");o.textContent=`${e} - ICM Forecast`,i.src=t,n.classList.add("active"),document.body.style.overflow="hidden"},window.closeIcmModal=S,window.openEmbedModal=function(){if(!u)return;document.getElementById("embedModal").classList.add("active"),document.body.style.overflow="hidden";const t=document.getElementById("copyEmbedCode"),n=document.getElementById("copyButtonText");t&&t.classList.remove("copied"),n&&(n.textContent=e("embedCopyButtonDefault")),q(),P(),V()},window.closeEmbedModal=H,document.addEventListener("DOMContentLoaded",async function(){!function(){const e=localStorage.getItem("theme")||"dark",t=document.getElementById("themeToggle"),n=document.getElementById("themeIcon");function o(e){document.documentElement.setAttribute("data-theme",e),n.innerHTML="light"===e?'<path d="M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5,5-2.24,5-5-2.24-5-5-5Zm0,7c-1.1,0-2-.9-2-2s.9-2,2-2,2,.9,2,2-.9,2-2,2Zm4.95-6.95c-.59-.59-.59-1.54,0-2.12l1.41-1.41c.59-.59,1.54-.59,2.12,0,.59,.59,.59,1.54,0,2.12l-1.41,1.41c-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44ZM7.05,16.95c.59,.59,.59,1.54,0,2.12l-1.41,1.41c-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44c-.59-.59-.59-1.54,0-2.12l1.41-1.41c.59-.59,1.54-.59,2.12,0ZM3.51,5.64c-.59-.59-.59-1.54,0-2.12,.59-.59,1.54-.59,2.12,0l1.41,1.41c.59,.59,.59,1.54,0,2.12-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44l-1.41-1.41Zm16.97,12.73c.59,.59,.59,1.54,0,2.12-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44l-1.41-1.41c-.59-.59-.59-1.54,0-2.12,.59-.59,1.54-.59,2.12,0l1.41,1.41Zm3.51-6.36c0,.83-.67,1.5-1.5,1.5h-2c-.83,0-1.5-.67-1.5-1.5s.67-1.5,1.5-1.5h2c.83,0,1.5,.67,1.5,1.5ZM3.5,13.5H1.5c-.83,0-1.5-.67-1.5-1.5s.67-1.5,1.5-1.5H3.5c.83,0,1.5,.67,1.5,1.5s-.67,1.5-1.5,1.5ZM10.5,3.5V1.5c0-.83,.67-1.5,1.5-1.5s1.5,.67,1.5,1.5V3.5c0,.83-.67,1.5-1.5,1.5s-1.5-.67-1.5-1.5Zm3,17v2c0,.83-.67,1.5-1.5,1.5s-1.5-.67-1.5-1.5v-2c0-.83,.67-1.5-1.5-1.5s1.5,.67,1.5,1.5Z"/>':'<path d="M15,24a12.021,12.021,0,0,1-8.914-3.966,11.9,11.9,0,0,1-3.02-9.309A12.122,12.122,0,0,1,13.085.152a13.061,13.061,0,0,1,5.031.205,2.5,2.5,0,0,1,1.108,4.226c-4.56,4.166-4.164,10.644.807,14.41a2.5,2.5,0,0,1-.7,4.32A13.894,13.894,0,0,1,15,24Z"/>',localStorage.setItem("theme",e)}o(e),t&&t.addEventListener("click",()=>{o("dark"===document.documentElement.getAttribute("data-theme")?"light":"dark")})}(),function(){const e=localStorage.getItem("language")||"en";i=e,p=e;const t=document.getElementById("languageToggle"),n=document.getElementById("langCode");X(),t&&n&&(n.textContent=e.toUpperCase(),t.addEventListener("click",()=>{const e="en"===i?"pl":"en";i=e,p=e,n.textContent=e.toUpperCase(),localStorage.setItem("language",e),X(),o&&R(o),V()}))}(),function(){const e=document.getElementById("infoModalClose"),t=document.getElementById("aiModalClose"),n=document.getElementById("icmModalClose"),o=document.getElementById("appInfoModalClose"),i=document.getElementById("embedModalClose");e&&e.addEventListener("click",T),t&&t.addEventListener("click",k),n&&n.addEventListener("click",S),o&&o.addEventListener("click",J),i&&i.addEventListener("click",H),document.querySelectorAll(".modal-overlay").forEach(e=>{e.addEventListener("click",t=>{t.target===e&&(T(),k(),S(),J(),H())})})}(),O(),G(),function(){const e=document.getElementById("hamburgerMenu"),t=document.getElementById("headerControls"),n=document.querySelector(".main-content");e&&e.addEventListener("click",()=>{t.classList.contains("show")?(t.classList.remove("show"),e.classList.remove("active"),e.textContent="‚ò∞",n&&n.classList.remove("menu-open")):(t.classList.add("show"),e.classList.add("active"),e.textContent="‚úï",n&&n.classList.add("menu-open"))})}(),function(){const e=document.getElementById("headerLogo"),t=document.getElementById("headerTitle");function n(){const e=localStorage.getItem("selectedCountry")||"all";if("all"===e)window.location.href="/";else{const t=e.toLowerCase().replace(/\s+/g,"").replace(/[^a-z]/g,"");window.location.href=`/country/${t}`}}e&&e.addEventListener("click",n),t&&t.addEventListener("click",n)}(),function(){let e,t=window.innerWidth<=768,n=window.innerWidth<=1430;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{const e=window.innerWidth<=768,i=window.innerWidth<=1430;(e!==t||i!==n)&&(t=e,n=i,o&&R(o))},150)})}(),Q(),Y()});
