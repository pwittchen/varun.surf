<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>VARUN.SURF</title><link rel=icon type=image/svg+xml href="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3e%3cdefs%3e%3clinearGradient id='ocean' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3e%3cstop offset='0%25' style='stop-color:%231e40af;stop-opacity:1' /%3e%3cstop offset='50%25' style='stop-color:%234a9eff;stop-opacity:1' /%3e%3cstop offset='100%25' style='stop-color:%2306b6d4;stop-opacity:1' /%3e%3c/linearGradient%3e%3clinearGradient id='wave' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3e%3cstop offset='0%25' style='stop-color:%23ffffff;stop-opacity:0.9' /%3e%3cstop offset='100%25' style='stop-color:%23f0f9ff;stop-opacity:0.7' /%3e%3c/linearGradient%3e%3c/defs%3e%3crect width='100' height='100' rx='20' fill='url(%23ocean)'/%3e%3cpath d='M0 60 Q15 45 30 60 T60 55 T90 60 T120 55 L120 100 L0 100 Z' fill='url(%23wave)' opacity='0.8'/%3e%3cpath d='M0 70 Q20 55 40 70 T80 65 T120 70 L120 100 L0 100 Z' fill='url(%23wave)' opacity='0.6'/%3e%3cpath d='M0 80 Q25 65 50 80 T100 75 T150 80 L150 100 L0 100 Z' fill='url(%23wave)' opacity='0.4'/%3e%3ccircle cx='75' cy='25' r='8' fill='%23fbbf24' opacity='0.9'/%3e%3cpath d='M70 30 Q75 35 80 30' fill='none' stroke='%23fbbf24' stroke-width='1' opacity='0.6'/%3e%3cpath d='M10 40 Q15 35 20 40 Q25 45 30 40' fill='none' stroke='%23ffffff' stroke-width='1.5' opacity='0.5'/%3e%3cpath d='M40 35 Q45 30 50 35 Q55 40 60 35' fill='none' stroke='%23ffffff' stroke-width='1.5' opacity='0.5'/%3e%3c/svg%3e"><style>:root{--bg-primary:#0f0f0f;--bg-secondary:#1a1a1a;--bg-tertiary:#262626;--text-primary:#e8e8e8;--text-secondary:#9ca3af;--text-tertiary:#5e6165;--border-primary:#262626;--border-secondary:#333;--border-hover:#404040;--accent-primary:#4a9eff;--accent-secondary:#216ebb;--gradient-button:linear-gradient(145deg, #1d1d1d, #2c2c2c);--gradient-button-hover:linear-gradient(145deg, #2c2c2c, #3d3d3d);--gradient-active:linear-gradient(145deg, #00397b, #1663b0);--gradient-header:linear-gradient(145deg, #0854ab, #216ebb);--shadow-card:0 8px 32px rgba(0, 0, 0, .6);--error-bg:linear-gradient(145deg, #4b0404, #550303);--error-border:#840808;--error-text:#fca5a5;--success-color:#22c55e;--warning-color:#f59e0b;--danger-color:#ef4444}[data-theme=light]{--bg-primary:#ffffff;--bg-secondary:#f8f9fa;--bg-tertiary:#e9ecef;--text-primary:#212529;--text-secondary:#6c757d;--text-tertiary:#adb5bd;--border-primary:#dee2e6;--border-secondary:#ced4da;--border-hover:#adb5bd;--accent-primary:#0d6efd;--accent-secondary:#0a58ca;--gradient-button:linear-gradient(145deg, #f8f9fa, #e9ecef);--gradient-button-hover:linear-gradient(145deg, #e9ecef, #dee2e6);--gradient-active:linear-gradient(145deg, #0d6efd, #0a58ca);--gradient-header:linear-gradient(145deg, #0d6efd, #0a58ca);--shadow-card:0 8px 32px rgba(0, 0, 0, .1);--error-bg:linear-gradient(145deg, #f8d7da, #f5c6cb);--error-border:#f1aeb5;--error-text:#721c24;--success-color:#198754;--warning-color:#fd7e14;--danger-color:#dc3545}*{margin:0;padding:0;box-sizing:border-box}body{font-family:Inter,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg-primary);color:var(--text-primary);min-height:100vh;transition:background-color .3s ease,color .3s ease}.fixed-header{position:fixed!important;top:0!important;left:0!important;right:0!important;width:100%!important;z-index:9999!important;background:rgba(15,15,15,.7)!important;backdrop-filter:blur(5px) saturate(180%)!important;-webkit-backdrop-filter:blur(5px) saturate(180%)!important;border-bottom:1px solid rgba(255,255,255,.06)!important;padding:20px!important;box-shadow:0 8px 32px rgba(0,0,0,.4)!important}[data-theme=light] .fixed-header{background:rgba(255,255,255,.7)!important;border-bottom:1px solid rgba(0,0,0,.2)!important;box-shadow:0 8px 32px rgba(0,0,0,.15)!important}.header-content{max-width:1400px;margin:0 auto;position:relative;display:flex;flex-direction:column;text-align:left}.header-controls{position:absolute;top:5px;right:0;display:flex;gap:12px;align-items:center}.spot-counter{background:var(--gradient-button);border:1px solid var(--border-secondary);color:var(--text-secondary);padding:12px 12px;border-radius:8px;font-size:.9rem;font-weight:500;display:flex;align-items:center;gap:6px;min-width:80px;justify-content:center;user-select:none}.spot-counter-number{color:var(--accent-primary);font-weight:600}.main-content{margin-top:120px;padding:20px}.container{max-width:1400px;margin:0 auto}.header-title{font-size:2.8rem;font-weight:100;color:#fff;margin-bottom:8px;letter-spacing:-.02em;text-align:left}[data-theme=light] .header-title{color:#000}.theme-toggle{background:var(--gradient-button);border:1px solid var(--border-secondary);color:var(--text-primary);padding:8px 12px;border-radius:8px;cursor:pointer;font-size:.9rem;font-weight:500;transition:all .3s ease;display:flex;align-items:center;gap:8px;min-width:10px;justify-content:center;height:40px;width:40px}.theme-toggle:hover{background:var(--gradient-button-hover);border-color:var(--border-hover)}.theme-toggle.active{background:var(--gradient-active);border-color:var(--accent-primary);color:#fff;box-shadow:0 4px 12px rgba(74,158,255,.4)}.theme-toggle .icon{width:20px;height:20px;fill:var(--text-primary);transition:fill .3s ease}.theme-toggle:hover .icon{fill:var(--accent-primary)}.theme-toggle.active .icon{fill:#fff}[data-theme=light] .theme-toggle .icon{fill:#212529}[data-theme=light] .theme-toggle:hover .icon{fill:#0d6efd}[data-theme=light] .theme-toggle.active .icon{fill:#fff}.theme-icon{font-size:1rem;transition:transform .3s ease}.dropdown-container{position:relative;width:220px}.search-container{position:relative;width:220px}.search-input{background:var(--gradient-button);border:1px solid var(--border-secondary);color:var(--text-primary);padding:12px 32px 12px 12px;border-radius:8px;font-size:.9rem;font-weight:500;width:100%;transition:all .3s ease}.search-input::placeholder{color:var(--text-secondary)}.search-input:focus{outline:0;border-color:var(--accent-primary);background:var(--bg-secondary);box-shadow:0 4px 12px rgba(74,158,255,.2)}.search-clear{position:absolute;right:8px;top:50%;transform:translateY(-50%);background:0 0;border:none;color:var(--text-secondary);cursor:pointer;font-size:1rem;padding:4px;display:none;transition:color .2s ease}.search-clear:hover{color:var(--text-primary)}.search-clear.visible{display:block}.dropdown-button{background:var(--gradient-button);border:1px solid var(--border-secondary);color:#e0e0e0;padding:8px 32px 8px 12px;border-radius:12px;cursor:pointer;font-size:.9rem;font-weight:500;width:220px;text-align:left;transition:all .3s ease;position:relative;display:flex;align-items:center;justify-content:space-between}[data-theme=light] .dropdown-button{color:#212529}.dropdown-button:hover{background:var(--gradient-button-hover);border-color:var(--border-hover)}.dropdown-button.active{background:var(--gradient-active);border-color:var(--accent-primary);color:#fff;box-shadow:0 4px 12px rgba(74,158,255,.4)}.dropdown-arrow{font-size:.8rem;transition:transform .3s ease;color:#9ca3af}[data-theme=light] .dropdown-arrow{color:#6c757d}.dropdown-button.active .dropdown-arrow{color:#fff}.dropdown-button.open .dropdown-arrow{transform:rotate(180deg)}.dropdown-menu{position:absolute;top:100%;left:0;right:0;background:var(--bg-secondary);border:1px solid var(--border-secondary);border-radius:12px;margin-top:4px;z-index:100;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .3s ease;box-shadow:var(--shadow-card);backdrop-filter:blur(10px);max-height:300px;overflow-y:auto}.dropdown-menu.open{opacity:1;visibility:visible;transform:translateY(0)}.dropdown-option{padding:12px 16px;cursor:pointer;transition:all .2s ease;border-bottom:1px solid var(--border-primary);font-size:.9rem;display:flex;align-items:center;gap:10px;color:#e8e8e8}[data-theme=light] .dropdown-option{color:#212529}.dropdown-option:last-child{border-bottom:none}.dropdown-option:hover{background:var(--bg-tertiary);color:#fff}[data-theme=light] .dropdown-option:hover{color:#000}.dropdown-option.selected{background:var(--gradient-active);color:#fff}.dropdown-option:first-child{border-radius:11px 11px 0 0}.dropdown-option:last-child{border-radius:0 0 11px 11px}.error-message{background:var(--error-bg);border:1px solid var(--error-border);border-radius:12px;padding:24px;margin:20px 0;text-align:center;box-shadow:0 4px 12px rgba(220,38,38,.2)}.error-icon{font-size:2rem;margin-bottom:12px;display:block}.error-title{font-size:1.2rem;font-weight:600;color:#fff;margin-bottom:8px}[data-theme=light] .error-title{color:#721c24}.error-description{color:var(--error-text);font-size:.9rem;margin-bottom:16px;line-height:1.5}.loading-message{background:var(--bg-secondary);border:1px solid var(--border-primary);border-radius:12px;padding:24px;margin:20px 0;text-align:center}.loading-spinner{display:inline-block;width:24px;height:24px;border:3px solid var(--border-primary);border-top:3px solid var(--accent-primary);border-radius:50%;animation:spin 1s linear infinite;margin-right:12px;vertical-align:middle}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.loading-text{color:#9ca3af;font-size:1rem;vertical-align:middle}[data-theme=light] .loading-text{color:#6c757d}.spots-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(600px,1fr));gap:30px}.spots-grid.three-columns{grid-template-columns:repeat(3,1fr);gap:20px}.spots-grid.three-columns .spot-title{max-width:50%;padding-top:10px;margin-left:10px;margin-top:3px}.spots-grid.three-columns .spot-name{font-size:1rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}.spots-grid.three-columns .external-link{font-size:.6rem}.spots-grid.three-columns .weather-table{font-size:.75rem}.spots-grid.three-columns .weather-table th{font-size:.7rem;padding:8px 4px}.spots-grid.three-columns .weather-table td{padding:8px 4px;font-size:.75rem}.spots-grid.three-columns .wind-arrow{font-size:1rem}.spots-grid.three-columns .error-message,.spots-grid.three-columns .loading-message{grid-column:1/-1}.spot-card{background:var(--bg-secondary);border-radius:12px;padding:24px;box-shadow:none;border:1px solid var(--border-primary);transition:border-color .2s ease;position:relative}.spots-grid.three-columns .spot-card{padding:14px}.spot-card:hover{transform:none;box-shadow:none;border-color:var(--border-secondary)}.spot-card.dragging{opacity:.3;cursor:grabbing}.drag-ghost{position:fixed;pointer-events:none;z-index:10000;opacity:.8;transform:scale(1.05);box-shadow:0 12px 48px rgba(0,0,0,.5);cursor:grabbing}.drag-handle{position:absolute;top:18px;left:28px;font-size:1.2rem;cursor:grab;color:var(--text-secondary);transition:color .2s ease;user-select:none;z-index:10;margin-bottom:20px;padding-bottom:41px;border-bottom:1px solid var(--border-primary)}.drag-handle:hover{color:var(--text-primary)}.drag-handle:active{cursor:grabbing}.country-tag-wrapper{display:flex;align-items:center;gap:6px}.favorite-icon{cursor:pointer;transition:all .3s ease;user-select:none;flex-shrink:0;width:20px;height:20px;display:flex;align-items:center;justify-content:center}.favorite-icon-svg{width:100%;height:100%;fill:var(--text-secondary);transition:fill .3s ease,filter .3s ease;filter:grayscale(100%)}.favorite-icon:hover .favorite-icon-svg{filter:grayscale(0%)}.favorite-icon.favorited .favorite-icon-svg{fill:#fbbf24;filter:grayscale(0%)}@keyframes favorite-pulse{0%{transform:scale(1)}50%{transform:scale(1.3)}100%{transform:scale(1)}}.favorite-icon.animate{animation:favorite-pulse .4s ease-out}.spot-header{display:flex;justify-content:space-between;align-items:flex-start;margin-left:22px;margin-bottom:20px;padding-bottom:30px;padding-left:5px;border-bottom:1px solid var(--border-primary)}.spot-title{display:flex;flex-direction:column;gap:4px}.spot-meta{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.spot-name{font-size:1.25rem;font-weight:600;color:#fff}[data-theme=light] .spot-name{color:#000}.last-updated{font-size:.75rem;color:#5e6165;font-weight:400}[data-theme=light] .last-updated{color:#adb5bd}.country-tag{background:var(--bg-tertiary);padding:4px 10px;border-radius:6px;font-size:.75rem;color:#9ca3af;border:none;font-weight:500}[data-theme=light] .country-tag{color:#6c757d}.external-links{display:flex;gap:8px;margin-top:16px;flex-wrap:wrap}.external-link{display:inline-flex;align-items:center;gap:4px;background:0 0;color:#9ca3af;text-decoration:none;padding:6px 8px;border-radius:6px;font-size:.75rem;font-weight:500;border:1px solid var(--border-secondary);transition:all .15s ease;cursor:pointer}[data-theme=light] .external-link{color:#6c757d}.external-link:hover{background:var(--bg-tertiary);color:#fff;border-color:var(--border-hover)}[data-theme=light] .external-link:hover{color:#000}.external-link::after{content:"‚Üó";font-size:.7rem;opacity:.6}.external-link.location-link::after{content:"‚ö≤";font-size:.8rem;opacity:1}.external-link.webcam-link::after{content:"‚äô";font-size:.8rem;opacity:1}.external-link.ai-link{border:1px solid #1f7987}.external-link.ai-link::after{content:"‚ü°";font-size:.8rem;opacity:1}.external-link.info-link::after{content:"‚ìò";font-size:.8rem;opacity:1}.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);backdrop-filter:blur(4px);display:none;justify-content:center;align-items:center;z-index:10000;animation:fadeIn .3s ease}.modal-overlay.active{display:flex}.modal{background:var(--bg-secondary);border:1px solid var(--border-secondary);border-radius:16px;width:90%;max-width:600px;max-height:80vh;overflow:hidden;box-shadow:0 20px 40px rgba(0,0,0,.5);animation:modalSlideIn .3s ease}.modal-header{background:var(--gradient-header);padding:20px 24px;border-bottom:1px solid var(--border-secondary);display:flex;justify-content:space-between;align-items:center}.modal-title{color:#fff;font-size:1.2rem;font-weight:600;display:flex;align-items:center;gap:8px}.modal-close{background:0 0;border:none;color:#fff;font-size:1.5rem;cursor:pointer;padding:4px;border-radius:4px;transition:background .2s ease}.modal-close:hover{background:rgba(255,255,255,.1)}.modal-content{padding:24px;overflow-y:auto;max-height:calc(80vh - 80px)}.ai-analysis{color:#e8e8e8;line-height:1.6;font-size:.95rem}[data-theme=light] .ai-analysis{color:#212529}.ai-analysis h3{color:#4a9eff;margin-bottom:12px;font-size:1.1rem;font-weight:600}[data-theme=light] .ai-analysis h3{color:#0d6efd}.ai-analysis p{margin-bottom:16px}.ai-analysis ul{margin-left:20px;margin-bottom:16px}.ai-analysis li{margin-bottom:8px}.ai-highlight{background:rgba(74,158,255,.1);color:#4a9eff;padding:2px 6px;border-radius:4px;font-weight:500}[data-theme=light] .ai-highlight{color:#0d6efd}.spot-info{color:#e8e8e8;line-height:1.6;font-size:.95rem}[data-theme=light] .spot-info{color:#212529}.spot-info h3{color:#4a9eff;margin-bottom:12px;font-size:1.1rem;font-weight:600}[data-theme=light] .spot-info h3{color:#0d6efd}.spot-info p{margin-bottom:16px}.spot-info .info-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin:16px 0}.info-item{background:var(--bg-tertiary);padding:12px 16px;border-radius:8px;border:1px solid var(--border-primary)}.info-label{font-size:.8rem;color:var(--text-secondary);margin-bottom:4px;font-weight:500}.info-value{font-weight:600;color:var(--text-primary)}.icm-image-container{display:flex;justify-content:center;align-items:center;width:100%;min-height:300px}.icm-forecast-image{max-width:100%;height:auto;border-radius:8px;display:block}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes modalSlideIn{from{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.weather-table{width:100%;border-collapse:collapse;margin-top:15px;border-radius:8px;overflow:hidden}.weather-table th{background:var(--bg-tertiary);color:#fff;padding:12px 8px;text-align:center;font-weight:600;border-bottom:none;font-size:.8rem;text-transform:uppercase;letter-spacing:.05em}[data-theme=light] .weather-table th{color:#000}.weather-table th:first-child{text-align:left}.weather-table td{padding:12px 8px;text-align:center;border-bottom:1px solid var(--border-primary);font-size:.875rem;color:#e8e8e8}[data-theme=light] .weather-table td{color:#212529}.weather-table td:first-child{text-align:left}.weather-table tbody tr.weak-wind td:nth-child(2),.weather-table tbody tr.weak-wind td:nth-child(3),.weather-table tbody tr.weak-wind td:nth-child(4){color:#6b7280!important}.weather-table tbody tr.moderate-wind td:nth-child(2),.weather-table tbody tr.moderate-wind td:nth-child(3),.weather-table tbody tr.moderate-wind td:nth-child(4){color:#22c55e!important}.weather-table tbody tr.strong-wind td:nth-child(2),.weather-table tbody tr.strong-wind td:nth-child(3),.weather-table tbody tr.strong-wind td:nth-child(4){color:#f59e0b!important}.weather-table tbody tr.extreme-wind td:nth-child(2),.weather-table tbody tr.extreme-wind td:nth-child(3),.weather-table tbody tr.extreme-wind td:nth-child(4){color:#ef4444!important}.weather-table tbody td.wind-weak{color:#6b7280!important}.weather-table tbody td.wind-moderate{color:#22c55e!important;font-weight:600}.weather-table tbody td.wind-strong{color:#f59e0b!important;font-weight:600}.weather-table tbody td.wind-extreme{color:#ef4444!important;font-weight:600}.weather-table tbody td.temp-positive{color:#f97316!important}.weather-table tbody td.temp-negative{color:#06b6d4!important}.weather-table tbody td.precipitation{color:#3b82f6!important}.weather-table tbody td.precipitation-none{color:#6b7280!important}.weather-table tbody td.wave-small{color:#22c55e!important}.weather-table tbody td.wave-moderate{color:#f59e0b!important;font-weight:600}.weather-table tbody td.wave-large{color:#ef4444!important;font-weight:600}.weather-table tr.weak-wind{background:0 0;color:var(--text-secondary)}.weather-table tr.moderate-wind{background:rgba(34,197,94,.1);color:var(--success-color)}.weather-table tr.strong-wind{background:rgba(245,158,11,.1);color:var(--warning-color)}.weather-table tr.extreme-wind{background:rgba(239,68,68,.1);color:var(--danger-color)}.wind-arrow{display:inline-block;font-size:1.2rem;transition:transform .3s ease}.live-indicator{display:inline-flex;align-items:center;gap:8px}.live-text{color:var(--success-color)}.live-dot{width:8px;height:8px;background:var(--success-color);border-radius:50%;position:relative;animation:pulse-glow 2s ease-in-out infinite;margin-left:8px}.live-dot::before{content:'';position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;background:var(--success-color);border-radius:50%;opacity:.4;animation:pulse-ring 2s ease-in-out infinite}@keyframes pulse-glow{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.8;transform:scale(1.1)}}@keyframes pulse-ring{0%{transform:scale(1);opacity:.4}50%{transform:scale(1.5);opacity:.2}100%{transform:scale(2);opacity:0}}.hamburger-menu{display:none;background:var(--gradient-button);border:1px solid var(--border-secondary);color:var(--text-primary);padding:8px 12px;border-radius:8px;cursor:pointer;font-size:1.5rem;transition:all .3s ease,top .3s ease,right .3s ease;position:absolute;top:0;right:0;z-index:10001}.hamburger-menu:hover{background:var(--gradient-button-hover);border-color:var(--border-hover)}.hamburger-menu.active{background:var(--gradient-active);border-color:var(--accent-primary);color:#fff;position:fixed;top:auto;bottom:20px;right:20px}@media (max-width:1150px){.spots-grid{grid-template-columns:1fr!important}.column-toggle{display:none!important}.weather-table{font-size:.85rem}.weather-table td,.weather-table th{padding:8px 4px}.error-message{padding:20px}.error-title{font-size:1.1rem}.error-description{font-size:.85rem}.fixed-header{padding:15px 20px!important}.header-content{text-align:center}.header-title{text-align:center;margin-top:0;font-size:2.2rem}.hamburger-menu{display:block}.header-controls{position:static;display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;gap:12px;margin:0 auto 15px auto;width:100%;max-width:400px;justify-content:center;max-height:0;overflow:visible;opacity:0;transition:max-height .3s ease,opacity .3s ease,margin-bottom .3s ease;pointer-events:none}.header-controls.show{max-height:500px;opacity:1;margin-bottom:15px;pointer-events:auto}.header-controls>*{opacity:0;transition:opacity .3s ease}.header-controls.show>*{opacity:1}#favoritesToggle,#kiteSizeToggle,#themeToggle{width:92px;flex:0 0 auto;order:1}.search-container{width:100%;max-width:300px;flex:0 0 100%;order:2}.dropdown-container{width:100%;max-width:300px;flex:0 0 100%;order:3}.dropdown-button{width:100%}.spot-counter{width:100%;max-width:300px;flex:0 0 100%;order:4}.main-content{margin-top:120px}.main-content.menu-open{margin-top:380px}.info-grid{grid-template-columns:1fr!important}.drag-handle{display:none}.spot-header{margin-left:0}}.footer{margin-top:60px;padding:30px 0;border-top:1px solid var(--border-primary);text-align:center}.footer-content{max-width:600px;margin:0 auto}.footer-content p{color:#9ca3af;font-size:.875rem;margin-bottom:8px}[data-theme=light] .footer-content p{color:#6c757d}.footer-content p:last-child{margin-bottom:0}.footer-disclaimer{font-size:.75rem;opacity:.8}.footer-link{font-size:.75rem;margin-top:12px}.footer-disclaimer a,.footer-link a{color:#4a9eff;text-decoration:none;transition:color .2s ease}.footer-disclaimer a:hover,.footer-link a:hover{color:#fff;text-decoration:underline}[data-theme=light] .footer-disclaimer a,[data-theme=light] .footer-link a{color:#0d6efd}[data-theme=light] .footer-disclaimer a:hover,[data-theme=light] .footer-link a:hover{color:#000}.calc-input-group{margin-bottom:20px}.calc-label{display:block;font-size:.9rem;font-weight:600;color:var(--text-primary);margin-bottom:8px}.calc-input{width:100%;background:var(--bg-tertiary);border:1px solid var(--border-secondary);color:var(--text-primary);padding:12px;border-radius:8px;font-size:.95rem;transition:all .3s ease}.calc-input:focus{outline:0;border-color:var(--accent-primary);box-shadow:0 0 0 3px rgba(74,158,255,.1)}.calc-select{width:100%;background:var(--bg-tertiary);border:1px solid var(--border-secondary);color:var(--text-primary);padding:12px;border-radius:8px;font-size:.95rem;cursor:pointer;transition:all .3s ease}.calc-select:focus{outline:0;border-color:var(--accent-primary);box-shadow:0 0 0 3px rgba(74,158,255,.1)}.calc-button{width:100%;background:var(--gradient-active);border:1px solid var(--accent-primary);color:#fff;padding:14px;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;margin-top:10px}.calc-button:hover{background:var(--gradient-header);box-shadow:0 4px 12px rgba(74,158,255,.4)}.calc-result{background:var(--bg-tertiary);border:1px solid var(--border-secondary);border-radius:8px;padding:20px;margin-top:20px;display:none}.calc-result.show{display:block;animation:fadeIn .3s ease}.calc-result-title{font-size:1.1rem;font-weight:600;color:var(--accent-primary);margin-bottom:16px}.calc-result-item{margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid var(--border-primary)}.calc-result-item:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}.calc-result-label{font-size:.85rem;color:var(--text-secondary);margin-bottom:4px}.calc-result-value{font-size:1.1rem;font-weight:600;color:var(--text-primary)}.modal-disclaimer{margin-top:16px;padding:12px;background:rgba(245,158,11,.1);border:1px solid rgba(245,158,11,.3);border-radius:8px;font-size:.85rem;color:var(--text-secondary);line-height:1.5}.calc-warning{display:none;background:#681414;color:#fff;padding:15px;border-radius:8px;margin-top:15px;font-size:.95rem;line-height:1.6}</style><script defer data-website-id=dfid_yUtxeXdTh4uWWN5KSQ3qU data-domain=varun.surf src=https://datafa.st/js/script.js></script></head><body><div class=fixed-header><div class=header-content><button class=hamburger-menu id=hamburgerMenu>‚ò∞</button><div class=header-controls id=headerControls><button class=theme-toggle id=themeToggle><svg class="icon theme-icon" id=themeIcon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d=M15,24a12.021,12.021,0,0,1-8.914-3.966,11.9,11.9,0,0,1-3.02-9.309A12.122,12.122,0,0,1,13.085.152a13.061,13.061,0,0,1,5.031.205,2.5,2.5,0,0,1,1.108,4.226c-4.56,4.166-4.164,10.644.807,14.41a2.5,2.5,0,0,1-.7,4.32A13.894,13.894,0,0,1,15,24Z /></svg></button><button class=theme-toggle id=favoritesToggle title="View favorites"><svg class=icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d=M1.327,12.4,4.887,15,3.535,19.187A3.178,3.178,0,0,0,4.719,22.8a3.177,3.177,0,0,0,3.8-.019L12,20.219l3.482,2.559a3.227,3.227,0,0,0,4.983-3.591L19.113,15l3.56-2.6a3.227,3.227,0,0,0-1.9-5.832H16.4L15.073,2.432a3.227,3.227,0,0,0-6.146,0L7.6,6.568H3.231a3.227,3.227,0,0,0-1.9,5.832Z /></svg></button><button class=theme-toggle id=kiteSizeToggle title="Kite/Board Size Calculator"><svg class=icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="m8 13c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5zm15.514 2.33-5.518-3.298c0-.011.003-.021.003-.032 0-1.105-.895-2-2-2s-2 .895-2 2 .895 2 2 2c.351 0 .675-.098.962-.257l5.523 3.301c.466.281 1.086.135 1.372-.343.284-.474.131-1.088-.343-1.372zm-23.514 7.67c0 .552.448 1 1 1h4.683l1.545-5.658-1.912-2.869c-3.093 1.107-5.316 4.091-5.316 7.527zm10.684-7.527-1.912 2.869 1.545 5.658h4.683c.552 0 1-.448 1-1 0-3.468-2.223-6.42-5.316-7.527zm10.8 3.404c-.482-.266-1.092-.093-1.359.39-.612 1.103-1.363 2.127-2.233 3.045-.38.401-.363 1.034.038 1.414.401.379 1.033.363 1.414-.038.985-1.041 1.836-2.202 2.53-3.452.268-.483.094-1.091-.39-1.359zm.109-10.358c.24 1.009.375 2.05.401 3.096.013.552.475.99 1.024.975.552-.014.98-.537.98-1.089 0-1.18-.188-2.3-.46-3.444-.128-.538-.67-.871-1.204-.741-.537.127-.869.667-.741 1.204zm-1.469-3.786c.183.33.524.515.875.515.164 0 .331-.041.484-.125.483-.268.658-.877.39-1.359-.693-1.25-1.544-2.411-2.53-3.452-.38-.4-1.013-.417-1.414-.038-.401.38-.418 1.013-.038 1.414.87.918 1.621 1.943 2.233 3.046z"/></svg></button><button class="theme-toggle column-toggle" id=columnToggle title="Toggle 2/3 columns"><svg class=icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d=m18.5,2H5.5C2.467,2,0,4.467,0,7.5v9c0,3.033,2.467,5.5,5.5,5.5h13c3.033,0,5.5-2.467,5.5-5.5V7.5c0-3.033-2.467-5.5-5.5-5.5Zm-4.5,3v14h-4V5h4ZM3,16.5V7.5c0-1.378,1.122-2.5,2.5-2.5h1.5v14h-1.5c-1.378,0-2.5-1.122-2.5-2.5Zm18,0c0,1.378-1.122,2.5-2.5,2.5h-1.5V5h1.5c1.378,0,2.5,1.122,2.5,2.5v9Z /></svg></button><div class=search-container><input class=search-input id=searchInput placeholder="Search spots..." autocomplete=off><button class=search-clear id=searchClear>‚úï</button></div><div class=dropdown-container><button class=dropdown-button id=dropdownButton><span id=selectedCountry>üåé All</span><span class=dropdown-arrow>‚ñº</span></button><div class=dropdown-menu id=dropdownMenu></div></div><div class=spot-counter id=spotCounter><span class=spot-counter-number id=spotCounterNumber>0</span><span>spots</span></div></div><h1 class=header-title><span style=cursor:pointer onclick=window.scrollTo(0,0),window.location.reload()>VARUN.SURF</span></h1></div></div><div class=main-content><div class=container><div class=spots-grid id=spotsGrid></div></div><footer class=footer><div class=footer-content><p class=footer-disclaimer>weather forecast and real-time wind conditions dashboard for kitesurfers</p><p class=footer-link>&copy; 2025 <a href=https://varun.surf>varun.surf</a> ‚Ä¢ <a href=https://github.com/pwittchen/varun.surf>open-source</a> ‚Ä¢ made in üáµüá± by <a href=https://wittchen.io target=_blank class=footer-external-link>Piotr Wittchen</a></p></div></footer></div><div class=modal-overlay id=aiModal><div class=modal><div class=modal-header><div class=modal-title><span>‚ü°</span><span id=modalSpotName>AI</span></div><button class=modal-close id=modalClose>&times;</button></div><div class=modal-content><div class=ai-analysis id=aiAnalysisContent></div><div class=modal-disclaimer>‚ö†Ô∏è This data is generated by AI and may contain errors or invalid information!</div></div></div></div><div class=modal-overlay id=infoModal><div class=modal><div class=modal-header><div class=modal-title><span>üèÑ</span><span id=infoModalSpotName>Spot Information</span></div><button class=modal-close id=infoModalClose>&times;</button></div><div class=modal-content><div class=spot-info id=spotInfoContent></div></div></div></div><div class=modal-overlay id=icmModal><div class=modal><div class=modal-header><div class=modal-title><span>üìä</span><span id=icmModalSpotName>ICM Forecast</span></div><button class=modal-close id=icmModalClose>&times;</button></div><div class=modal-content><div class=icm-image-container><img id=icmImage src="" alt="ICM Forecast" class=icm-forecast-image></div></div></div></div><div class=modal-overlay id=kiteSizeModal><div class=modal><div class=modal-header><div class=modal-title><span>Kite & Board Size Calculator</span></div><button class=modal-close id=kiteSizeModalClose>&times;</button></div><div class=modal-content><div class=calc-input-group><label class=calc-label for=windSpeed>Wind Speed (knots)</label><input type=number id=windSpeed class=calc-input placeholder="Enter wind speed in knots" min=5 max=50 step=1></div><div class=calc-input-group><label class=calc-label for=riderWeight>Rider Weight (kg)</label><input type=number id=riderWeight class=calc-input placeholder="Enter your weight in kg" min=40 max=150 step=1></div><div class=calc-input-group><label class=calc-label for=skillLevel>Skill Level & Conditions</label><select id=skillLevel class=calc-select><option value="">Select skill level & conditions</option><option value=beginner-flat>Beginner - Flat Water</option><option value=beginner-small>Beginner - Small Waves</option><option value=intermediate-flat>Intermediate - Flat Water</option><option value=intermediate-medium>Intermediate - Medium Waves</option><option value=advanced-flat>Advanced - Flat Water</option><option value=advanced-medium>Advanced - Medium Waves</option><option value=advanced-large>Advanced - Large Waves</option></select></div><button class=calc-button id=calculateBtn>Calculate</button><div class=calc-warning id=calcWarning></div><div class=calc-result id=calcResult><div class=calc-result-title>Recommended Equipment</div><div class=calc-result-item><div class=calc-result-label>Kite Size</div><div class=calc-result-value id=kiteSize>-</div></div><div class=calc-result-item><div class=calc-result-label>Board Size</div><div class=calc-result-value id=boardSize>-</div></div><div class=modal-disclaimer>‚ö†Ô∏è These are general recommendations. Actual equipment choice may vary based on specific kite model, board type, and personal preference. Always consult with experienced riders or instructors for your local conditions.</div></div></div></div></div><script>let globalWeatherData=[],availableCountries=new Set,currentSearchQuery="",showingFavorites=!1;const API_ENDPOINT="/api/v1/spots";function getFavorites(){const e=localStorage.getItem("favoriteSpots");return e?JSON.parse(e):[]}function saveFavorites(e){localStorage.setItem("favoriteSpots",JSON.stringify(e))}function isFavorite(e){return getFavorites().includes(e)}function toggleFavorite(e){let t=getFavorites();const n=t.indexOf(e);n>-1?t.splice(n,1):t.push(e),saveFavorites(t);document.querySelectorAll(".favorite-icon").forEach((t=>{const o=t.closest(".spot-card");if(o){const a=o.querySelector(".spot-name");a&&a.textContent===e&&(n>-1?(t.classList.remove("favorited"),t.title="Add to favorites"):(t.classList.add("favorited"),t.title="Remove from favorites"),t.classList.add("animate"),setTimeout((()=>t.classList.remove("animate")),400))}})),showingFavorites&&renderFavorites()}function initTheme(){const e=localStorage.getItem("theme")||"dark",t=document.getElementById("themeToggle"),n=document.getElementById("themeIcon");function o(e){document.documentElement.setAttribute("data-theme",e),n.innerHTML="light"===e?'<path d="M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5,5-2.24,5-5-2.24-5-5-5Zm0,7c-1.1,0-2-.9-2-2s.9-2,2-2,2,.9,2,2-.9,2-2,2Zm4.95-6.95c-.59-.59-.59-1.54,0-2.12l1.41-1.41c.59-.59,1.54-.59,2.12,0,.59,.59,.59,1.54,0,2.12l-1.41,1.41c-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44ZM7.05,16.95c.59,.59,.59,1.54,0,2.12l-1.41,1.41c-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44c-.59-.59-.59-1.54,0-2.12l1.41-1.41c.59-.59,1.54-.59,2.12,0ZM3.51,5.64c-.59-.59-.59-1.54,0-2.12,.59-.59,1.54-.59,2.12,0l1.41,1.41c.59,.59,.59,1.54,0,2.12-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44l-1.41-1.41Zm16.97,12.73c.59,.59,.59,1.54,0,2.12-.29,.29-.68,.44-1.06,.44s-.77-.15-1.06-.44l-1.41-1.41c-.59-.59-.59-1.54,0-2.12,.59-.59,1.54-.59,2.12,0l1.41,1.41Zm3.51-6.36c0,.83-.67,1.5-1.5,1.5h-2c-.83,0-1.5-.67-1.5-1.5s.67-1.5,1.5-1.5h2c.83,0,1.5,.67,1.5,1.5ZM3.5,13.5H1.5c-.83,0-1.5-.67-1.5-1.5s.67-1.5,1.5-1.5H3.5c.83,0,1.5,.67,1.5,1.5s-.67,1.5-1.5,1.5ZM10.5,3.5V1.5c0-.83,.67-1.5,1.5-1.5s1.5,.67,1.5,1.5V3.5c0,.83-.67,1.5-1.5,1.5s-1.5-.67-1.5-1.5Zm3,17v2c0,.83-.67,1.5-1.5,1.5s-1.5-.67-1.5-1.5v-2c0-.83,.67-1.5,1.5-1.5s1.5,.67,1.5,1.5Z"/>':'<path d="M15,24a12.021,12.021,0,0,1-8.914-3.966,11.9,11.9,0,0,1-3.02-9.309A12.122,12.122,0,0,1,13.085.152a13.061,13.061,0,0,1,5.031.205,2.5,2.5,0,0,1,1.108,4.226c-4.56,4.166-4.164,10.644.807,14.41a2.5,2.5,0,0,1-.7,4.32A13.894,13.894,0,0,1,15,24Z"/>',localStorage.setItem("theme",e)}o(e),t.addEventListener("click",(()=>{o("dark"===document.documentElement.getAttribute("data-theme")?"light":"dark")}))}async function fetchWeatherData(){try{const e=await fetch(API_ENDPOINT,{cache:"no-store"});if(!e.ok)throw new Error(`HTTP Error: ${e.status}`);const t=await e.json();if(!Array.isArray(t))throw new Error("Invalid data format: Expected array of spots");return t}catch(e){throw console.error("Error fetching weather data:",e),e}}function showLoadingMessage(){document.getElementById("spotsGrid").innerHTML='\n                <div class="loading-message">\n                    <div class="loading-spinner"></div>\n                    <span class="loading-text">Thinking...</span>\n                </div>\n            '}function showErrorMessage(e){const t=document.getElementById("spotsGrid");let n="Failed to Load Weather Data",o="Unable to fetch the latest weather information from the server.";e.message.includes("HTTP Error: 404")?(n="Data Source Not Found",o="The weather data endpoint is not available. Please check if the server is running."):e.message.includes("HTTP Error: 500")?(n="Server Error",o="The weather service is experiencing technical difficulties. Please try again later."):e.message.includes("Failed to fetch")||e.message.includes("NetworkError")?(n="Connection Error",o="Unable to connect to the weather service. Please check your internet connection and ensure the server is running."):(e.message.includes("JSON")||e.message.includes("Invalid data format"))&&(n="Data Format Error",o="The weather data received is corrupted or in an unexpected format."),t.innerHTML=`\n                <div class="error-message">\n                    <span class="error-icon">‚ö†Ô∏è</span>\n                    <div class="error-title">${n}</div>\n                    <div class="error-description">\n                        ${o}<br/>\n                        Please refresh the page to try again.\n                    </div>\n                </div>\n            `}function getWindArrow(e){return{N:"‚Üì",NE:"‚Üô",E:"‚Üê",SE:"‚Üñ",S:"‚Üë",SW:"‚Üó",W:"‚Üí",NW:"‚Üò"}[e]||"‚Ä¢"}function populateCountryDropdown(e){const t=document.getElementById("dropdownMenu"),n=document.getElementById("selectedCountry");availableCountries.clear(),e.forEach((e=>{e.country&&availableCountries.add(e.country)}));const o=Array.from(availableCountries).sort(),a=localStorage.getItem("selectedCountry")||"all";let s=`<div class="dropdown-option ${"all"===a?"selected":""}" data-country="all">üåé All</div>`;if(o.forEach((e=>{const t=getCountryFlag(e);s+=`<div class="dropdown-option ${a===e?"selected":""}" data-country="${e}">${t} ${e.toUpperCase()}</div>`})),t.innerHTML=s,"all"!==a){const e=getCountryFlag(a);n.textContent=`${e} ${a.toUpperCase()}`}else n.textContent="üåé All";setupDropdownEvents()}function getCountryFlag(e){return{Poland:"üáµüá±",Czechia:"üá®üáø",Austria:"üá¶üáπ",Belgium:"üáßüá™",Switzerland:"üá®üá≠",Latvia:"üá±üáª",Lithuania:"üá±üáπ",Estonia:"üá™üá™",Denmark:"üá©üá∞",Sweden:"üá∏üá™",Norway:"üá≥üá¥",Iceland:"üáÆüá∏",Spain:"üá™üá∏",Portugal:"üáµüáπ",Italy:"üáÆüáπ",Greece:"üá¨üá∑",France:"üá´üá∑",Germany:"üá©üá™",Netherlands:"üá≥üá±",Croatia:"üá≠üá∑",Ireland:"üáÆüá™",UK:"üá¨üáß",Turkey:"üáπüá∑",Morocco:"üá≤üá¶",Egypt:"üá™üá¨","Cape Verde":"üá®üáª",Mauritius:"üá≤üá∫",Brazil:"üáßüá∑",Peru:"üáµüá™",Chile:"üá®üá±",USA:"üá∫üá∏"}[e]||"üè¥"}function openAIModal(e){const t=globalWeatherData.find((t=>t.name===e));if(!t||!t.aiAnalysis)return;const n=document.getElementById("aiModal"),o=document.getElementById("modalSpotName"),a=document.getElementById("aiAnalysisContent");o.textContent=`AI Analysis - ${e}`,a.innerHTML=t.aiAnalysis.trim(),n.classList.add("active"),document.body.style.overflow="hidden"}function openInfoModal(e){const t=globalWeatherData.find((t=>t.name===e));if(!t||!t.spotInfo)return;const n=document.getElementById("infoModal"),o=document.getElementById("infoModalSpotName"),a=document.getElementById("spotInfoContent");o.textContent=`${e}`;const s=t.spotInfo;a.innerHTML=`\n                <div class="info-grid">\n                    <div class="info-item" style="grid-column: 1 / -1;">\n                        <div class="info-label">Overview</div>\n                        <div class="info-value">${s.description}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">Spot Type</div>\n                        <div class="info-value">${s.type}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">Best Wind</div>\n                        <div class="info-value">${s.bestWind}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">Water Temperature</div>\n                        <div class="info-value">${s.waterTemp}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">Experience Level</div>\n                        <div class="info-value">${s.experience}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">Launch Type</div>\n                        <div class="info-value">${s.launch}</div>\n                    </div>\n                    <div class="info-item">\n                        <div class="info-label">Hazards</div>\n                        <div class="info-value">${s.hazards}</div>\n                    </div>\n                    <div class="info-item" style="grid-column: 1 / -1;">\n                        <div class="info-label">Season</div>\n                        <div class="info-value">${s.season}</div>\n                    </div>\n                </div>\n            `,n.classList.add("active"),document.body.style.overflow="hidden"}function closeAIModal(){document.getElementById("aiModal").classList.remove("active"),document.body.style.overflow="auto"}function closeInfoModal(){document.getElementById("infoModal").classList.remove("active"),document.body.style.overflow="auto"}function openIcmModal(e,t){const n=document.getElementById("icmModal"),o=document.getElementById("icmModalSpotName"),a=document.getElementById("icmImage");o.textContent=`${e} - ICM Forecast`,a.src=t,a.alt=`ICM Forecast for ${e}`,n.classList.add("active"),document.body.style.overflow="hidden"}function closeIcmModal(){document.getElementById("icmModal").classList.remove("active"),document.body.style.overflow="auto";document.getElementById("icmImage").src=""}function createSpotCard(e){const t=document.createElement("div");t.className="spot-card",t.dataset.country=e.country;const n=e.forecast&&e.forecast.some((e=>void 0!==e.wave))||e.currentConditions&&void 0!==e.currentConditions.wave;let o="";e.forecast&&Array.isArray(e.forecast)&&e.forecast.forEach((e=>{let t,a;const s=(e.wind+e.gusts)/2;s<12?(t="weak-wind",a="wind-weak"):s>=12&&s<18?(t="moderate-wind",a="wind-moderate"):s>=18&&s<=25?(t="strong-wind",a="wind-strong"):(t="extreme-wind",a="wind-extreme");const i=e.temp>=18?"temp-positive":"temp-negative",r=getWindArrow(e.direction),d=0===e.precipitation?"precipitation-none":"precipitation";let l="",c="-";void 0!==e.wave&&(l=e.wave<1?"wave-small":e.wave>=1&&e.wave<2?"wave-moderate":"wave-large",c=`${e.wave}`),o+=`\n                        <tr class="${t}">\n                            <td><strong>${e.date}</strong></td>\n                            <td class="${a}">${e.wind} kts</td>\n                            <td class="${a}">${e.gusts} kts</td>\n                            <td class="${a}">\n                                <span class="wind-arrow">${r}</span> ${e.direction}\n                            </td>\n                            <td class="${i}">${e.temp}¬∞C</td>\n                            <td class="${d}">${e.precipitation}%</td>\n                            ${n?`<td class="${l}">${c}</td>`:""}\n                        </tr>\n                    `}));let a="";if(e.currentConditions){let t,o;const s=(e.currentConditions.wind+e.currentConditions.gusts)/2;s<12?(t="weak-wind",o="wind-weak"):s>=12&&s<18?(t="moderate-wind",o="wind-moderate"):s>=18&&s<=22?(t="strong-wind",o="wind-strong"):(t="extreme-wind",o="wind-extreme");const i=e.currentConditions.temp>=20?"temp-positive":"temp-negative",r=getWindArrow(e.currentConditions.direction);let d="",l="-";void 0!==e.currentConditions.wave&&(d=e.currentConditions.wave<1?"wave-small":e.currentConditions.wave>=1&&e.currentConditions.wave<2?"wave-moderate":"wave-large",l=`${e.currentConditions.wave}`),a=`\n                    <tr class="${t}" style="border-top: 2px solid #404040;">\n                        <td>\n                            <div class="live-indicator">\n                                <strong class="live-text">NOW</strong>\n                                <div class="live-dot"></div>\n                            </div>\n                        </td>\n                        <td class="${o}">${e.currentConditions.wind} kts</td>\n                        <td class="${o}">${e.currentConditions.gusts} kts</td>\n                        <td class="${o}">\n                            <span class="wind-arrow">${r}</span> ${e.currentConditions.direction}\n                        </td>\n                        <td class="${i}">${e.currentConditions.temp}¬∞C</td>\n                        <td>-</td>\n                        ${n?`<td class="${d}">${l}</td>`:""}\n                    </tr>\n                `}const s=isFavorite(e.name),i=s?"favorited":"";return t.innerHTML=`\n                <div class="drag-handle" draggable="true">ìÉå</div>\n                <div class="spot-header">\n                    <div class="spot-title">\n                        <div class="spot-name">${e.name||"Unknown Spot"}</div>\n                    </div>\n                    <div class="spot-meta">\n                        <div class="country-tag-wrapper">\n                            <div class="favorite-icon ${i}" onclick="toggleFavorite('${e.name}')" title="${s?"Remove from favorites":"Add to favorites"}">\n                                <svg class="favorite-icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n                                    <path d="M1.327,12.4,4.887,15,3.535,19.187A3.178,3.178,0,0,0,4.719,22.8a3.177,3.177,0,0,0,3.8-.019L12,20.219l3.482,2.559a3.227,3.227,0,0,0,4.983-3.591L19.113,15l3.56-2.6a3.227,3.227,0,0,0-1.9-5.832H16.4L15.073,2.432a3.227,3.227,0,0,0-6.146,0L7.6,6.568H3.231a3.227,3.227,0,0,0-1.9,5.832Z"/>\n                                </svg>\n                            </div>\n                            <div class="country-tag">${e.country||"Unknown"}</div>\n                        </div>\n                        <div class="last-updated">${e.lastUpdated||"No data"}</div>\n                    </div>\n                </div>\n                <div class="external-links">\n                    ${e.spotInfo?`<span class="external-link info-link" onclick="openInfoModal('${e.name}')"></span>`:""}\n                    ${e.windguruUrl?`<a href="${e.windguruUrl}" target="_blank" class="external-link">WG</a>`:""}\n                    ${e.windfinderUrl?`<a href="${e.windfinderUrl}" target="_blank" class="external-link">WF</a>`:""}\n                    ${e.icmUrl?`<span class="external-link" onclick="openIcmModal('${e.name}', '${e.icmUrl}')">ICM</span>`:""}\n                    ${e.webcamUrl?`<a href="${e.webcamUrl}" target="_blank" class="external-link webcam-link">CAM</a>`:""}\n                    ${e.locationUrl?`<a href="${e.locationUrl}" target="_blank" class="external-link location-link">MAP</a>`:""}\n                    ${e.aiAnalysis?`<span class="external-link ai-link" onclick="openAIModal('${e.name}')">AI</span>`:""}\n                </div>\n                <table class="weather-table">\n                    <thead>\n                        <tr>\n                            <th>Date</th>\n                            <th>Wind</th>\n                            <th>Gusts</th>\n                            <th>Direction</th>\n                            <th>Temp</th>\n                            <th>Rain</th>\n                            ${n?"<th>Wave</th>":""}\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ${o}\n                        ${a}\n                    </tbody>\n                </table>\n            `,t}let currentFilter="all";function updateSpotCounter(e){const t=document.getElementById("spotCounterNumber");t&&(t.textContent=e)}function filterSpots(e,t,n){let o="all"===t?e:e.filter((e=>e.country===t));if(n&&""!==n.trim()){const e=n.toLowerCase().trim();o=o.filter((t=>t.name.toLowerCase().includes(e)||t.country&&t.country.toLowerCase().includes(e)))}return o}async function renderSpots(e="all",t="",n=!1,o=!1){currentFilter=e,currentSearchQuery=t;const a=document.getElementById("spotsGrid");if(globalWeatherData.length>0&&!o){return void displaySpots(filterSpots(globalWeatherData,e,t),a,e,t)}showLoadingMessage();const s=Date.now(),i=n?0:2e3;try{const n=await fetchWeatherData(),o=i-(Date.now()-s);o>0&&await new Promise((e=>setTimeout(e,o))),globalWeatherData=n,populateCountryDropdown(n);displaySpots(filterSpots(n,e,t),a,e,t)}catch(e){console.error("Failed to load weather:",e.message),showErrorMessage(e)}}function displaySpots(e,t,n,o){if(t.innerHTML="",0===e.length){updateSpotCounter(0);const e=o?`No spots found matching "${o}"`:"No kitesurfing spots found for the selected filter.";t.innerHTML=`\n                    <div class="error-message">\n                        <span class="error-icon">üîç</span>\n                        <div class="error-title">No Spots Found</div>\n                        <div class="error-description">\n                            ${e}<br/>\n                            Try adjusting your search or selecting "All" countries.\n                        </div>\n                    </div>\n                `}else{e.every((e=>!e.forecast||0===e.forecast.length))?(t.innerHTML='\n                    <div class="loading-message">\n                        <div class="loading-spinner"></div>\n                        <span class="loading-text">Thinking...</span>\n                    </div>\n                ',setTimeout((()=>{renderSpots(n,o,!1,!0)}),5e3)):(updateSpotCounter(e.length),e.forEach((e=>{t.appendChild(createSpotCard(e))})),loadCardOrder())}}function setupDropdownEvents(){const e=document.querySelectorAll(".dropdown-option"),t=document.getElementById("selectedCountry"),n=document.getElementById("searchInput");e.forEach((o=>{o.addEventListener("click",(a=>{a.stopPropagation(),e.forEach((e=>e.classList.remove("selected"))),o.classList.add("selected"),t.textContent=o.textContent;const s=o.dataset.country;localStorage.setItem("selectedCountry",s),showingFavorites&&(showingFavorites=!1,localStorage.setItem("showingFavorites","false"),document.getElementById("favoritesToggle").classList.remove("active")),renderSpots(s,n.value,!0),closeDropdown(),window.scrollTo({top:0,behavior:"smooth"})}))}))}function setupDropdown(){const e=document.getElementById("dropdownButton"),t=document.getElementById("dropdownMenu");function n(){e.classList.remove("open","active"),t.classList.remove("open")}e.addEventListener("click",(o=>{o.stopPropagation(),t.classList.contains("open")?n():(e.classList.add("open","active"),t.classList.add("open"))})),document.addEventListener("click",(o=>{e.contains(o.target)||t.contains(o.target)||n()})),document.addEventListener("keydown",(o=>{"Escape"===o.key&&t.classList.contains("open")&&(n(),e.focus())})),window.closeDropdown=n}function setupModals(){const e=document.getElementById("aiModal"),t=document.getElementById("modalClose"),n=document.getElementById("infoModal"),o=document.getElementById("infoModalClose"),a=document.getElementById("icmModal"),s=document.getElementById("icmModalClose");t.addEventListener("click",closeAIModal),e.addEventListener("click",(t=>{t.target===e&&closeAIModal()})),o.addEventListener("click",closeInfoModal),n.addEventListener("click",(e=>{e.target===n&&closeInfoModal()})),s.addEventListener("click",closeIcmModal),a.addEventListener("click",(e=>{e.target===a&&closeIcmModal()})),document.addEventListener("keydown",(t=>{"Escape"===t.key&&(e.classList.contains("active")&&closeAIModal(),n.classList.contains("active")&&closeInfoModal(),a.classList.contains("active")&&closeIcmModal())}))}function setupSearch(){const e=document.getElementById("searchInput"),t=document.getElementById("searchClear");let n;e.addEventListener("input",(e=>{const o=e.target.value;""!==o.trim()?t.classList.add("visible"):t.classList.remove("visible"),showingFavorites&&""!==o.trim()&&(showingFavorites=!1,document.getElementById("favoritesToggle").classList.remove("active")),n&&clearTimeout(n),n=setTimeout((()=>{renderSpots(currentFilter,o,!0),window.scrollTo(0,0)}),300)})),t.addEventListener("click",(()=>{e.value="",t.classList.remove("visible"),renderSpots(currentFilter,""),window.scrollTo(0,0),e.focus()})),e.addEventListener("keydown",(n=>{"Escape"===n.key&&""!==e.value&&(e.value="",t.classList.remove("visible"),renderSpots(currentFilter,""))}))}function setupDragAndDrop(){const e=document.getElementById("spotsGrid");let t=null,n=null;e.addEventListener("dragstart",(e=>{e.target.closest(".drag-handle")?(t=e.target.closest(".spot-card"),t&&(t.classList.add("dragging"),e.dataTransfer.effectAllowed="move",n=t.cloneNode(!0),n.classList.add("drag-ghost"),n.classList.remove("dragging"),n.style.width=t.offsetWidth+"px",n.style.position="fixed",n.style.left="-9999px",n.style.top="-9999px",document.body.appendChild(n),e.dataTransfer.setDragImage(n,e.offsetX,e.offsetY))):e.preventDefault()})),e.addEventListener("dragend",(e=>{t&&(t.classList.remove("dragging"),t=null,saveCardOrder()),n&&(n.remove(),n=null)})),e.addEventListener("dragover",(n=>{n.preventDefault();const o=function(e,t,n){const o=[...e.querySelectorAll(".spot-card:not(.dragging)")];let a=null,s=Number.NEGATIVE_INFINITY;return o.forEach((e=>{const o=e.getBoundingClientRect(),i=o.top+o.height/2,r=n-i,d=t-(o.left+o.width/2);if(r<0){r>s&&(s=r,a=e)}else if(d<0&&r<o.height/2){const t=d/2+r;t>s&&(s=t,a=e)}})),a}(e,n.clientX,n.clientY);t&&null==o?e.appendChild(t):t&&o&&e.insertBefore(t,o)}))}function saveCardOrder(){const e=document.getElementById("spotsGrid"),t=e.querySelectorAll(".spot-card"),n=Array.from(t).map((e=>e.querySelector(".spot-name").textContent)),o=`spotOrder_${e.classList.contains("three-columns")?"3col":"2col"}_${currentFilter}_${currentSearchQuery}`;localStorage.setItem(o,JSON.stringify(n))}function loadCardOrder(){const e=document.getElementById("spotsGrid"),t=`spotOrder_${e.classList.contains("three-columns")?"3col":"2col"}_${currentFilter}_${currentSearchQuery}`,n=localStorage.getItem(t);if(n)try{const t=JSON.parse(n),o=Array.from(e.querySelectorAll(".spot-card"));t.forEach((t=>{const n=o.find((e=>e.querySelector(".spot-name").textContent===t));n&&e.appendChild(n)}))}catch(e){console.error("Failed to load card order:",e)}}async function renderFavorites(){showingFavorites=!0;document.getElementById("favoritesToggle").classList.add("active");const e=document.getElementById("spotsGrid"),t=getFavorites();if(0===t.length)return updateSpotCounter(0),void(e.innerHTML='\n                <div class="error-message">\n                    <span class="error-icon">‚≠ê</span>\n                    <div class="error-title">No Favorites Yet</div>\n                    <div class="error-description">\n                        Click the star icon on any spot card to add it to your favorites.\n                    </div>\n                </div>\n            ');try{if(0===globalWeatherData.length){const e=await fetchWeatherData();globalWeatherData=e}const n=globalWeatherData.filter((e=>t.includes(e.name)));updateSpotCounter(n.length),e.innerHTML="",n.forEach((t=>{e.appendChild(createSpotCard(t))})),loadCardOrder()}catch(e){console.error("Failed to load favorites:",e.message),showErrorMessage(e)}}function setupFavorites(){const e=document.getElementById("favoritesToggle");e.addEventListener("click",(()=>{if(showingFavorites){showingFavorites=!1,localStorage.setItem("showingFavorites","false"),e.classList.remove("active");renderSpots(localStorage.getItem("selectedCountry")||"all","")}else localStorage.setItem("showingFavorites","true"),renderFavorites();window.scrollTo({top:0,behavior:"smooth"})}));"true"===localStorage.getItem("showingFavorites")&&renderFavorites()}function setupHamburgerMenu(){const e=document.getElementById("hamburgerMenu"),t=document.getElementById("headerControls"),n=document.querySelector(".main-content");e&&e.addEventListener("click",(()=>{t.classList.contains("show")?(t.classList.remove("show"),e.classList.remove("active"),e.textContent="‚ò∞",n&&n.classList.remove("menu-open")):(t.classList.add("show"),e.classList.add("active"),e.textContent="‚úï",n&&n.classList.add("menu-open"))}))}function calculateKiteSize(e,t,n){let o=2.5;const a={"beginner-flat":3,"beginner-small":2.8,"intermediate-flat":2.5,"intermediate-medium":2.3,"advanced-flat":2.2,"advanced-medium":2,"advanced-large":1.8};n&&a[n]&&(o=a[n]);let s=t*o/e;return s=[7,9,10,12,14,15,17].reduce(((e,t)=>Math.abs(t-s)<Math.abs(e-s)?t:e)),s}function calculateBoardSize(e,t,n){let o="Twin Tip";if((t.includes("large")||t.includes("medium")&&t.includes("advanced"))&&(o="Surfboard/Directional üèÑ"),"Twin Tip"===o){let n=125;n+=.5*(Math.min(e,115)-50);const a={"beginner-flat":1.15,"beginner-small":1.1,"intermediate-flat":1,"intermediate-medium":.98,"advanced-flat":.92,"advanced-medium":.9}[t]||1;let s=Math.round(n*a);s=2*Math.round(s/2);const i=136;let r=160;(t.includes("intermediate")||t.includes("advanced"))&&(r=142),s=Math.max(i,Math.min(s,r));let d=38+Math.floor((s-136)/4);return d=Math.min(d,46),`${s} x ${d} cm (${o})`}return`${e<70?"5'6\"":e<85?"5'10\"":"6'0\""} (${o})`}function setupKiteSizeCalculator(){const e=document.getElementById("kiteSizeToggle"),t=document.getElementById("kiteSizeModal"),n=document.getElementById("kiteSizeModalClose"),o=document.getElementById("calculateBtn");function a(){t.classList.remove("active"),document.body.style.overflow="auto"}e.addEventListener("click",(()=>{t.classList.add("active"),document.body.style.overflow="hidden",document.getElementById("calcResult").classList.remove("show")})),n.addEventListener("click",a),t.addEventListener("click",(e=>{e.target===t&&a()})),o.addEventListener("click",(()=>{const e=parseFloat(document.getElementById("windSpeed").value),t=parseFloat(document.getElementById("riderWeight").value),n=document.getElementById("skillLevel").value,o=document.getElementById("calcWarning"),a=document.getElementById("calcResult");if(o.style.display="none",a.classList.remove("show"),!e||e<5||e>50)return o.innerHTML="‚ö†Ô∏è <strong>INVALID WIND SPEED</strong><br><br>Please enter a valid wind speed between 5 and 50 knots.",void(o.style.display="block");if(!t||t>150)return o.innerHTML="‚ö†Ô∏è <strong>INVALID RIDER WEIGHT</strong><br><br>Please enter a valid rider weight between 40 and 150 kg.",void(o.style.display="block");if(t<40)return o.innerHTML="‚ö†Ô∏è <strong>WEIGHT TOO LOW</strong><br><br>Your weight is too low and riding may be dangerous. Kitesurfing requires sufficient body weight for control and safety.",void(o.style.display="block");if(!n)return o.innerHTML="‚ö†Ô∏è <strong>SKILL LEVEL REQUIRED</strong><br><br>Please select your skill level and conditions.",void(o.style.display="block");if(t>120)return o.innerHTML="üòâ Maybe you should lose some weight before going onto the water!",void(o.style.display="block");if(e>40)return o.innerHTML="‚ö†Ô∏è <strong>EXTREME CONDITIONS!</strong><br><br>Wind speeds above 40 knots are extremely dangerous. We strongly recommend NOT going onto the water in these conditions. Stay safe!",void(o.style.display="block");if(e<12)return o.innerHTML="üí® <strong>LOW WIND CONDITIONS</strong><br><br>There is not enough wind for riding with a regular setup. However, you could try going on a <strong>kite foil board</strong>, which works great in light wind conditions!",void(o.style.display="block");if(e<15&&(n.includes("medium")||n.includes("large")))return o.innerHTML="üåä <strong>INSUFFICIENT WIND FOR WAVE CONDITIONS</strong><br><br>Wind speed below 15 knots is not enough for riding in medium or large waves. Waves create additional resistance and you need more wind power to maintain speed and control. We recommend NOT going onto the water in these conditions.",void(o.style.display="block");const s=calculateKiteSize(e,t,n),i=calculateBoardSize(t,n,s);document.getElementById("kiteSize").textContent=`${s} m¬≤`,document.getElementById("boardSize").textContent=i,a.classList.add("show")})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&t.classList.contains("active")&&a()}))}function setupColumnToggle(){const e=document.getElementById("columnToggle"),t=document.getElementById("spotsGrid");"true"===localStorage.getItem("threeColumns")&&(t.classList.add("three-columns"),e.classList.add("active")),e.addEventListener("click",(()=>{t.classList.toggle("three-columns"),e.classList.toggle("active");const n=t.classList.contains("three-columns");localStorage.setItem("threeColumns",n)}))}window.openAIModal=openAIModal,window.closeAIModal=closeAIModal,window.openInfoModal=openInfoModal,window.closeInfoModal=closeInfoModal,window.openIcmModal=openIcmModal,window.closeIcmModal=closeIcmModal,window.toggleFavorite=toggleFavorite,document.addEventListener("DOMContentLoaded",(()=>{initTheme(),setupDropdown(),setupModals(),setupSearch(),setupDragAndDrop(),setupFavorites(),setupHamburgerMenu(),setupKiteSizeCalculator(),setupColumnToggle();if("true"===localStorage.getItem("showingFavorites"))showingFavorites=!0;else{renderSpots(localStorage.getItem("selectedCountry")||"all")}}))</script><script>window.onbeforeunload=function(){window.scrollTo(0,0)}</script></body></html>